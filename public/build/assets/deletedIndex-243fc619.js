import{_ as oe,Z as ae,O as le,P as ne,B as re,r as f,T as ie,D as de,R as ce,S as ue,g as u,U as me,i as d,y as R,w as r,a as A,W as w,N as x,l as i,n as e,J as n,t as g,K as j,k as _,L as I,F as W,p as Y,C as L,z as C,X as H}from"./vendor-8caf5d52.js";import{L as fe}from"./main-cc7bd0ce.js";import{P as ve}from"./page-header-18309276.js";import{P as _e}from"./Pagination-0518e4bd.js";import{s as ge}from"./search-769502e2.js";import{s as pe}from"./searchbar-e42e22fa.js";import{u as be,l as he}from"./footer-502c2797.js";import{_ as ye}from"./search-file-ab3e1046.js";import"./app-974c65a1.js";const we={data(){return{rightOffcanvas:!1}},components:{Layout:fe,PageHeader:ve,Head:ae,Pagination:_e,Multiselect:le,flatPickr:ne,Link:re,search:ge,searchbar:pe},props:{successMessage:String,alertMessage:String,app_for:String,serviceLocations:{type:Object,required:!0}},setup(a){const t=f(""),{selectedLocation:b}=be();f(a.serviceLocations||null);const s=ie({service_location_id:"all",status:null,approveStatus:null,limit:10}),h=f([]),D=f({}),B=f(!1),M=f(!1),P=f(null),{t:m}=de(),O=f({}),p=f(a.successMessage||""),V=f(a.alertMessage||""),T=()=>{p.value="",V.value=""},S=f(!1),E=()=>{y(),M.value=!0,S.value=!1},N=()=>{s.reset(),y(),S.value=!1},z=()=>{B.value=!1},k=async l=>{try{await A.delete(`/manage-owners/delete/${l}`);const c=h.value.findIndex(v=>v.id===l);c!==-1&&h.value.splice(c,1),B.value=!1,w.fire(m("success"),m("service_location_deleted_successfully"),"success")}catch{w.fire(m("error"),m("failed_to_delete_service_location"),"error")}},o=l=>a.app_for&&a.app_for=="demo"?"***********":l.mobile_number,U=l=>a.app_for&&a.app_for=="demo"?"***********":l.email,F=async l=>{w.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async c=>{if(c.isConfirmed)try{await k(l)}catch(v){console.error(m("error_deleting_data"),v),w.fire(m("error"),m("failed_to_delete_the_data"),"error")}})},y=async(l=1)=>{try{const c=s.data();c.page=l,t.value.length>0&&(c.search=t.value);const v=await A.get("/manage-owners/deletedList",{params:c});h.value=v.data.results,D.value=v.data.paginator,ee(D.value.total),M.value=!1}catch(c){console.error(m("error_fetching_manage_owners"),c)}},q=async l=>{y(l)},G=async l=>{t.value=l,y()},J=async l=>{x.get(`/manage-owners/document/${l.id}`)},K=async l=>{x.get(`/manage-owners/edit/${l.id}`)},X=async()=>{x.get("/manage-owners/create")},Z=async l=>{x.get(`/manage-owners/password/edit/${l.id}`)},Q=async l=>{x.get(`/manage-owners/view-profile/${l.id}`)},$=async l=>{if(!l){console.error("Invalid user data:",l);return}w.fire({title:"Are you sure?",text:"Do you want to restore this user?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, restore it!"}).then(async c=>{if(c.isConfirmed)try{const v=await A.patch(`/users/restore/${l}`);h.value=h.value.filter(se=>se.user_id!==l),w.fire("Restored!",v.data.message,"success")}catch(v){console.error("Error restoring user:",v),w.fire("Error!","Failed to restore user.","error")}})},ee=()=>{O.value=[10,25,50,100,200,500]},te=()=>{y()};return ce(b,l=>{s.service_location_id=l,y()}),{results:h,modalShow:B,deleteItemId:P,successMessage:p,alertMessage:V,filterData:E,deleteModal:F,closeModal:z,deleteData:k,dismissMessage:T,fetchSearch:G,searchTerm:t,paginator:D,modalFilter:M,clearFilter:N,mobileFromUser:o,emailFromUser:U,fetchDatas:y,filter:s,addOwner:X,handlePageChanged:q,editData:K,viewOwnerDocument:J,rightOffcanvas:S,editPassData:Z,viewProfile:Q,restoreUser:$,paginatorOption:O,changeEntriesPerPage:te,selectedLocation:b}},computed:{...he,...ue(["permissions"])},mounted(){this.filter.service_location_id=this.selectedLocation,this.fetchDatas()}},ke={class:"d-flex align-items-center mt-3"},Ce={class:"me-2 text-muted"},Be=["value"],Me={class:"ms-2 text-muted"},Pe={class:"table-responsive"},Se={class:"table align-middle position-relative table-nowrap"},xe={class:"table-owner"},Le={scope:"col"},De={scope:"col"},Oe={scope:"col"},Ve={scope:"col"},Ue={key:0},Fe={key:1},Re={colspan:"7",class:"text-center"},He={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Te={class:"alert-content"},Ee={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ne={class:"alert-content"},ze={class:"offcanvas-body"},Ae={class:"mb-4"},Ie={for:"service-location",class:"form-label text-muted text-uppercase fw-semibold mb-3"},We={value:"all"},Ye=["value"],je={class:"mb-4"},qe={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ge={class:"form-check form-check-inline"},Je={class:"form-check-label",for:"inlineRadio1"},Ke={class:"form-check form-check-inline"},Xe={class:"form-check-label",for:"WithoutinlineRadio2"},Ze={class:"mb-4"},Qe={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},$e={class:"form-check form-check-inline"},et={class:"form-check-label",for:"active"},tt={class:"form-check form-check-inline"},st={class:"form-check-label",for:"inactive"},ot={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function at(a,t,b,s,h,D){const B=u("Head"),M=u("PageHeader"),P=u("BCol"),m=u("BRow"),O=u("BCardHeader"),p=u("BButton"),V=u("BCardBody"),T=u("BCard"),S=u("BFrom"),E=u("BOffcanvas"),N=u("Pagination"),z=u("Layout"),k=me("b-tooltip");return d(),R(z,null,{default:r(()=>[i(B,{title:"Manage Deleted Owners"}),i(M,{title:a.$t("manage_deleted_owners"),pageTitle:a.$t("manage_owners")},null,8,["title","pageTitle"]),i(m,null,{default:r(()=>[i(P,{lg:"12"},{default:r(()=>[i(T,{"no-body":"",id:"tasksList"},{default:r(()=>[i(O,{class:"border-0"},{default:r(()=>[i(m,{class:"g-2"},{default:r(()=>[i(P,{md:"3"},{default:r(()=>[e("div",ke,[e("label",Ce,n(a.$t("show")),1),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.filter.limit=o),onChange:t[1]||(t[1]=(...o)=>s.changeEntriesPerPage&&s.changeEntriesPerPage(...o)),class:"form-select form-select-sm w-auto"},[(d(!0),_(W,null,I(s.paginatorOption,o=>(d(),_("option",{key:o,value:o},n(o),9,Be))),128))],544),[[j,s.filter.limit]]),e("label",Me,n(a.$t("entries")),1)])]),_:1}),i(P,{md:"3"})]),_:1})]),_:1}),i(V,{class:"border border-dashed border-end-0 border-start-0"},{default:r(()=>[e("div",Pe,[e("table",Se,[e("thead",xe,[e("tr",null,[e("th",Le,n(a.$t("name")),1),e("th",De,n(a.$t("email")),1),e("th",Oe,n(a.$t("mobile_number")),1),e("th",Ve,n(a.$t("action")),1)])]),s.results.length>0?(d(),_("tbody",Ue,[(d(!0),_(W,null,I(s.results,(o,U)=>(d(),_("tr",{key:U},[e("td",null,n(o.name),1),e("td",null,n(o.email),1),e("td",null,n(o.mobile_number),1),e("td",null,[a.permissions.includes("delete-owner")&&b.app_for!=="demo"?g((d(),R(p,{key:0,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",onClick:Y(F=>s.deleteModal(o.id),["prevent"]),"data-bs-toggle":"tooltip",title:a.$t("delete")},{default:r(()=>t[10]||(t[10]=[e("i",{class:"bx bx-trash bx-xs"},null,-1)])),_:2,__:[10]},1032,["onClick","title"])),[[k,void 0,void 0,{hover:!0}]]):L("",!0),a.permissions.includes("delete-owner")&&b.app_for!=="demo"?g((d(),R(p,{key:1,class:"btn btn-soft-success btn-sm m-2",size:"sm",type:"button",onClick:Y(F=>s.restoreUser(o.id),["prevent"]),"data-bs-toggle":"tooltip",title:a.$t("restore")},{default:r(()=>t[11]||(t[11]=[e("i",{class:"bx bx-undo bx-xs"},null,-1)])),_:2,__:[11]},1032,["onClick","title"])),[[k,void 0,void 0,{hover:!0}]]):L("",!0),a.permissions.includes("view-owner-profile")&&b.app_for!=="demo"?g((d(),R(p,{key:2,class:"btn btn-soft-success btn-sm m-2",size:"sm",type:"button",onClick:Y(F=>s.viewProfile(o),["prevent"]),"data-bs-toggle":"tooltip",title:a.$t("view_profile")},{default:r(()=>t[12]||(t[12]=[e("i",{class:"ri-account-circle-line bx-xs"},null,-1)])),_:2,__:[12]},1032,["onClick","title"])),[[k,void 0,void 0,{hover:!0}]]):L("",!0)])]))),128))])):(d(),_("tbody",Fe,[e("tr",null,[e("td",Re,[t[13]||(t[13]=e("img",{src:ye,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,n(a.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[s.successMessage?(d(),_("div",He,[e("div",Te,[t[14]||(t[14]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[15]||(t[15]=C()),t[16]||(t[16]=e("strong",null,"Success",-1)),C(" - "+n(s.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...o)=>s.dismissMessage&&s.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):L("",!0),s.alertMessage?(d(),_("div",Ee,[e("div",Ne,[t[17]||(t[17]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[18]||(t[18]=C()),t[19]||(t[19]=e("strong",null,"Alert",-1)),C(" - "+n(s.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...o)=>s.dismissMessage&&s.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):L("",!0)]),i(E,{modelValue:s.rightOffcanvas,"onUpdate:modelValue":t[9]||(t[9]=o=>s.rightOffcanvas=o),placement:"end",title:a.$t("filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:r(()=>[i(S,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:r(()=>[e("div",ze,[e("div",Ae,[e("label",Ie,n(a.$t("service_location")),1),g(e("select",{class:"form-control","data-choices":"","data-choices-search-false":"",name:"choices-select-status",id:"service-location","onUpdate:modelValue":t[4]||(t[4]=o=>s.filter.service_location_id=o)},[e("option",We,n(a.$t("all")),1),(d(!0),_(W,null,I(b.serviceLocations,(o,U)=>(d(),_("option",{key:o.id,value:o.id},n(o.name),9,Ye))),128))],512),[[j,s.filter.service_location_id]])]),e("div",je,[e("label",qe,n(a.$t("approval_status")),1),e("div",null,[e("div",Ge,[g(e("input",{class:"form-check-input",type:"radio",name:"approval_status",id:"inlineRadio1",value:"1","onUpdate:modelValue":t[5]||(t[5]=o=>s.filter.approveStatus=o)},null,512),[[H,s.filter.approveStatus]]),e("label",Je,n(a.$t("approved")),1)]),e("div",Ke,[g(e("input",{class:"form-check-input",type:"radio",name:"approval_status",id:"WithoutinlineRadio2",value:"0","onUpdate:modelValue":t[6]||(t[6]=o=>s.filter.approveStatus=o)},null,512),[[H,s.filter.approveStatus]]),e("label",Xe,n(a.$t("disapproved")),1)])])]),e("div",Ze,[e("label",Qe,n(a.$t("status")),1),e("div",null,[e("div",$e,[g(e("input",{class:"form-check-input",type:"radio",name:"status",id:"active",value:"1","onUpdate:modelValue":t[7]||(t[7]=o=>s.filter.status=o)},null,512),[[H,s.filter.status]]),e("label",et,n(a.$t("active")),1)]),e("div",tt,[g(e("input",{class:"form-check-input",type:"radio",name:"status",id:"inactive",value:"0","onUpdate:modelValue":t[8]||(t[8]=o=>s.filter.status=o)},null,512),[[H,s.filter.status]]),e("label",st,n(a.$t("inactive")),1)])])]),t[20]||(t[20]=e("div",null,null,-1))]),e("div",ot,[i(p,{onClick:s.clearFilter,variant:"light",class:"w-100"},{default:r(()=>[C(n(a.$t("clear_filter")),1)]),_:1},8,["onClick"]),i(p,{onClick:s.filterData,type:"submit",variant:"success",class:"w-100"},{default:r(()=>[C(n(a.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),i(N,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const vt=oe(we,[["render",at]]);export{vt as default};
