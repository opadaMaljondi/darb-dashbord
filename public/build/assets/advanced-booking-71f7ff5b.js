import{_ as We,Z as Xe,O as Ke,B as Ye,$ as Qe,P as Ze,S as $e,W as j,D as et,r as k,T as Me,R as Q,a0 as tt,o as ot,G as st,a1 as lt,a as Z,g as O,i as n,y as at,w as H,N as it,l as P,n as e,z as F,J as d,q as E,k as r,C as v,t as x,M as L,L as M,F as S,K as pe,X as $,H as nt,p as rt}from"./vendor-8caf5d52.js";import{L as dt}from"./dispatchmain-dd968ef5.js";import{P as ct}from"./page-header-18309276.js";import{F as _t}from"./FormValidation-f14f6003.js";import{g as ut}from"./googleMap-9b9e9a11.js";import"./footer-502c2797.js";import"./dispatchHorizontal-e3ea663d.js";import"./app-974c65a1.js";const pt={data(){return{rightOffcanvas:!1,isPocSame:!1,form:{is_later:0,name:"",mobile:"",drop_poc_name:"",drop_poc_mobile:""},dateTimeConfig:{enableTime:!0,dateFormat:"Y-m-d H:i:ss",minDate:this.getMinTime()}}},watch:{isPocSame(i){i?(this.form.drop_poc_name=this.form.name,this.form.drop_poc_mobile=this.form.mobile):(this.form.drop_poc_name="",this.form.drop_poc_mobile="")},"form.name"(i){this.isPocSame&&(this.form.drop_poc_name=i)},"form.mobile"(i){this.isPocSame&&(this.form.drop_poc_mobile=i)}},components:{Layout:dt,PageHeader:ct,Head:Xe,googleMap:ut,Multiselect:Ke,Link:Ye,Scrollbar:Qe,FormValidation:_t,flatPickr:Ze},computed:{...$e(["permissions"])},props:{countries:Array,default_flag:String,default_dial_code:String,successMessage:String,alertMessage:String,validate:Function,ride_type_for_ride:Array,goodsTypes:Array,firebaseSettings:Object,map_key:String,app_modules:Array,schedule_a_ride:Number,enable_ride_without_destination:Boolean,baseUrl:String,default_location:Object},methods:{timer(){let i;j.fire({title:"Booking alert!",html:"Your Ride has been Booked <b></b> Successfully.",timer:2e3,timerProgressBar:!0,didOpen:()=>{j.showLoading(),i=setInterval(()=>{j.getContent().querySelector("b").textContent=j.getTimerLeft()},100)},didClose:()=>{clearInterval(i)}}).then(s=>{s.dismiss===j.DismissReason.timer&&console.log("I was closed by the timer")})},getMinTime(){const i=new Date,s=this.schedule_a_ride?parseInt(this.schedule_a_ride):0;i.setMinutes(i.getMinutes()+s),i.setSeconds(0);const T=i.getFullYear()+"-"+String(i.getMonth()+1).padStart(2,"0")+"-"+String(i.getDate()).padStart(2,"0")+" "+String(i.getHours()).padStart(2,"0")+":"+String(i.getMinutes()).padStart(2,"0")+":00";return console.log("Formatted Time:",T),T}},computed:{dateTimeConfigReturnTime(){return{enableTime:!0,dateFormat:"Y-m-d H:i:ss",minDate:this.getMinReturnTime()}}},setup(i){const{t:s}=et(),T=k({dial_code:i.default_dial_code||"",flag:i.default_flag||""}),t=k(null),D=k(!1),I=k("personal"),l=Me({mobile:"",name:null,user_id:null,pick_address:"",drop_address:"",terminal:null,enterance:null,pick_lat:"",pick_lng:"",drop_lat:null,drop_lng:null,vehicle_type:null,distance:0,duration:0,payment_opt:1,poly_line:"",goods_type_id:null,transport_type:"",pickup_poc_name:null,drop_poc_name:null,goods_type_quantity:null,is_later:0,assign_method:0,stops:"[]",return_time:null,is_round_trip:0,is_out_station:0,requested_eta_amount:0,is_rental:0,rental_package_id:null,ride_type:"regular",trip_start_time:null,country:i.default_dial_code,drop_poc_mobile:null,is_pet_available:0,is_luggage_available:0,module:"",preferences:[],module_name:"",location:!1,miscellaneous:!1}),ee=k("-"),te=k(!1),ie=k(!1),oe=()=>{w.forEach((a,m)=>{a.latitude&&a.longitude?Y.value[m]={lat:a.latitude,lng:a.longitude}:delete Y.value[m]})},ne=k({}),_=k({}),me=k(null),q=k([]),se=k([]),W=k([]),Y=k([]),V=k(null),B=k(null),o=k({}),c=Me({pick_lat:"",pick_lng:"",drop_lat:"",drop_lng:"",distance:0,distance_in_unit:0,duration:0}),z=k("0m");Q(()=>c.duration,a=>{const m=Math.floor(a/60),p=a%60;z.value=m>0?`${m}h ${p}m`:`${p}m`});const re=async()=>{var h;const a=[],m={latitude:c.pick_lat,longitude:c.pick_lng};if(a.push(m),Array.isArray(w)&&w.forEach(u=>{const y={latitude:u.latitude,longitude:u.longitude};a.push(y)}),c.drop_lat){const u={latitude:c.drop_lat,longitude:c.drop_lng};a.push(u)}const p={address:a,ride_type:l.ride_type};try{return await Z.post("/dispatch/serviceVerify",p),!0}catch(u){if(u.response&&u.response.status===422)_.value=u.response.data.errors;else if(u.response&&u.response.status===500){if(u.response.data.message=="service not available with this location")_.value.pick_address=[s("service_unavailable")];else if(u.response.data.message=="Outstation service not available within this location")delete _.value.pick_address,_.value.drop_address=[s("outstation_service_unavailable")];else if(u.response.data.message=="Pick up and Drop should not be in the same zone")delete _.value.pick_address,_.value.drop_address=[s("same_zone_outstation_unavailable")];else{const y=u.response.data;delete _.value.pick_address,delete _.value.drop_address,a.forEach((f,g)=>{_.value.stop||(_.value.stop={}),g!==0&&(g!==a.length?y[g].available?_.value.stop[g]=[s("ride_service_unavailable")]:delete _.value.stop[g]:y[g].available?_.value.drop_address=[s("ride_service_unavailable")]:delete _.value.drop_address)})}(h=_.value)!=null&&h.stop&&Object.keys(_.value.stop).length==0&&delete _.value.stop}else console.error(s("error_creating_vehicle_price"),u),l.location=!1,le.value=s("failed_to_make_booking_contact_admin");return!1}},X=k(!1),G=k(!1),U=k({}),de=(a,m)=>{var u,y,f,g,b,N,R,K;if(!a||!m||((u=a.pickup)==null?void 0:u.lat)!==((y=m.pickup)==null?void 0:y.lat)||((f=a.pickup)==null?void 0:f.lng)!==((g=m.pickup)==null?void 0:g.lng)||((b=a.drop)==null?void 0:b.lat)!==((N=m.drop)==null?void 0:N.lat)||((R=a.drop)==null?void 0:R.lng)!==((K=m.drop)==null?void 0:K.lng))return!1;const p=a.stop||{},h=m.stop||{};if(p.length!==h.length)return!1;for(let C=0;C<p.length;C++)if(p[C].lat!==h[C].lat||p[C].lng!==h[C].lng)return!1;return!0},ge=k(!1),A=async(a,m=!1)=>{var u,y,f;if(!a)a=I.value;else if(I.value!=a)return I.value=a,!1;if(_.value={},a=="personal"&&(l.mobile?delete _.value.mobile:_.value.mobile=[s("required")],l.name?delete _.value.name:_.value.name=[s("required")]),a=="personal")return Object.keys(_.value).length>0?(console.log("personal",_.value),I.value="personal",!1):(I.value="ride",!1);if(!l.is_later!=0&&!l.is_later!=1?_.value.is_later=[s("required")]:delete _.value.is_later,l.module?delete _.value.module:_.value.module=[s("required")],a=="ride"){const g=i.app_modules.find(b=>b.id===l.module);if(g){const b=g.service_type;b=="outstation"?(l.is_out_station=1,l.is_later=1,l.is_rental=0):b=="rental"?(l.is_out_station=0,l.is_rental=1):(l.is_out_station=0,l.is_rental=0),b=="normal"?l.ride_type="regular":l.ride_type=b,l.module_name=g.name,l.transport_type=g.transport_type}return Object.keys(_.value).length>0?(console.log("ride",_.value),I.value="ride",!1):(I.value="location",!1)}let p={};if(a=="location")return c.pick_lat?p.pickup=V.value:!l.pick_address&&l.pick_address.length==0?_.value.pick_address=[s("required")]:delete _.value.pick_address,l.is_rental?(l.drop_lat="",l.drop_lng="",c.drop_lat="",c.drop_lng="",c.distance=0,c.duration=0,l.drop_address="",B.value=null,l.poly_line="",J.value={},w.length>0&&(w.forEach((g,b)=>{delete Y.value[b]}),w.length=0)):((!i.enable_ride_without_destination||l.is_out_station)&&!l.drop_address&&l.drop_address.length==0?_.value.drop_address=[s("required")]:delete _.value.drop_address,c.drop_lat&&!_.value.drop_address&&(p.drop=B.value)),w.length>0&&(!l.drop_address&&l.drop_address.length==0?_.value.drop_address=[s("required")]:delete _.value.drop_address,w.forEach((g,b)=>{_.value.stop||(_.value.stop={}),!g.latitude||g.latitude==null?_.value.stop[b]=[s("required")]:_.value.stop[b]&&delete _.value.stop[b]})),(u=_.value)!=null&&u.stop&&Object.keys(_.value.stop).length==0&&delete _.value.stop,Object.keys(_.value).length?(console.log("location",_.value),l.location=!1,!1):(w.length&&(p.stop=w),(l.is_rental||i.enable_ride_without_destination)&&(G.value=!0),de(p,U.value)||(U.value=JSON.parse(JSON.stringify(p)),c.pick_lat&&(X.value=await re(),X.value&&(await Te(),l.is_rental&&(G.value=await Ae())))),c.drop_lat&&(G.value=!!((y=l.poly_line)!=null&&y.length)),l.location==!0||m===!0&&c.pick_lat&&X&&G&&Object.keys(_.value).length==0?(l.location=!0,I.value="vehicle",!1):(console.log("location",_.value),l.location=!1,I.value="location",!1));if(l.location==!1)return I.value="location",!1;if(a=="vehicle"&&!l.vehicle_type?_.value.vehicle_type=[s("required")]:delete _.value.vehicle_type,Object.keys(_.value).length||!l.location)return!1;ge.value=l.transport_type=="taxi"&&!l.is_later&&!l.is_rental&&((f=Object.keys(o.value))==null?void 0:f.length)==0;const h=q.value.find(g=>g.zone_type_id==l.vehicle_type);if(l.requested_eta_amount=(h==null?void 0:h.total)??0,l.vehicleTypeName=(h==null?void 0:h.name)??"",ge.value)l.miscellaneous=!0;else if(a=="vehicle"&&l.miscellaneous==!1)return I.value="miscellaneous",!1;if(a=="miscellaneous"&&l.miscellaneous==!1){if(l.is_later&&(l.trip_start_time?delete _.value.trip_start_time:_.value.trip_start_time=[s("required")]),l.is_out_station&&(l.trip_start_time?delete _.value.trip_start_time:_.value.trip_start_time=[s("required")]),l.is_out_station&&l.is_round_trip&&(l.return_time?delete _.value.return_time:_.value.return_time=[s("required")]),l.transport_type=="delivery"&&(l.goods_type_id?delete _.value.goods_type_id:_.value.goods_type_id=[s("required")],l.goods_type_quantity?delete _.value.goods_type_quantity:_.value.goods_type_quantity=[s("required")],l.drop_poc_name?delete _.value.drop_poc_name:_.value.drop_poc_name=[s("required")],l.drop_poc_mobile?delete _.value.drop_poc_mobile:_.value.drop_poc_mobile=[s("required")]),l.is_rental&&(l.rental_package_id?delete _.value.rental_package_id:_.value.rental_package_id=[s("required")]),Object.keys(_.value).length)return console.log("miscellaneous",_.value),I.value="miscellaneous",l.miscellaneous=!1,!1;l.miscellaneous=!0}return console.log("book"),I.value="booking",D.value=!0,!0},Se=k(!1),be=k(i.successMessage||""),le=k(i.alertMessage||""),xe=()=>{be.value="",le.value=""},w=tt([]),ye=2,Ie=()=>{l.location=!1,w.length<ye?(w.push({address:"",latitude:null,longitude:null}),oe()):j.fire(s("maximum_stopovers_reached"),s("you_can_add_up_to_5_stopovers_only"),"warning")},Ce=a=>{w.splice(a,1),oe(),l.location=!1,A("location")},Ve=k(null),Pe=async()=>{if(c.pick_lat&&c.pick_lng&&(l.poly_line.length&&(l.poly_line=""),V.value={lat:c.pick_lat,lng:c.pick_lng},l.is_rental))return!0;if(!V.value||!B.value)return!1;const a="https://routes.googleapis.com/directions/v2:computeRoutes",m={origin:{location:{latLng:{latitude:V.value.lat,longitude:V.value.lng}}},destination:{location:{latLng:{latitude:B.value.lat,longitude:B.value.lng}}},travelMode:"DRIVE",routingPreference:"TRAFFIC_AWARE",computeAlternativeRoutes:!1,routeModifiers:{avoidTolls:!1,avoidHighways:!1,avoidFerries:!1},languageCode:"en-US",units:"IMPERIAL"};m.intermediates=w.map(h=>({location:{latLng:{latitude:h.latitude,longitude:h.longitude}}}));const p={"Content-Type":"application/json","X-Goog-Api-Key":i.map_key,"X-Goog-FieldMask":"routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline,routes.viewport"};Z.post(a,m,{headers:p}).then(h=>{var y,f;const u=(y=h.data.routes)==null?void 0:y[0];return u?(c.distance=u.distanceMeters,c.duration=Math.round(parseFloat(u.duration.slice(0,-1))/60),l.poly_line.length&&(l.poly_line=""),(f=u.polyline)!=null&&f.encodedPolyline&&(l.poly_line=u.polyline.encodedPolyline),_.value.map&&delete _.value.map,Be(),!0):!1}).catch(h=>(l.location=!1,_.value.location=s("service_not_available"),_.value.map=s("service_not_available"),console.error("Error:",h),!1))},ce=k([]),_e=k([]),ue=k([]),qe=(a,m=null)=>{var p;a=="pickup"?l.pick_address.length<3?ce.value=[]:setTimeout(()=>{fe(l.pick_address,a)},300):a=="drop"?l.drop_address.length<3?_e.value=[]:setTimeout(()=>{fe(l.drop_address,a)},300):a=="stop"&&(((p=w[m])==null?void 0:p.address.length)<3?ue.value[m]=[]:setTimeout(()=>{var h;fe((h=w[m])==null?void 0:h.address,a,m)},300))},fe=(a,m,p=null)=>{const h="https://places.googleapis.com/v1/places:autocomplete",u={"Content-Type":"application/json","X-Goog-Api-Key":i.map_key,"X-Goog-FieldMask":"suggestions.placePrediction.placeId,suggestions.placePrediction.place,suggestions.placePrediction.text"};fetch(h,{method:"POST",headers:u,body:JSON.stringify({input:a})}).then(f=>f.json()).then(f=>{var g;((g=f.suggestions)==null?void 0:g.length)>0&&(m=="pickup"?ce.value=f.suggestions.filter(b=>b.placePrediction).map(b=>({placeId:b.placePrediction.placeId,formattedAddress:b.placePrediction.text.text})):m=="drop"?_e.value=f.suggestions.filter(b=>b.placePrediction).map(b=>({placeId:b.placePrediction.placeId,formattedAddress:b.placePrediction.text.text})):m=="stop"&&(ue.value[p]=f.suggestions.filter(b=>b.placePrediction).map(b=>({placeId:b.placePrediction.placeId,formattedAddress:b.placePrediction.text.text}))))}).catch(f=>{console.error("Error fetching autocomplete results:",f)})},Re=async(a,m,p=null)=>{const h={"X-Goog-Api-Key":i.map_key,"X-Goog-FieldMask":"location"};fetch(`https://places.googleapis.com/v1/places/${a.placeId}?fields=location`,{headers:h}).then(u=>u.json()).then(u=>{if(m=="pickup"){c.pick_lat=u.location.latitude,c.pick_lng=u.location.longitude,l.pick_address=a.formattedAddress;const y={lat:u.location.latitude,lng:u.location.longitude};V.value=y,ce.value=[]}else if(m=="drop"){c.drop_lat=u.location.latitude,c.drop_lng=u.location.longitude,l.drop_address=a.formattedAddress;const y={lat:u.location.latitude,lng:u.location.longitude};B.value=y,_e.value=[]}else m=="stop"&&(ue.value[p]=[],w[p].address=a.formattedAddress,w[p].latitude=u.location.latitude,w[p].longitude=u.location.longitude);l.location=!1,A("location",!1)}).catch(u=>{console.error("Error fetching autocomplete results:",u)})};let he=!0;const Te=async()=>{he&&setTimeout(async()=>(he=!0,await Pe()),1e3),he=!1},J=k({});Q(w,a=>{var m=!1;a.forEach((p,h)=>{p.latitutde&&(m=!0),oe()}),m&&(l.location=!1,A("location"))},{deep:!0});const Be=async()=>{W.value=[],q.value=[];const{pick_lat:a,pick_lng:m,drop_lat:p,drop_lng:h,distance:u,duration:y}=c.data(),f={pick_lat:a,pick_lng:m,distance:u,duration:y};f.transport_type=l.transport_type,p&&(f.drop_lat=p),h&&(f.drop_lng=h),l.is_out_station&&(f.is_out_station=1,l.trip_start_time&&(f.trip_start_time=l.trip_start_time),l.return_time&&(f.return_time=l.return_time)),f.dispatch=1,w.length>0&&(f.stops=JSON.stringify(w));try{const g=await Z.post("/dispatch/request/eta",f);q.value=g.data.data,q.value.length>0&&(q.value[0].unit_in_words=="MILES"?(c.distance_in_unit=c.distance*.621371,ee.value=s("miles")):(c.distance_in_unit=c.distance,ee.value=s("km"))),I.value="location",Ee(V.value)}catch{console.error(_)}},Ue=(a,m,p,h)=>{m=="pickup"?(c.pick_lat=p.lat,c.pick_lng=p.lng,l.pick_address=a,V.value=p,l.location=!1,A("location")):m=="drop"?(l.drop_address=a,B.value=p,l.location=!1,A("location")):(w[h].address=a,w[h].latitude=p.lat,w[h].longitude=p.lng,l.location=!1,A("location"))},Ae=async()=>{W.value=[],q.value=[];const{pick_lat:a,pick_lng:m}=c.data(),p={pick_lat:a,pick_lng:m,transport_type:l.transport_type},h=await Z.post("/dispatch/request/list_packages",p);se.value=h.data.data};function Oe(a,m,p,h){const u=R=>R*Math.PI/180,y=R=>R*180/Math.PI,f=u(h-m),g=Math.sin(f)*Math.cos(u(p)),b=Math.cos(u(a))*Math.sin(u(p))-Math.sin(u(a))*Math.cos(u(p))*Math.cos(f),N=Math.atan2(g,b);return(y(N)+360)%360}const Ee=a=>{q.value.forEach(p=>{p.driver_time=null}),firebase.database().ref("drivers").on("value",p=>{p.forEach(h=>{var N,R;const u=h.val(),y=u.g,f=Fe(y);if(f){const K=Le(a.lat,a.lng,f.lat,f.lon);var g=!0;if(l.vehicle_type){g=!1;var b=(R=(N=q.value)==null?void 0:N.find(C=>C.zone_type_id===l.vehicle_type))==null?void 0:R.type_id;b&&u.vehicle_types&&u.vehicle_types.includes(b)&&(g=!0)}if(K<=10&&u.is_available&&u.is_active&&g){Ne(u,K);const C=J.value[u.id];C?C.lat!==f.lat&&C.lng!==f.lon&&(J.value[u.id]={lat:f.lat,lng:f.lon,rotation:Oe(C.lat,C.lng,f.lat,f.lng),type_icon:u.vehicle_type_icon}):J.value[u.id]={lat:f.lat,lng:f.lon,rotation:u.bearing,type_icon:u.vehicle_type_icon}}else J.value[u.id]&&delete J.value[u.id]}})})};Q(()=>l.rental_package_id,async a=>{if(a){const p=se.value.find(h=>h.id===a).typesWithPrice.data;W.value=p}}),Q(()=>l.name,async a=>{l.pick_address&&A("location")}),Q(()=>c.pick_lat,async a=>{a&&(l.location=!1,A("location"))}),Q(()=>c.drop_lat,async a=>{a&&c.pick_lat&&(l.location=!1,A("location"))});const Ne=(a,m)=>{const p=je(m);return q.value.forEach(h=>{a.vehicle_types&&a.vehicle_types.includes(h.type_id)&&(!h.driver_distance||h.driver_distance>m)&&(h.driver_time=p)}),!0},je=a=>a<2?"3 Mins":a>2&&a<5?"5 Mins":a>5&&a<7?"10 Mins":"15 mins",Fe=a=>{const m="0123456789bcdefghjkmnpqrstuvwxyz",p=[16,8,4,2,1];let h=!0,u=-90,y=90,f=-180,g=180,b,N;if(a){for(let R=0;R<a.length;R++){let K=a.charAt(R),C=m.indexOf(K);for(let ve=0;ve<5;ve++){let we=p[ve];if(h){let ae=(f+g)/2;C&we?f=ae:g=ae}else{let ae=(u+y)/2;C&we?u=ae:y=ae}h=!h}}return b=(u+y)/2,N=(f+g)/2,{lat:b,lon:N}}},Le=(a,m,p,h)=>{const y=(p-a)*Math.PI/180,f=(h-m)*Math.PI/180,g=Math.sin(y/2)*Math.sin(y/2)+Math.cos(a*Math.PI/180)*Math.cos(p*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);return 6371*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))},De=async()=>{if(!A())return!1;D.value=!1;const{pick_lat:a,pick_lng:m,drop_lat:p,drop_lng:h,distance:u,duration:y}=c.data();a&&(l.pick_lat=a),m&&(l.pick_lng=m),p&&(l.drop_lat=p),h&&(l.drop_lng=h),u&&(l.distance=u),y&&(l.duration=y),l.preferences=JSON.stringify(l.preferences),w.length>0&&(l.stops=JSON.stringify(w));try{let f;if(f=await Z.post("/dispatch/create-request",l.data()),f.data.success===!0){let g;j.fire({title:"Booking Successfull",html:"Your Ride has been Booked Successfully.",timer:2e3,timerProgressBar:!0,didOpen:()=>{j.showLoading(),g=setInterval(()=>{j.getContent().querySelector("b").textContent=j.getTimerLeft()},100)},didClose:()=>{clearInterval(g)}}).then(b=>{b.dismiss===j.DismissReason.timer&&console.log("I was closed by the timer"),D.value=!0}),l.assign_method==1&&it.get("ongoing_request/assign/"+f.data.data.id),l.reset(),c.reset(),q.value=[],W.value=[],w.length=0,V.value=null,B.value=null,l.poly_line="",J.value={},G.value=!1,X.value=!1,I.value="personal"}else le.value=s("failed_to_make_booking_contact_admin")}catch(f){f.response&&f.response.status===422?_.value=f.response.data.errors:(console.error(s("error_creating_vehicle_price"),f),le.value=s("failed_to_make_booking_contact_admin"))}};ot(()=>{var a={apiKey:i.firebaseSettings.firebase_api_key,authDomain:i.firebaseSettings.firebase_auth_domain,databaseURL:i.firebaseSettings.firebase_database_url,projectId:i.firebaseSettings.firebase_project_id,storageBucket:i.firebaseSettings.firebase_storage_bucket,messagingSenderId:i.firebaseSettings.firebase_messaging_sender_id,appId:i.firebaseSettings.firebase_app_id};firebase.apps.length==0&&firebase.initializeApp(a),Ve.value=firebase.database().ref("drivers")});const He=k(""),ke=k(""),ze=st(()=>i.countries.filter(a=>a.name.toLowerCase().includes(ke.value.toLowerCase()))),Ge=a=>{T.value=a,l.country=a.dial_code},Je=lt(async a=>{a.target.value=a.target.value.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1");const m=await Z.get("/dispatch/fetch-user-detail",{params:{mobile:l.mobile}});m.data.data?(l.pick_address&&A(),l.name=m.data.data.name,l.user_id=m.data.data.id):(l.user_id=null,l.name=null)},300);return{form:l,modalShow:Se,successMessage:be,alertMessage:le,dismissMessage:xe,scrollContainer:t,validationRef:me,validationRules:ne,errors:_,mobile:He,showInfo:I,selectedCountry:T,searchQuery:ke,filteredCountries:ze,selectCountry:Ge,validateNumber:Je,showAiportTerminal:te,showTrainStationEnterance:ie,etaParam:c,vehicleTypes:q,makeBooking:De,bookValidate:A,maxStopovers:ye,enableBooking:D,stopovers:w,pickupMarker:V,dropMarker:B,driverMarkers:J,stopMarkers:Y,packageTypes:se,rentalVehicleTypes:W,addStopover:Ie,removeStopover:Ce,getMinReturnTime:()=>{const a=c.duration,m=l.trip_start_time,p=new Date(m);return p.setMinutes(p.getMinutes()+a),p},handleInput:qe,selectSuggestion:Re,pickSuggestions:ce,dropSuggestions:_e,stopSuggestions:ue,formattedDuration:z,unit:ee,handlePickupAddress:Ue,preferences:o,preferenceIconUrl:a=>{var m;return((m=o.value.find(p=>p.preference_id==a))==null?void 0:m.icon)??"-"},preferenceName:a=>{var m;return((m=o.value.find(p=>p.preference_id==a))==null?void 0:m.name)??"-"}}}},mt={class:"row mt-4"},ft={class:"col-lg-6 col-sm-6"},ht={class:"p-0 border border-dashed rounded"},vt={class:"d-flex align-items-center"},gt={class:"flex-grow-1"},bt={class:"text-muted mb-1"},yt={class:"fs-16 fw-bold ms-2"},kt={class:"col-lg-6 col-sm-6"},wt={class:"p-0 border border-dashed rounded"},Mt={class:"d-flex align-items-center"},St={class:"flex-grow-1"},xt={class:"text-muted mb-1"},It={class:"fs-16 fw-bold ms-2"},Ct={class:"row"},Vt={class:"col-12 col-lg-6",ref:"scrollContainer",style:{"max-height":"500px","overflow-y":"auto"}},Pt={class:"accordion accordion-flush",id:"accordionform"},qt={class:"accordion-item border-0"},Rt=["aria-expanded"],Tt={class:"card-title flex-grow-1"},Bt={key:0,class:"text-danger"},Ut={key:0},At={key:0,class:"mt-2 amount text-dark"},Ot={class:"row"},Et={class:"col-6"},Nt={class:"form-label"},jt={class:"input-group","data-input-flag":""},Ft={class:"btn btn-light border",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Lt=["src"],Dt={class:"ms-2 country-codeno"},Ht=["placeholder"],zt={class:"dropdown-menu w-100"},Gt={class:"p-2 px-3 pt-1 searchlist-input"},Jt=["placeholder"],Wt={class:"list-unstyled dropdown-menu-list mb-0"},Xt=["onClick"],Kt=["src"],Yt={class:"align-middle"},Qt={class:"col-6"},Zt={class:"mb-3"},$t={for:"name",class:"form-label"},eo=["placeholder"],to={class:"col-lg-12"},oo={class:"text-center"},so={class:"accordion-item border-0"},lo=["aria-expanded"],ao={class:"card-title flex-grow-1"},io={key:0,class:"text-danger"},no={key:0},ro={key:0,class:"mt-2 amount text-dark"},co={class:"row"},_o={class:"col-sm-6"},uo={class:"mb-3"},po={for:"type",class:"form-label"},mo={key:0,class:"text-danger"},fo={disabled:"",value:""},ho={key:0,value:"0"},vo={value:"1"},go={class:"col-sm-6"},bo={class:"mb-3"},yo={for:"ride_type",class:"form-label"},ko={key:0,class:"text-danger"},wo={disabled:"",value:""},Mo=["value"],So={class:"col-lg-12"},xo={class:"text-center"},Io={class:"accordion-item border-0"},Co=["aria-expanded"],Vo={class:"card-title flex-grow-1"},Po={key:0,class:"text-danger"},qo={class:"row"},Ro={class:"mb-3"},To={class:"d-flex align-items-center justify-content-between"},Bo={for:"pickup",class:"form-label"},Uo={class:"autocomplete-container"},Ao={class:"input-group"},Oo=["placeholder"],Eo={key:0,class:"autocomplete-results"},No=["onClick"],jo={class:"row"},Fo={class:"mb-3"},Lo=["for"],Do={class:"d-flex align-items-center"},Ho={class:"autocomplete-container col-8"},zo={class:"input-group"},Go=["onUpdate:modelValue","placeholder","onInput"],Jo={key:0,class:"autocomplete-results"},Wo=["onClick"],Xo=["onClick"],Ko={class:"row"},Yo={key:0,class:"col-12"},Qo={class:"mb-3"},Zo={for:"terminal",class:"form-label"},$o={class:"row"},es={key:0,class:"col-12"},ts={class:"mb-3"},os={for:"enterance",class:"form-label"},ss={class:"row"},ls={key:0,class:"col-12"},as={class:"mb-3"},is={for:"drop",class:"form-label"},ns={class:"autocomplete-container"},rs={class:"input-group"},ds=["placeholder"],cs={key:0,class:"autocomplete-results"},_s=["onClick"],us={key:0,class:"col-12"},ps={class:"mb-3"},ms={class:"col-lg-12"},fs={class:"text-center"},hs={key:0,class:"accordion-item border-0"},vs={class:"card-title flex-grow-1"},gs={key:0,class:"text-danger"},bs={key:1,class:"mt-2 amount text-dark"},ys={class:"row"},ks={key:0,class:"mt-4"},ws={key:1,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},Ms={class:"mb-0"},Ss={class:"d-flex mt-2"},xs=["for"],Is=["id","value"],Cs={class:"select-checkbox-btn-content"},Vs={class:"w-32 cursor-pointer"},Ps={class:"text-center mt-2 ms-4 text-dark"},qs={class:"w-32 h-32 flex-none image-fit rounded-circle"},Rs=["src"],Ts={class:"text-center mt-2 amount text-dark"},Bs={class:"text-center mt-2 text-dark"},Us={class:"row"},As={key:0,class:"card-title flex-grow-1 mt-4"},Os={key:1,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},Es={class:"mb-0"},Ns={class:"d-flex mt-5"},js=["for"],Fs=["id","value"],Ls={class:"select-checkbox-btn-content"},Ds={class:"w-32 cursor-pointer"},Hs={class:"text-center mt-2 ms-4 text-dark"},zs={class:"w-32 h-32 flex-none image-fit rounded-circle"},Gs=["src"],Js={class:"text-center mt-2 amount text-dark"},Ws={class:"text-center mt-2 text-dark"},Xs={class:"col-lg-12"},Ks={class:"text-center"},Ys={key:1,class:"accordion-item border-0"},Qs=["aria-expanded"],Zs={class:"card-title flex-grow-1"},$s={key:0,class:"text-danger"},el={class:"row"},tl={key:0,class:"card-title mb-2 flex-grow-1 mt-4"},ol={key:1,class:"px-2 mb-2"},sl={class:"badge bg-dark-subtle text-dark p-1 fs-12 text-center"},ll={class:"form-check m-2 mx-3"},al={class:"form-check-label mt-1",for:"poc"},il={class:"row"},nl={key:0,class:"col-6"},rl={class:"mb-3"},dl={for:"poc_name",class:"form-label"},cl=["placeholder","disabled"],_l={key:1,class:"col-6"},ul={class:"mb-3"},pl={for:"poc_mobile",class:"form-label"},ml=["placeholder","disabled"],fl={class:"row"},hl={key:0,class:"card-title mb-2 flex-grow-1 mt-4"},vl={key:1,class:"col-6"},gl={class:"mb-3"},bl={for:"goods_type",class:"form-label"},yl={disabled:"",value:""},kl=["value"],wl={key:2,class:"col-6"},Ml={class:"mb-3"},Sl={for:"goods_type_quantity",class:"form-label"},xl=["placeholder"],Il={class:"row"},Cl={key:0,class:"card-title mb-3 flex-grow-1 mt-4"},Vl={key:1,style:{"max-width":"600px","overflow-x":"auto"},class:"col-12"},Pl={class:"mb-3"},ql={for:"rental_package_id",class:"form-label"},Rl={disabled:"",value:""},Tl=["value"],Bl={class:"row"},Ul={key:0,class:"col-12"},Al={class:"mb-3"},Ol={for:"dispatch-datepicker",class:"form-label"},El={class:"row"},Nl={key:0,class:"mt-4 mb-4"},jl={class:"card-title mb-3 flex-grow-1"},Fl={class:"form-check form-check-inline"},Ll={class:"form-check-label",for:"oneway"},Dl={class:"form-check form-check-inline"},Hl={class:"form-check-label",for:"roundtrip"},zl={class:"row"},Gl={key:0,class:"col-12"},Jl={class:"mb-3"},Wl={for:"dispatch-datepicker",class:"form-label"},Xl={key:0,class:"row"},Kl={class:"col-6"},Yl={class:"mb-3"},Ql={for:"preferences",class:"form-label"},Zl={class:"col-sm-auto"},$l={class:"avatar-group"},ea={class:"avatar-group-item"},ta=["title","data-bs-original-title"],oa=["src","alt"],sa={class:"col-6"},la={class:"mb-3"},aa={for:"preferences",class:"form-label"},ia={class:"col-lg-12"},na={class:"text-center"},ra={key:2,class:"accordion-item border-0"},da={class:"card-title flex-grow-1"},ca={class:"row"},_a={class:"mt-4 mb-4"},ua={class:"card-title mb-3 flex-grow-1"},pa={class:"form-check form-check-inline"},ma=["checked"],fa={class:"form-check-label",for:"WithoutinlineRadio1"},ha={class:"form-check form-check-inline"},va=["checked"],ga={class:"form-check-label",for:"WithoutinlineRadio2"},ba={class:"col-lg-12"},ya={class:"text-center"},ka=["disabled"],wa={class:"col-12 col-lg-6"},Ma={class:"mb-3 text-center m-auto"},Sa={id:"map",style:{height:"500px"}};function xa(i,s,T,t,D,I){const l=O("Head"),ee=O("PageHeader"),te=O("BCol"),ie=O("BRow"),oe=O("BCardHeader"),ne=O("flat-pickr"),_=O("Multiselect"),me=O("googleMap"),q=O("FormValidation"),se=O("BCardBody"),W=O("BCard"),Y=O("Layout");return n(),at(Y,null,{default:H(()=>[P(l,{title:"Taxi Ride"}),P(ee,{title:i.$t("book"),pageTitle:i.$t("dispatch")},null,8,["title","pageTitle"]),P(ie,null,{default:H(()=>[P(te,{lg:"12"},{default:H(()=>[P(W,{"no-body":"",id:"tasksList"},{default:H(()=>[P(oe,{class:"border-0"},{default:H(()=>[P(ie,null,{default:H(()=>[P(te,{lg:"6"}),P(te,{lg:"6"},{default:H(()=>[e("div",mt,[e("div",ft,[e("div",ht,[e("div",vt,[s[42]||(s[42]=e("div",{class:"avatar-sm me-2"},[e("div",{class:"avatar-title rounded bg-transparent text-success fs-24"},[e("i",{class:"ri-map-pin-time-line"})])],-1)),e("div",gt,[e("p",bt,[F(d(i.$t("duration"))+" :",1),e("span",yt,d(t.formattedDuration),1)])])])])]),e("div",kt,[e("div",wt,[e("div",Mt,[s[43]||(s[43]=e("div",{class:"avatar-sm me-2"},[e("div",{class:"avatar-title rounded bg-transparent text-success fs-24"},[e("i",{class:"ri-pin-distance-line"})])],-1)),e("div",St,[e("p",xt,[F(d(i.$t("distance"))+" :",1),e("span",It,d((t.etaParam.distance_in_unit/1e3).toFixed(2))+" "+d(t.unit),1)])])])])])])]),_:1})]),_:1})]),_:1}),P(se,{class:"border border-dashed border-end-0 border-start-0"},{default:H(()=>[e("form",{onSubmit:s[41]||(s[41]=rt((...V)=>i.handleSubmit&&i.handleSubmit(...V),["prevent"]))},[P(q,{form:t.form,rules:t.validationRules,ref:"validationRef"},{default:H(()=>{var V,B;return[e("div",Ct,[e("div",Vt,[e("div",Pt,[e("div",qt,[e("h2",{class:"card-title accordion-header",id:"personal-one",onClick:s[0]||(s[0]=o=>t.bookValidate("personal"))},[e("button",{class:E({"accordion-button":!0,collapsed:t.showInfo!="personal"}),type:"button","data-bs-toggle":"collapse","data-bs-target":"#personal-info","aria-expanded":t.showInfo=="personal","aria-controls":"personal-info"},[e("h4",Tt,[F(d(i.$t("personal_info")),1),t.errors.mobile?(n(),r("span",Bt,"*")):v("",!0)]),t.showInfo!="personal"?(n(),r("span",Ut,[t.form.mobile&&t.showInfo!="personal"?(n(),r("span",At,d(t.form.name+" - "+t.form.mobile),1)):v("",!0)])):v("",!0)],10,Rt)]),e("div",{id:"personal-info",class:E({"accordion-collapse":!0,collapse:!0,show:t.showInfo=="personal"}),"aria-labelledby":"personal-info","data-bs-parent":"#accordionform"},[e("div",Ot,[e("div",Et,[e("div",null,[e("label",Nt,d(i.$t("mobile")),1),e("div",jt,[e("button",Ft,[e("img",{src:t.selectedCountry.flag,alt:"flag",height:"20",class:"country-flagimg rounded"},null,8,Lt),e("span",Dt,d(t.selectedCountry.dial_code),1)]),x(e("input",{type:"text",id:"mobile",class:"form-control rounded-end flag-input","onUpdate:modelValue":s[1]||(s[1]=o=>t.form.mobile=o),onKeydown:s[2]||(s[2]=(...o)=>i.preventDefault&&i.preventDefault(...o)),placeholder:i.$t("enter_number"),onInput:s[3]||(s[3]=(...o)=>t.validateNumber&&t.validateNumber(...o))},null,40,Ht),[[L,t.form.mobile]]),e("div",zt,[e("div",Gt,[x(e("input",{type:"text",class:"form-control form-control-sm border search-countryList",placeholder:i.$t("search_country_name_or_country_code"),"onUpdate:modelValue":s[4]||(s[4]=o=>t.searchQuery=o)},null,8,Jt),[[L,t.searchQuery]])]),e("ul",Wt,[(n(!0),r(S,null,M(t.filteredCountries,o=>(n(),r("li",{key:o.id},[e("a",{href:"javascript:void(0);",class:"dropdown-item notify-item language py-2",onClick:c=>t.selectCountry(o)},[e("img",{src:o.flag,alt:"flag",class:"me-2 rounded",height:"18"},null,8,Kt),e("span",Yt,d(o.name)+" "+d(o.dial_code),1)],8,Xt)]))),128))])])]),(n(!0),r(S,null,M(t.errors.mobile,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])]),e("div",Qt,[e("div",Zt,[e("label",$t,d(i.$t("name")),1),x(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[5]||(s[5]=o=>t.form.name=o),placeholder:i.$t("enter_name"),id:"name"},null,8,eo),[[L,t.form.name]]),(n(!0),r(S,null,M(t.errors.name,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])])]),e("div",to,[e("div",oo,[e("button",{type:"button",onClick:s[6]||(s[6]=o=>t.bookValidate("personal")),class:"btn btn-primary"},d(i.$t("confirm")),1)])])],2)]),e("div",so,[e("h2",{class:"card-title accordion-header",id:"ride-one",onClick:s[7]||(s[7]=o=>t.bookValidate("ride"))},[e("button",{class:E({"accordion-button":!0,collapsed:t.showInfo!="ride"}),type:"button","data-bs-toggle":"collapse","data-bs-target":"#ride-info","aria-expanded":t.showInfo=="ride","aria-controls":"ride-info"},[e("h4",ao,[F(d(i.$t("ride_info")),1),t.errors.module||t.errors.is_later?(n(),r("span",io,"*")):v("",!0)]),t.showInfo!="ride"?(n(),r("span",no,[t.form.module&&t.showInfo!="ride"?(n(),r("span",ro,d(t.form.module_name),1)):v("",!0)])):v("",!0)],10,lo)]),e("div",{id:"ride-info",class:E({"accordion-collapse":!0,collapse:!0,show:t.showInfo=="ride"}),"aria-labelledby":"ride-info","data-bs-parent":"#accordionform"},[e("div",co,[e("div",_o,[e("div",uo,[e("label",po,[F(d(i.$t("booking_type"))+" ",1),t.errors.is_later?(n(),r("span",mo,"*")):v("",!0)]),x(e("select",{id:"type",class:"form-select","onUpdate:modelValue":s[8]||(s[8]=o=>t.form.is_later=o)},[e("option",fo,d(i.$t("choose_type")),1),t.form.ride_type!=="outstation"?(n(),r("option",ho,d(i.$t("instant_booking")),1)):v("",!0),e("option",vo,d(i.$t("book_later")),1)],512),[[pe,t.form.is_later]]),(n(!0),r(S,null,M(t.errors.is_later,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])]),e("div",go,[e("div",bo,[e("label",yo,[F(d(i.$t("ride_type")),1),t.errors.module?(n(),r("span",ko,"*")):v("",!0)]),T.app_modules.length>0?x((n(),r("select",{key:0,id:"ride_type",class:"form-select","onUpdate:modelValue":s[9]||(s[9]=o=>t.form.module=o)},[e("option",wo,d(i.$t("choose_type")),1),(n(!0),r(S,null,M(T.app_modules,(o,c)=>(n(),r("option",{key:c,value:o.id},d(o.name),9,Mo))),128))],512)),[[pe,t.form.module]]):v("",!0),(n(!0),r(S,null,M(t.errors.module,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])])]),e("div",So,[e("div",xo,[e("button",{type:"button",onClick:s[10]||(s[10]=o=>t.bookValidate("ride")),class:"btn btn-primary"},d(i.$t("confirm")),1)])])],2)]),e("div",Io,[e("h2",{class:"card-title accordion-header",id:"location-one",onClick:s[11]||(s[11]=o=>t.bookValidate("location"))},[e("button",{class:E({"accordion-button":!0,collapsed:t.showInfo!="location"}),type:"button","data-bs-toggle":"collapse","data-bs-target":"#location-info","aria-expanded":t.showInfo=="location","aria-controls":"location-info"},[e("h4",Vo,[F(d(i.$t("location")),1),t.etaParam.pick_lat&&!t.form.location?(n(),r("span",Po,"*")):v("",!0)])],10,Co)]),e("div",{id:"location-info",class:E({"accordion-collapse":!0,collapse:!0,show:t.showInfo=="location"}),"aria-labelledby":"location-info","data-bs-parent":"#accordionform"},[e("div",qo,[e("div",Ro,[e("div",To,[e("label",Bo,d(i.$t("pickup_location")),1),t.form.ride_type=="regular"&&t.stopovers.length<t.maxStopovers?(n(),r("a",{key:0,class:"btn btn-primary mb-3",onClick:s[12]||(s[12]=(...o)=>t.addStopover&&t.addStopover(...o))},d(i.$t("add_stops")),1)):v("",!0)]),e("div",Uo,[e("div",Ao,[x(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[13]||(s[13]=o=>t.form.pick_address=o),placeholder:i.$t("enter_pickup"),id:"pickup",autocomplete:"off",onInput:s[14]||(s[14]=o=>t.handleInput("pickup"))},null,40,Oo),[[L,t.form.pick_address]])]),t.pickSuggestions.length>0?(n(),r("div",Eo,[(n(!0),r(S,null,M(t.pickSuggestions,o=>(n(),r("div",{key:o.placeId,class:"autocomplete-item",onClick:c=>t.selectSuggestion(o,"pickup")},d(o.formattedAddress),9,No))),128))])):v("",!0)]),(n(!0),r(S,null,M(t.errors.pick_address,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])]),e("div",jo,[t.form.ride_type=="regular"?(n(!0),r(S,{key:0},M(t.stopovers,(o,c)=>{var z,re,X,G;return n(),r("div",{class:"col-12",key:c},[e("div",Fo,[e("label",{for:`stop-${c}`,class:"form-label"},d(i.$t("stop_location")),9,Lo),e("div",Do,[e("div",Ho,[e("div",zo,[x(e("input",{type:"text",class:"form-control","onUpdate:modelValue":U=>o.address=U,placeholder:"Enter stop "+(c+1),id:"`stop-${index}`",autocomplete:"off",onInput:U=>t.handleInput("stop",c)},null,40,Go),[[L,o.address]])]),((re=(z=t.stopSuggestions)==null?void 0:z[c])==null?void 0:re.length)>0?(n(),r("div",Jo,[(n(!0),r(S,null,M((X=t.stopSuggestions)==null?void 0:X[c],U=>(n(),r("div",{key:U.placeId,class:"autocomplete-item",onClick:de=>t.selectSuggestion(U,"stop",c)},d(U.formattedAddress),9,Wo))),128))])):v("",!0)]),e("i",{class:"bx bx-trash text-danger fs-22 btn",onClick:U=>t.removeStopover(c)},null,8,Xo)]),(n(!0),r(S,null,M((G=t.errors.stop)==null?void 0:G[c],(U,de)=>(n(),r("span",{key:de,class:"text-danger"},d(U),1))),128))])])}),128)):v("",!0)]),e("div",Ko,[t.showAiportTerminal?(n(),r("div",Yo,[e("div",Qo,[e("label",Zo,d(i.$t("aiport_terminal_info")),1),x(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[15]||(s[15]=o=>t.form.terminal=o),placeholder:"$t('enter_terminal_info')",id:"terminal"},null,512),[[L,t.form.terminal]])])])):v("",!0)]),e("div",$o,[t.showTrainStationEnterance?(n(),r("div",es,[e("div",ts,[e("label",os,d(i.$t("station_enterance_info")),1),x(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[16]||(s[16]=o=>t.form.enterance=o),placeholder:"$t('enter_enterance_info')",id:"enterance"},null,512),[[L,t.form.enterance]])])])):v("",!0)]),e("div",ss,[t.form.ride_type!=="rental"?(n(),r("div",ls,[e("div",as,[e("label",is,d(i.$t("drop_location")),1),e("div",ns,[e("div",rs,[x(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[17]||(s[17]=o=>t.form.drop_address=o),placeholder:i.$t("enter_drop"),id:"drop",autocomplete:"off",onInput:s[18]||(s[18]=o=>t.handleInput("drop"))},null,40,ds),[[L,t.form.drop_address]])]),t.dropSuggestions.length>0?(n(),r("div",cs,[(n(!0),r(S,null,M(t.dropSuggestions,o=>(n(),r("div",{key:o.placeId,class:"autocomplete-item",onClick:c=>t.selectSuggestion(o,"drop")},d(o.formattedAddress),9,_s))),128))])):v("",!0)]),(n(!0),r(S,null,M(t.errors.drop_address,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128)),t.errors.map?(n(),r("div",us,[e("div",ps,[(n(!0),r(S,null,M(t.errors.map,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])])):v("",!0)])])):v("",!0)]),e("div",ms,[e("div",fs,[e("button",{type:"button",onClick:s[19]||(s[19]=o=>t.bookValidate("location",!0)),class:"btn btn-primary"},d(i.$t("confirm")),1)])])],2)]),t.vehicleTypes.length>0||t.rentalVehicleTypes.length>0?(n(),r("div",hs,[e("h2",{class:"card-title accordion-header",id:"vehicle-one",onClick:s[20]||(s[20]=o=>t.bookValidate("vehicle"))},[e("button",{class:E({"accordion-button":!0,collapsed:t.showInfo!="vehicle"}),type:"button","data-bs-toggle":"collapse","data-bs-target":"#select-vehicle","aria-expanded":"false","aria-controls":"select-vehicle"},[e("h4",vs,d(i.$t("select_vehicle")),1),t.errors.vehicle_type?(n(),r("span",gs,"*")):v("",!0),t.form.vehicle_type&&t.showInfo!="vehicle"?(n(),r("span",bs,d(t.form.vehicleTypeName+" - "+t.form.requested_eta_amount),1)):v("",!0)],2)]),e("div",{id:"select-vehicle",class:E({"accordion-collapse":!0,collapse:!0,show:t.showInfo=="vehicle"}),"aria-labelledby":"select-vehicle","data-bs-parent":"#accordionform"},[e("div",ys,[t.vehicleTypes.length>0?(n(),r("h5",ks,d(i.$t("select_vehicle")),1)):v("",!0),t.vehicleTypes.length>0?(n(),r("div",ws,[e("div",Ms,[e("div",Ss,[(n(!0),r(S,null,M(t.vehicleTypes,(o,c)=>(n(),r("div",{key:c,class:"select-checkbox-btn text-center"},[e("label",{for:"vehicle_"+o.zone_type_id,class:"select-checkbox-btn-wrapper"},[x(e("input",{id:"vehicle_"+o.zone_type_id,name:"types",type:"radio",value:o.zone_type_id,"onUpdate:modelValue":s[21]||(s[21]=z=>t.form.vehicle_type=z),class:"select-checkbox-btn-input"},null,8,Is),[[$,t.form.vehicle_type]]),e("span",Cs,[e("a",Vs,[e("div",Ps,[s[44]||(s[44]=e("i",{class:"bx bx-time-five mx-1"},null,-1)),F(d(o.driver_time||"--"),1)]),e("div",qs,[e("img",{alt:"",class:"rounded-circle img-fluid",src:o.vehicle_icon},null,8,Rs)]),e("div",Ts,d(o.currency)+" "+d(o.total),1),e("div",Bs,d(o.name),1)])])],8,xs)]))),128))])])])):v("",!0)]),e("div",Us,[t.rentalVehicleTypes.length>0?(n(),r("h4",As,d(i.$t("select_vehicle")),1)):v("",!0),t.rentalVehicleTypes.length>0?(n(),r("div",Os,[e("div",Es,[e("div",Ns,[(n(!0),r(S,null,M(t.rentalVehicleTypes,(o,c)=>(n(),r("div",{key:c,class:"select-checkbox-btn text-center"},[e("label",{for:"vehicle_"+o.zone_type_id,class:"select-checkbox-btn-wrapper"},[x(e("input",{id:"vehicle_"+o.zone_type_id,name:"types",type:"radio",value:o.zone_type_id,"onUpdate:modelValue":s[22]||(s[22]=z=>t.form.vehicle_type=z),class:"select-checkbox-btn-input"},null,8,Fs),[[$,t.form.vehicle_type]]),e("span",Ls,[e("a",Ds,[e("div",Hs,[s[45]||(s[45]=e("i",{class:"bx bx-time-five mx-1"},null,-1)),F(d(o.driver_time||"--"),1)]),e("div",zs,[e("img",{alt:"",class:"rounded-circle img-fluid",src:o.icon},null,8,Gs)]),e("div",Js,d(o.fare_amount),1),e("div",Ws,d(o.name),1)])])],8,js)]))),128))])])])):v("",!0),e("div",Xs,[e("div",Ks,[e("button",{type:"button",onClick:s[23]||(s[23]=o=>t.bookValidate("vehicle")),class:"btn btn-primary"},d(i.$t("confirm")),1)])])])],2)])):v("",!0),t.form.transport_type=="delivery"||t.form.is_later||t.form.is_rental||(V=t.preferences)!=null&&V.length?(n(),r("div",Ys,[e("h2",{class:"card-title accordion-header",id:"miscellaneous-one",onClick:s[24]||(s[24]=o=>t.bookValidate("miscellaneous"))},[e("button",{class:E({"accordion-button":!0,collapsed:t.showInfo!="miscellaneous"}),type:"button","data-bs-toggle":"collapse","data-bs-target":"#select-miscellaneous","aria-expanded":t.showInfo=="miscellaneous","aria-controls":"select-miscellaneous"},[e("h4",Zs,[F(d(i.$t("miscellaneous")),1),t.errors.miscellaneous?(n(),r("span",$s,"*")):v("",!0)])],10,Qs)]),e("div",{id:"select-miscellaneous",class:E({"accordion-collapse":!0,collapse:!0,show:t.form.vehicle_type&&t.showInfo=="miscellaneous"}),"aria-labelledby":"select-miscellaneous","data-bs-parent":"#accordionform"},[e("div",el,[t.form.transport_type=="delivery"?(n(),r("h4",tl,d(i.$t("poc_info")),1)):v("",!0),t.form.transport_type=="delivery"?(n(),r("div",ol,[e("span",sl,[e("div",ll,[x(e("input",{class:"form-check-input",type:"checkbox",id:"poc","onUpdate:modelValue":s[25]||(s[25]=o=>D.isPocSame=o)},null,512),[[nt,D.isPocSame]]),e("label",al,d(i.$t("check_if_poc_info_as_same_as_personal_info")),1)])])])):v("",!0)]),e("div",il,[t.form.transport_type=="delivery"?(n(),r("div",nl,[e("div",rl,[e("label",dl,d(i.$t("drop_poc_name")),1),x(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[26]||(s[26]=o=>t.form.drop_poc_name=o),placeholder:i.$t("enter_poc_name"),id:"poc_name",disabled:D.isPocSame},null,8,cl),[[L,t.form.drop_poc_name]]),(n(!0),r(S,null,M(t.errors.drop_poc_name,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])])):v("",!0),t.form.transport_type=="delivery"?(n(),r("div",_l,[e("div",ul,[e("label",pl,d(i.$t("drop_poc_mobile")),1),x(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[27]||(s[27]=o=>t.form.drop_poc_mobile=o),placeholder:i.$t("enter_poc_mobile"),id:"poc_mobile",disabled:D.isPocSame},null,8,ml),[[L,t.form.drop_poc_mobile]]),(n(!0),r(S,null,M(t.errors.drop_poc_mobile,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])])):v("",!0)]),e("div",fl,[t.form.transport_type=="delivery"?(n(),r("h4",hl,d(i.$t("select_goods")),1)):v("",!0),t.form.transport_type=="delivery"?(n(),r("div",vl,[e("div",gl,[e("label",bl,d(i.$t("goods_type")),1),x(e("select",{id:"goods_type",class:"form-select","onUpdate:modelValue":s[28]||(s[28]=o=>t.form.goods_type_id=o)},[e("option",yl,d(i.$t("choose_type")),1),(n(!0),r(S,null,M(T.goodsTypes,o=>(n(),r("option",{key:o.id,value:o.id},d(o.goods_type_name),9,kl))),128))],512),[[pe,t.form.goods_type_id]]),(n(!0),r(S,null,M(t.errors.goods_type_id,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])])):v("",!0),t.form.transport_type=="delivery"?(n(),r("div",wl,[e("div",Ml,[e("label",Sl,d(i.$t("goods_quantity")),1),x(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[29]||(s[29]=o=>t.form.goods_type_quantity=o),placeholder:i.$t("enter_quantity"),id:"goods_type_quantity"},null,8,xl),[[L,t.form.goods_type_quantity]]),(n(!0),r(S,null,M(t.errors.goods_type_quantity,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])])):v("",!0)]),e("div",Il,[t.form.is_rental==1?(n(),r("h4",Cl,d(i.$t("select_pack")),1)):v("",!0),t.form.is_rental==1?(n(),r("div",Vl,[e("div",Pl,[e("label",ql,d(i.$t("rental_package_id")),1),x(e("select",{id:"rental_package_id",class:"form-select","onUpdate:modelValue":s[30]||(s[30]=o=>t.form.rental_package_id=o)},[e("option",Rl,d(i.$t("choose_type")),1),(n(!0),r(S,null,M(t.packageTypes,o=>(n(),r("option",{key:o.id,value:o.id},d(o.package_name),9,Tl))),128))],512),[[pe,t.form.rental_package_id]]),(n(!0),r(S,null,M(t.errors.rental_package_id,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])])):v("",!0)]),e("div",Bl,[t.form.is_later==1?(n(),r("div",Ul,[e("div",Al,[e("label",Ol,d(i.$t("date")),1),P(ne,{placeholder:i.$t("select_date"),modelValue:t.form.trip_start_time,"onUpdate:modelValue":s[31]||(s[31]=o=>t.form.trip_start_time=o),config:D.dateTimeConfig,class:"form-control flatpickr-input",id:"dispatch-datepicker"},null,8,["placeholder","modelValue","config"]),(n(!0),r(S,null,M(t.errors.trip_start_time,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])])):v("",!0)]),e("div",El,[t.form.is_out_station==1?(n(),r("div",Nl,[e("h4",jl,d(i.$t("outstation")),1),e("div",null,[e("div",Fl,[x(e("input",{class:"form-check-input",type:"radio",name:"is_round_trip",id:"oneway",value:0,"onUpdate:modelValue":s[32]||(s[32]=o=>t.form.is_round_trip=o)},null,512),[[$,t.form.is_round_trip]]),e("label",Ll,d(i.$t("one_way_outstation_trip")),1)]),e("div",Dl,[x(e("input",{class:"form-check-input",type:"radio",name:"is_round_trip",id:"roundtrip",value:1,"onUpdate:modelValue":s[33]||(s[33]=o=>t.form.is_round_trip=o)},null,512),[[$,t.form.is_round_trip]]),e("label",Hl,d(i.$t("round_trip_outstation_trip")),1)])])])):v("",!0)]),e("div",zl,[t.form.is_round_trip==1&&t.form.is_out_station==1?(n(),r("div",Gl,[e("div",Jl,[e("label",Wl,d(i.$t("return_time")),1),P(ne,{placeholder:i.$t("return_time"),modelValue:t.form.return_time,"onUpdate:modelValue":s[34]||(s[34]=o=>t.form.return_time=o),config:I.dateTimeConfigReturnTime,class:"form-control flatpickr-input",id:"dispatch-datepicker"},null,8,["placeholder","modelValue","config"])]),(n(!0),r(S,null,M(t.errors.return_time,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])):v("",!0)]),(B=t.preferences)!=null&&B.length?(n(),r("div",Xl,[e("div",Kl,[e("div",Yl,[e("label",Ql,d(i.$t("preferences_for_user ")),1),e("div",Zl,[e("div",$l,[(n(!0),r(S,null,M(t.form.preferences,o=>(n(),r("div",ea,[e("a",{href:"javascript: void(0);",class:"d-inline-block","data-bs-toggle":"tooltip","data-bs-placement":"top",title:t.preferenceName(o),"data-bs-original-title":t.preferenceName(o)},[e("img",{src:t.preferenceIconUrl(o),alt:t.preferenceName(o),class:"rounded-circle avatar-xs"},null,8,oa)],8,ta)]))),256))])])])]),e("div",sa,[e("div",la,[e("label",aa,d(i.$t("preferences")),1),P(_,{id:"preferences",mode:"tags",modelValue:t.form.preferences,"onUpdate:modelValue":s[35]||(s[35]=o=>t.form.preferences=o),"close-on-select":!1,searchable:!0,"create-option":!1,options:t.preferences.map(o=>({value:o.preference_id,label:o.name})),placeholder:i.$t("select_preferences")},null,8,["modelValue","options","placeholder"]),(n(!0),r(S,null,M(t.errors.goods_type_quantity,(o,c)=>(n(),r("span",{key:c,class:"text-danger"},d(o),1))),128))])])])):v("",!0),e("div",ia,[e("div",na,[e("button",{type:"button",onClick:s[36]||(s[36]=o=>t.bookValidate("miscellaneous")),class:"btn btn-primary"},d(i.$t("confirm")),1)])])],2)])):v("",!0),t.form.vehicle_type?(n(),r("div",ra,[e("h2",{class:"card-title accordion-header",id:"preference-one",onClick:s[37]||(s[37]=o=>t.bookValidate(" booking"))},[e("button",{class:E({"accordion-button":!0,collapsed:t.showInfo!="booking"}),type:"button","data-bs-toggle":"collapse","data-bs-target":"#preference-info","aria-expanded":"false","aria-controls":"preference-info"},[e("h4",da,d(i.$t("booking")),1)],2)]),e("div",{id:"preference-info",class:E({"accordion-collapse":!0,collapse:!0,show:t.showInfo=="booking"}),"aria-labelledby":"preference-info","data-bs-parent":"#accordionform"},[e("div",ca,[e("div",_a,[e("h4",ua,d(i.$t("assign")),1),e("div",null,[e("div",pa,[x(e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",checked:t.form.assign_method==1,id:"WithoutinlineRadio1",value:1,"onUpdate:modelValue":s[38]||(s[38]=o=>t.form.assign_method=o)},null,8,ma),[[$,t.form.assign_method]]),e("label",fa,d(i.$t("manual_assign")),1)]),e("div",ha,[x(e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"WithoutinlineRadio2",value:"0","onUpdate:modelValue":s[39]||(s[39]=o=>t.form.assign_method=o),checked:t.form.assign_method==0},null,8,va),[[$,t.form.assign_method]]),e("label",ga,d(i.$t("automatic_assign")),1)])])]),e("div",ba,[e("div",ya,[e("button",{type:"submit",disabled:!t.enableBooking,onClick:s[40]||(s[40]=(...o)=>t.makeBooking&&t.makeBooking(...o)),class:"btn btn-primary"},d(i.$t("make_booking")),9,ka)])])])],2)])):v("",!0)])],512),e("div",wa,[e("div",Ma,[e("div",Sa,[P(me,{baseUrl:T.baseUrl,default_location:T.default_location,pick_location:t.pickupMarker,drop_location:t.dropMarker,nearbyDrivers:t.driverMarkers,stops:t.stopMarkers,draggable:!0,polyline:t.form.poly_line,map_key:T.map_key,libraries:["marker","geometry","geocoding"],onUpdatePickupAddress:t.handlePickupAddress},{default:H(()=>[F(d(i.$t("map_loading")),1)]),_:1},8,["baseUrl","default_location","pick_location","drop_location","nearbyDrivers","stops","polyline","map_key","onUpdatePickupAddress"])])])])])]}),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const Ea=We(pt,[["render",xa],["__scopeId","data-v-dff5d41a"]]);export{Ea as default};
