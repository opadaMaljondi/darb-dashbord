import{_ as q,B as G,Z as J,D as K,r as g,T as W,S as Y,g as r,U as Z,i as m,y as H,w as n,N as j,a as U,W as z,l,n as e,J as u,t as P,K as I,k as h,L as O,F as A,z as N,C as B,q as Q,p as R}from"./vendor-54d6cb1e.js";import{L as X}from"./main-b839be26.js";import{P as $}from"./page-header-ff719701.js";import{P as ee}from"./Pagination-b5e3d5c9.js";import{s as te}from"./searchbar-3bdb3315.js";import{l as se}from"./footer-7e4f68d9.js";import"./app-cb082573.js";const ae={components:{Layout:X,Link:G,PageHeader:$,Head:J,searchbar:te,Pagination:ee},props:{successMessage:String,alertMessage:String},setup(o){const{t}=K(),v=g(""),s=W({limit:10}),w=g([]),y=g({}),b=g(!1),f=g(!1),_=g({}),C=g(o.successMessage||""),d=g(o.alertMessage||""),S=()=>{C.value="",d.value=""},k=()=>{f.value=!0},M=()=>{s.reset(),p(),f.value=!1},L=()=>{b.value=!1},x=async c=>{v.value=c,p()},V=async c=>{j.get(`/country/${c.id}`)},D=async c=>{try{const i=await U.post(`/country/toggle_status/${c.id}`);c.active=i.data.country.active,z.fire(t("success"),t("country_status_updated_successfully"),"success")}catch(i){i.response&&i.response.status==403&&(d.value=i.response.data.alertMessage,setTimeout(()=>{d.value=""},5e3)),console.error(t("error_updating_status"),i),z.fire(t("error"),t("failed_to_update_the_status"),"error")}},p=async(c=1)=>{try{const i=s.data();i.search=v.value,i.page=c;const T=await U.get("/country/list",{params:i});w.value=T.data.items,y.value=T.data.paginator,f.value=!1,F(y.value.total)}catch(i){console.error("Error fetching items:",i)}},F=()=>{_.value=[10,25,50,100,200,500]};return{items:w,modalShow:b,successMessage:C,alertMessage:d,filterItem:k,closeModal:L,dismissMessage:S,searchTerm:v,fetchSearch:x,paginator:y,editData:V,modalFilter:f,clearFilter:M,toggleModel:D,fetchItems:p,filter:s,paginatorOption:_,changeEntriesPerPage:()=>{p()},handlePageChanged:async c=>{localStorage.setItem("country/list",c),p(c)}}},computed:{...se,...Y(["permissions"])},mounted(){this.fetchItems();const o=localStorage.getItem("country/list");o?this.handlePageChanged(Number(o)):this.handlePageChanged(1)}},oe={class:"d-flex align-items-center mt-3"},le={class:"me-2 text-muted"},ne=["value"],re={class:"ms-2 text-muted"},ie={class:"d-flex align-items-center gap-2"},ce={class:"table table-bordered align-middle table-nowrap mb-0"},de={class:"table-light"},me={scope:"col"},ue={scope:"col"},ge={key:0,scope:"col"},pe={scope:"col"},fe=["src"],_e={key:0},he=["onClick","id","checked"],ve={class:"d-flex"},ye={class:"input-group"};function be(o,t,v,s,w,y){const b=r("Head"),f=r("PageHeader"),_=r("BCol"),C=r("searchbar"),d=r("BButton"),S=r("Link"),k=r("BRow"),M=r("BCardHeader"),L=r("BCardBody"),x=r("BCard"),V=r("BModal"),D=r("Pagination"),p=r("Layout"),F=Z("b-tooltip");return m(),H(p,null,{default:n(()=>[l(b,{title:"items"}),l(f,{title:"countries",pageTitle:"Masters"}),l(k,null,{default:n(()=>[l(_,{lg:"12"},{default:n(()=>[l(x,{"no-body":"",id:"tasksList"},{default:n(()=>[l(M,{class:"border-0"},{default:n(()=>[l(k,{class:"g-2"},{default:n(()=>[l(_,{md:"3"},{default:n(()=>[e("div",oe,[e("label",le,u(o.$t("show")),1),P(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.filter.limit=a),onChange:t[1]||(t[1]=(...a)=>s.changeEntriesPerPage&&s.changeEntriesPerPage(...a)),class:"form-select form-select-sm w-auto"},[(m(!0),h(A,null,O(s.paginatorOption,a=>(m(),h("option",{key:a,value:a},u(a),9,ne))),128))],544),[[I,s.filter.limit]]),e("label",re,u(o.$t("entries")),1)])]),_:1}),l(_,{md:"auto",class:"ms-auto"},{default:n(()=>[e("div",ie,[l(C,{onSearch:s.fetchSearch},null,8,["onSearch"]),o.permissions.includes("add-country")?(m(),H(S,{key:0,href:"/country/create"},{default:n(()=>[l(d,{variant:"primary",class:"float-end"},{default:n(()=>[t[5]||(t[5]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),N(u(o.$t("add_country")),1)]),_:1})]),_:1})):B("",!0)])]),_:1})]),_:1})]),_:1}),l(L,{class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>[e("table",ce,[e("thead",de,[e("tr",null,[e("th",me,u(o.$t("country_name")),1),e("th",ue,u(o.$t("icon")),1),o.permissions.includes("toggle_service_Location")?(m(),h("th",ge,u(o.$t("status")),1)):B("",!0),e("th",pe,u(o.$t("action")),1)])]),e("tbody",null,[(m(!0),h(A,null,O(s.items,a=>(m(),h("tr",{key:a.id},[e("td",null,u(a.name),1),e("td",null,[e("img",{src:a.flag,alt:"",class:"avatar-xs rounded-circle me-2"},null,8,fe)]),o.permissions.includes("toggle_service_Location")?(m(),h("td",_e,[e("div",{class:Q({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":a.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:R(E=>s.toggleModel(a),["prevent"]),id:"status_"+a.id,checked:a.active},null,8,he)],2)])):B("",!0),e("td",null,[e("div",ve,[o.permissions.includes("edit-country")?P((m(),H(d,{key:0,onClick:R(E=>s.editData(a),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:o.$t("edit")},{default:n(()=>[...t[6]||(t[6]=[e("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])]),_:1},8,["onClick","title"])),[[F,void 0,void 0,{hover:!0}]]):B("",!0)])])]))),128))])])]),_:1})]),_:1})]),_:1})]),_:1}),l(V,{modelValue:s.modalFilter,"onUpdate:modelValue":t[4]||(t[4]=a=>s.modalFilter=a),"hide-footer":"","dialog-class":"modal-dialog-right",title:"Filter",class:"v-modal-custom",size:"sm"},{default:n(()=>[e("form",null,[e("div",ye,[P(e("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":t[2]||(t[2]=a=>s.filter.all=a)},[...t[7]||(t[7]=[e("option",{selected:""},"Select Status",-1),e("option",{value:"1"},"Yes",-1),e("option",{value:"0"},"No",-1)])],512),[[I,s.filter.all]]),P(e("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":t[3]||(t[3]=a=>s.filter.locked=a)},[...t[8]||(t[8]=[e("option",{selected:""},"Select Status",-1),e("option",{value:"0"},"Inactive",-1),e("option",{value:"1"},"Active",-1)])],512),[[I,s.filter.locked]])]),l(d,{variant:"primary",class:"float-end",onClick:s.fetchItems},{default:n(()=>[...t[9]||(t[9]=[N(" Apply",-1)])]),_:1},8,["onClick"]),l(d,{variant:"outline-primary",class:"float-end mx-2",onClick:s.clearFilter},{default:n(()=>[...t[10]||(t[10]=[N("Clear",-1)])]),_:1},8,["onClick"])])]),_:1},8,["modelValue"]),l(D,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Le=q(ae,[["render",be]]);export{Le as default};
