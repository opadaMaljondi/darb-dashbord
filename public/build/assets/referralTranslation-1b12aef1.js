import{_ as z,Z as G,O as J,an as K,am as O,D as W,r as h,G as E,T as Z,o as N,a as x,g as m,i as d,y as P,w as n,W as Q,N as X,l,n as e,J as u,k as c,L as C,q as Y,F as B,z as H,C as L,p as $}from"./vendor-54d6cb1e.js";import{L as ee}from"./main-b839be26.js";import{P as re}from"./page-header-ff719701.js";import{P as se}from"./Pagination-b5e3d5c9.js";import{u as te}from"./footer-7e4f68d9.js";import{F as oe}from"./FormValidation-cabc17c8.js";import"./app-cb082573.js";const ae={components:{Layout:ee,PageHeader:re,Head:G,Pagination:se,Multiselect:J,FormValidation:oe,ckeditor:K.component},data(){return{editor:O,editorData:""}},props:{activeTab:String,languages:Array,successMessage:String,alertMessage:String,validate:Function,referrals:Array,app_for:String},setup(i){var q;const{t:o}=W(),{languages:g,fetchData:s}=te(),k=h("English"),F=E(()=>i.referrals.filter(t=>t.label_referral==="user")),S=E(()=>i.referrals.filter(t=>t.label_referral==="driver")),v=Z({referral_description:((q=i.referrals)==null?void 0:q.reduce((t,_)=>{let f=_.referral_description;return typeof f=="string"?f={en:f}:(!f||typeof f!="object")&&(f={}),t[_.referral_type]=f,t},{}))||{}}),M={description:{required:!0}},w=h(null),T=h({}),b=h(i.successMessage||""),p=h(i.alertMessage||""),R=()=>{b.value="",p.value=""},V=async()=>{if(i.app_for=="demo"){Q.fire(o("error"),o("you_are_not_authorised"),"error");return}try{await x.post("/referral-translation/update",v.data()),b.value=o("description_updated_successfully"),p.value="",setTimeout(()=>{X.get("/referral-translation")},1500)}catch(t){p.value=o("update_failed"),b.value="",console.error(t)}},A=t=>{k.value=t},r=h({}),a=t=>{const _=t==null?void 0:t.match(/\{[^}]*\}/g);return _?_.join(" "):""};N(()=>{for(const t in v.referral_description){r.value[t]={};for(const _ in v.referral_description[t]){const f=v.referral_description[t][_]||"";r.value[t][_]=a(f)}}});const y=(t,_)=>{const f=v.referral_description[t][_];(!f||!f.trim())&&(v.referral_description[t][_]=r.value[t][_]||"")};N(async()=>{(!g.value||!g.value.length)&&await s(),U(),j()});const D=h([]),I=h([]),U=async()=>{try{const t=await x.get("/referral-translation/referral-condition");D.value=t.data.data,console.log("results.value",D.value)}catch(t){console.error(o("error_fetching_onboarding_screen"),t)}},j=async()=>{try{const t=await x.get("/referral-translation/driver-referral-condition");I.value=t.data.data,console.log("driverResults.value",I.value)}catch(t){console.error(o("error_fetching_onboarding_screen"),t)}};return{form:v,successMessage:b,alertMessage:p,handleSubmit:V,dismissMessage:R,validationRules:M,setActiveTab:A,activeTab:k,languages:g,validationRef:w,errors:T,userReferrals:F,driverReferrals:S,onTextInput:y,results:D,driverResults:I}}},le={class:"col-sm-12"},ne={class:"mb-3",style:{display:"grid","place-items":"center"}},ie={class:"referralScreen"},de={class:"overlap"},ce={class:"card banner-cards rounded-0",style:{"background-color":"#001CAD"}},_e=["innerHTML"],fe={class:"card cards",style:{"background-color":"white"}},ue=["innerHTML"],me={class:"col-sm-12"},ve={class:"mb-3",style:{display:"grid","place-items":"center"}},be={class:"referralScreen"},pe={class:"overlap"},he={class:"card banner-cards rounded-0",style:{"background-color":"#001CAD"}},ye=["innerHTML"],ge={class:"card cards",style:{"background-color":"white"}},ke=["innerHTML"],Me={class:"row"},we={class:"nav nav-tabs nav-tabs-custom nav-success nav-justified",role:"tablist"},Te={class:"nav-item",role:"presentation"},Ce=["onClick"],Be={class:"col-sm-6"},Re={class:"mt-3"},He={for:"user_referrals",class:"form-label"},Le={key:0,class:"tab-pane active show"},Se={class:"row"},Ve={class:"form-label text-muted"},Ae={class:"col-sm-6"},De={class:"mt-3"},Ie={for:"driver_referrals",class:"form-label"},xe={key:0,class:"tab-pane active show"},Fe={class:"row"},qe={class:"form-label text-muted"},Ee={class:"col-lg-12"},Ne={class:"text-end"},Pe={type:"submit",class:"btn btn-primary"},Ue={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},je={class:"alert-content"},ze={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Ge={class:"alert-content"};function Je(i,o,g,s,k,F){const S=m("Head"),v=m("PageHeader"),M=m("BCardHeader"),w=m("BCardBody"),T=m("BCard"),b=m("BCol"),p=m("BRow"),R=m("ckeditor"),V=m("FormValidation"),A=m("Layout");return d(),P(A,null,{default:n(()=>[l(S,{title:"Referral Translation"}),l(v,{title:i.$t("referral-translation"),pageTitle:i.$t("referral-translation"),pageLink:"/referral-translation"},null,8,["title","pageTitle"]),l(p,null,{default:n(()=>[l(b,{lg:"6"},{default:n(()=>[l(T,null,{default:n(()=>[l(M,{class:"border-0"},{default:n(()=>[e("h5",null,u(i.$t("mobile_view"))+" - "+u(i.$t("user_referrals")),1)]),_:1}),l(w,{class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>{var r,a;return[e("div",le,[e("div",ne,[e("div",ie,[e("div",de,[e("div",ce,[e("div",{class:"fs-15 text-white",innerHTML:(r=s.results.user_banner)==null?void 0:r.data.description},null,8,_e)]),e("div",fe,[e("div",{class:"fs-10 text-black",innerHTML:(a=s.results.referral_content)==null?void 0:a.data.description},null,8,ue)])])])])])]}),_:1})]),_:1})]),_:1}),l(b,{lg:"6"},{default:n(()=>[l(T,{style:{}},{default:n(()=>[l(M,{class:"border-0"},{default:n(()=>[e("h5",null,u(i.$t("mobile_view"))+" - "+u(i.$t("driver_referrals")),1)]),_:1}),l(w,{class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>{var r,a;return[e("div",me,[e("div",ve,[e("div",be,[e("div",pe,[e("div",he,[e("div",{class:"fs-15 text-white",innerHTML:(r=s.driverResults.driver_banner)==null?void 0:r.data.description},null,8,ye)]),e("div",ge,[e("div",{class:"fs-10 text-black",innerHTML:(a=s.driverResults.referral_content)==null?void 0:a.data.description},null,8,ke)])])])])])]}),_:1})]),_:1})]),_:1})]),_:1}),l(p,null,{default:n(()=>[l(b,{lg:"12"},{default:n(()=>[l(T,{"no-body":"",id:"tasksList"},{default:n(()=>[l(M,{class:"border-0"}),l(w,{class:"border border-dashed border-end-0 border-start-0"},{default:n(()=>[e("form",{onSubmit:o[0]||(o[0]=$((...r)=>s.handleSubmit&&s.handleSubmit(...r),["prevent"]))},[l(V,{form:s.form,rules:s.validationRules,ref:"validationRef"},{default:n(()=>[e("div",Me,[e("ul",we,[(d(!0),c(B,null,C(s.languages,r=>(d(),P(p,{key:r.code},{default:n(()=>[l(b,{lg:"12"},{default:n(()=>[e("li",Te,[e("a",{class:Y(["nav-link",{active:s.activeTab===r.label}]),onClick:a=>s.setActiveTab(r.label),role:"tab","aria-selected":"true"},u(r.label),11,Ce)])]),_:2},1024)]),_:2},1024))),128))]),e("div",Be,[e("div",Re,[e("label",He,[H(u(i.$t("user_referrals"))+" ",1),o[3]||(o[3]=e("span",{class:"text-danger"},"*",-1))])])]),(d(!0),c(B,null,C(s.languages,r=>(d(),c("div",{key:r.code,class:"tab-content"},[s.activeTab===r.label?(d(),c("div",Le,[e("div",null,[e("div",Se,[(d(!0),c(B,null,C(s.userReferrals,a=>(d(),c("div",{key:a.referral_type+"-"+r.code,class:"mb-3 col-sm-6"},[e("label",Ve,u(a.referral_type.replaceAll("_"," ")),1),l(R,{disabled:g.app_for==="demo",editor:k.editor,onInput:y=>s.onTextInput(a.referral_type,r.code),class:"form-control",rows:"3",placeholder:`Enter ${r.label} description`,modelValue:s.form.referral_description[a.referral_type][r.code],"onUpdate:modelValue":y=>s.form.referral_description[a.referral_type][r.code]=y,id:`referral_description-${r.code}`,required:r.code==="en"},null,8,["disabled","editor","onInput","placeholder","modelValue","onUpdate:modelValue","id","required"])]))),128))])])])):L("",!0)]))),128)),e("div",Ae,[e("div",De,[e("label",Ie,[H(u(i.$t("driver_referrals"))+" ",1),o[4]||(o[4]=e("span",{class:"text-danger"},"*",-1))])])]),(d(!0),c(B,null,C(s.languages,r=>(d(),c("div",{key:r.code,class:"tab-content"},[s.activeTab===r.label?(d(),c("div",xe,[e("div",Fe,[(d(!0),c(B,null,C(s.driverReferrals,a=>(d(),c("div",{key:a.referral_type+"-"+r.code,class:"mb-3 col-sm-6"},[e("label",qe,u(a.referral_type.replaceAll("_"," ")),1),l(R,{disabled:g.app_for==="demo",editor:k.editor,onInput:y=>s.onTextInput(a.referral_type,r.code),class:"form-control",rows:"3",placeholder:`Enter ${r.label} description`,modelValue:s.form.referral_description[a.referral_type][r.code],"onUpdate:modelValue":y=>s.form.referral_description[a.referral_type][r.code]=y,id:`referral_description-${r.code}`,required:r.code==="en"},null,8,["disabled","editor","onInput","placeholder","modelValue","onUpdate:modelValue","id","required"])]))),128))])])):L("",!0)]))),128)),e("div",Ee,[e("div",Ne,[e("button",Pe,u(i.$t("update")),1)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[s.successMessage?(d(),c("div",Ue,[e("div",je,[o[5]||(o[5]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),o[6]||(o[6]=e("strong",null,"Success",-1)),H(" - "+u(s.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:o[1]||(o[1]=(...r)=>s.dismissMessage&&s.dismissMessage(...r)),"aria-label":"Close Success Message"})])])):L("",!0),s.alertMessage?(d(),c("div",ze,[e("div",Ge,[o[7]||(o[7]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),o[8]||(o[8]=e("strong",null,"Alert",-1)),H(" - "+u(s.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:o[2]||(o[2]=(...r)=>s.dismissMessage&&s.dismissMessage(...r)),"aria-label":"Close Alert Message"})])])):L("",!0)])]),_:1})}const $e=z(ae,[["render",Je]]);export{$e as default};
