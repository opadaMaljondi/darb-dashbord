import{_ as Z,Z as G,D as Q,T as W,r as v,o as X,g as y,i as r,y as Y,w as k,a as K,N as $,l as b,n as e,J as t,t as c,M as p,z as d,K as L,k as a,L as f,F as u,C as g,p as ee}from"./vendor-54d6cb1e.js";import{L as oe}from"./main-b839be26.js";import{P as se}from"./page-header-ff719701.js";import{P as ie}from"./Pagination-b5e3d5c9.js";import{F as ne}from"./FormValidation-cabc17c8.js";import"./footer-7e4f68d9.js";import"./app-cb082573.js";const te={components:{Layout:oe,PageHeader:se,Head:G,Pagination:ie,FormValidation:ne},props:{successMessage:String,alertMessage:String,packageTypes:Array,zoneTypePrice:Object,zoneTypePackage:Object,zone_unit:Object},setup(i){var T,x,M,n,m,O,A,E;const{t:o}=Q(),l=W({zone_type_price_id:((T=i.zoneTypePrice)==null?void 0:T.id)||"",package_type_id:((x=i.zoneTypePackage)==null?void 0:x.package_type_id)||"",base_price:((M=i.zoneTypePackage)==null?void 0:M.base_price)||"",distance_price_per_km:((n=i.zoneTypePackage)==null?void 0:n.distance_price_per_km)||"",free_min:((m=i.zoneTypePackage)==null?void 0:m.free_min)||"",time_price_per_min:((O=i.zoneTypePackage)==null?void 0:O.time_price_per_min)||"",base_distance:((A=i.zoneTypePackage)==null?void 0:A.free_distance)||"",cancellation_fee:((E=i.zoneTypePackage)==null?void 0:E.cancellation_fee)||"",admin_commission_type:i.zoneTypePackage&&i.zoneTypePackage.admin_commission_type||"",admin_commission:i.zoneTypePackage?i.zoneTypePackage.admin_commission??0:"",admin_commission_type_from_driver:i.zoneTypePackage&&i.zoneTypePackage.admin_commission_type_from_driver||"",admin_commission_from_driver:i.zoneTypePackage?i.zoneTypePackage.admin_commission_from_driver||0:"",admin_commission_type_from_owner:i.zoneTypePackage&&i.zoneTypePackage.admin_commission_type_from_owner||"",admin_commission_from_owner:i.zoneTypePackage?i.zoneTypePackage.admin_commission_from_owner||0:"",service_tax:i.zoneTypePackage?i.zoneTypePackage.service_tax||0:""}),s={package_type_id:{required:!0},base_price:{required:!0},distance_price_per_km:{required:!0},free_min:{required:!0},time_price_per_min:{required:!0},base_distance:{required:!0},cancellation_fee:{required:!0},admin_commission_type:{required:!0},admin_commission:{required:!0},admin_commission_type_from_driver:{required:!0},admin_commission_from_driver:{required:!0},admin_commission_type_from_owner:{required:!0},admin_commission_from_owner:{required:!0},service_tax:{required:!0}},D=v(null),P=v({}),C=v(i.successMessage||""),h=v(i.alertMessage||""),U=v(i.zone_unit),z=v(),H=async()=>{if(P.value=D.value.validate(l),!(Object.keys(P.value).length>0))try{let _;i.zoneTypePackage&&i.zoneTypePackage.id?_=await K.post(`/set-prices/packages/update/${i.zoneTypePackage.id}`,l):_=await K.post("/set-prices/packages/store",l),_.status===201?(C.value=o("package_price_created_successfully"),$.get(`/set-prices/packages/${i.zoneTypePrice.zone_type_id}`)):h.value=o("failed_to_create_package_price")}catch(_){_.response&&_.response.status===422?P.value=_.response.data.errors:(console.error(o("error_creating_package_price"),_),h.value=o("failed_to_create_package_price"))}},N=()=>{C.value="",h.value=""};X(()=>{U.value==1?z.value=o("kilo_meter"):U.value==2&&(z.value=o("miles"))});const q=v(!1),w=v(!0),S=v({}),R=()=>{let _=0,j=0,V=0,I=0,J=l.base_price,F=100+(l.service_tax??0),B=0;l.admin_commission>0&&(l.admin_commission_type==1?F+=l.admin_commission:B+=l.admin_commission),w.value?l.admin_commission_from_driver>0&&(l.admin_commission_type_from_driver==1?F+=l.admin_commission_from_driver:B+=l.admin_commission_from_driver):l.admin_commission_from_owner>0&&(l.admin_commission_type_from_owner==1?F+=l.admin_commission_from_owner:B+=l.admin_commission_from_owner),B&&(J-=B),_=J*100/F,l.admin_commission_type==1?j+=_*l.admin_commission/100:j+=l.admin_commission,w.value?l.admin_commission_from_driver>0&&(l.admin_commission_type_from_driver==1?V+=_*l.admin_commission_from_driver/100:V+=l.admin_commission_from_driver):l.admin_commission_from_owner>0&&(l.admin_commission_type_from_owner==1?V+=_*l.admin_commission_from_owner/100:V+=l.admin_commission_from_owner),I=_*l.service_tax/100,S.value={subtotal:_.toFixed(2),commission:j.toFixed(2),driver_commission:V.toFixed(2),forDriver:w.value,tax:I.toFixed(2)},q.value=!0};return{form:l,packageTypes:v(i.packageTypes||[]),successMessage:C,alertMessage:h,handleSubmit:H,dismissMessage:N,validationRules:s,validationRef:D,errors:P,unit:z,showCommission:q,calculatedPrice:S,calculateRentalPrice:R,forDriver:w}}},re={href:"",class:"text-success text-decoration-underline text-decoration-underline-success float-end heart","data-bs-toggle":"modal","data-bs-target":"#priceCalculation"},ae={class:"row"},le={class:"col-sm-6"},me={class:"mb-3"},de={for:"select_package_type",class:"form-label"},_e={disabled:"",value:""},ce=["value"],fe={class:"col-sm-6"},ue={class:"mb-3"},pe={for:"base_price",class:"form-label"},ve=["placeholder"],ye={class:"col-sm-6"},be={class:"mb-3"},ge={for:"base_distance",class:"form-label"},ke={key:0},he=["placeholder"],we={class:"col-sm-6"},Pe={class:"mb-3"},Ce={for:"distance_price_per_km",class:"form-label"},ze=["placeholder"],Te={class:"col-sm-6"},xe={class:"mb-3"},Me={for:"free_min",class:"form-label"},Ve=["placeholder"],Be={class:"col-sm-6"},Ue={class:"mb-3"},qe={for:"time_price_per_min",class:"form-label"},Se=["placeholder"],Re={class:"col-sm-6"},Fe={class:"mb-3"},Le={for:"admin_commission_type",class:"form-label"},De={disabled:"",value:""},He={value:"1"},Ne={value:"2"},je={class:"col-sm-6"},Oe={class:"mb-3"},Ae={for:"admin_commission",class:"form-label"},Ee=["placeholder","max"],Ie={class:"col-sm-6"},Je={class:"mb-3"},Ke={for:"admin_commission_type_from_driver",class:"form-label"},Ze={disabled:"",value:""},Ge={value:"1"},Qe={value:"2"},We={class:"col-sm-6"},Xe={class:"mb-3"},Ye={for:"admin_commission_from_driver",class:"form-label"},$e=["placeholder","max"],eo={class:"col-sm-6"},oo={class:"mb-3"},so={for:"admin_commission_type_from_owner",class:"form-label"},io={disabled:"",value:""},no={value:"1"},to={value:"2"},ro={class:"col-sm-6"},ao={class:"mb-3"},lo={for:"admin_commission_from_owner",class:"form-label"},mo=["placeholder","max"],_o={class:"col-sm-6"},co={class:"mb-3"},fo={for:"service_tax",class:"form-label"},uo=["placeholder"],po={class:"col-sm-6"},vo={class:"mb-3"},yo={for:"cancellation_fee",class:"form-label"},bo=["placeholder"],go={class:"col-12 text-end"},ko={type:"submit",class:"btn btn-success"},ho={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},wo={class:"alert-content"},Po={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Co={class:"alert-content"},zo={id:"priceCalculation",class:"modal fade",tabindex:"-1","aria-labelledby":"lowLabel","aria-hidden":"true",style:{display:"none"}},To={class:"modal-dialog"},xo={class:"modal-content"},Mo={class:"modal-header"},Vo={class:"modal-body"},Bo={class:"text-muted"},Uo={key:0},qo={class:"text-muted"},So={key:0},Ro={class:"text-muted"},Fo={key:0},Lo={class:"text-muted"},Do={key:0},Ho={class:"text-muted"},No={class:"form-check form-switch text-muted form-check-right"},jo=["checked"],Oo={class:"form-check-label",for:"toggle_for_driver"},Ao={class:"modal-footer"};function Eo(i,o,l,s,D,P){const C=y("Head"),h=y("PageHeader"),U=y("BCardHeader"),z=y("FormValidation"),H=y("BCardBody"),N=y("BCard"),q=y("BCol"),w=y("BRow"),S=y("Layout");return r(),Y(S,null,{default:k(()=>{var R,T,x,M;return[b(C,{title:"Set Prices"}),b(h,{title:l.zoneTypePackage?i.$t("edit"):i.$t("create"),pageTitle:i.$t("set_prices"),pageLink:"/set-prices"},null,8,["title","pageTitle"]),b(w,null,{default:k(()=>[b(q,{lg:"12"},{default:k(()=>[b(N,{"no-body":"",id:"tasksList"},{default:k(()=>[b(U,{class:"border-0"},{default:k(()=>[e("a",re,t(i.$t("how_it_works")),1)]),_:1}),b(H,{class:"border border-dashed border-end-0 border-start-0"},{default:k(()=>[e("form",{onSubmit:o[15]||(o[15]=ee((...n)=>s.handleSubmit&&s.handleSubmit(...n),["prevent"]))},[b(z,{form:s.form,rules:s.validationRules,ref:"validationRef"},{default:k(()=>[e("div",ae,[c(e("input",{type:"hidden",class:"form-control",id:"zone_type_price_id","onUpdate:modelValue":o[0]||(o[0]=n=>s.form.zone_type_price_id=n)},null,512),[[p,s.form.zone_type_price_id,void 0,{number:!0}]]),e("div",le,[e("div",me,[e("label",de,[d(t(i.$t("package_type"))+" ",1),o[23]||(o[23]=e("span",{class:"text-danger"},"*",-1))]),c(e("select",{id:"package_type",class:"form-select","onUpdate:modelValue":o[1]||(o[1]=n=>s.form.package_type_id=n)},[e("option",_e,t(i.$t("select_package_type")),1),(r(!0),a(u,null,f(s.packageTypes,n=>(r(),a("option",{key:n.id,value:n.id},t(n.name),9,ce))),128))],512),[[L,s.form.package_type_id]]),(r(!0),a(u,null,f(s.errors.package_type_id,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",fe,[e("div",ue,[e("label",pe,[d(t(i.$t("rental_base_price"))+" ",1),o[24]||(o[24]=e("span",{class:"text-danger"},"* ",-1))]),c(e("input",{type:"number",step:"any",class:"form-control",placeholder:i.$t("enter_rental_base_price"),id:"base_price","onUpdate:modelValue":o[2]||(o[2]=n=>s.form.base_price=n)},null,8,ve),[[p,s.form.base_price,void 0,{number:!0}]]),(r(!0),a(u,null,f(s.errors.base_price,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",ye,[e("div",be,[e("label",ge,[d(t(i.$t("free_distance"))+" ",1),o[25]||(o[25]=e("span",{class:"text-danger"},"*",-1)),s.unit?(r(),a("span",ke,"("+t(s.unit)+")",1)):g("",!0)]),c(e("input",{type:"number",step:"any",class:"form-control",placeholder:i.$t("enter_free_distance"),id:"base_distance","onUpdate:modelValue":o[3]||(o[3]=n=>s.form.base_distance=n)},null,8,he),[[p,s.form.base_distance,void 0,{number:!0}]]),(r(!0),a(u,null,f(s.errors.base_distance,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",we,[e("div",Pe,[e("label",Ce,[d(t(i.$t("distance_price"))+" ",1),o[26]||(o[26]=e("span",{class:"text-danger"},"*",-1))]),c(e("input",{type:"number",step:"any",class:"form-control",placeholder:i.$t("enter_price_per_distance"),id:"distance_price_per_km","onUpdate:modelValue":o[4]||(o[4]=n=>s.form.distance_price_per_km=n)},null,8,ze),[[p,s.form.distance_price_per_km,void 0,{number:!0}]]),(r(!0),a(u,null,f(s.errors.distance_price_per_km,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",Te,[e("div",xe,[e("label",Me,t(i.$t("free_time_in_minute")),1),c(e("input",{type:"number",step:"any",class:"form-control",placeholder:i.$t("enter_free_min"),id:"free_min","onUpdate:modelValue":o[5]||(o[5]=n=>s.form.free_min=n)},null,8,Ve),[[p,s.form.free_min,void 0,{number:!0}]]),(r(!0),a(u,null,f(s.errors.free_min,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",Be,[e("div",Ue,[e("label",qe,[d(t(i.$t("time_price"))+" ",1),o[27]||(o[27]=e("span",{class:"text-danger"},"*",-1))]),c(e("input",{type:"number",step:"any",class:"form-control",placeholder:i.$t("enter_time_price"),id:"time_price_per_min","onUpdate:modelValue":o[6]||(o[6]=n=>s.form.time_price_per_min=n)},null,8,Se),[[p,s.form.time_price_per_min,void 0,{number:!0}]]),(r(!0),a(u,null,f(s.errors.time_price_per_min,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",Re,[e("div",Fe,[e("label",Le,[d(t(i.$t("admin_commission_type_from_customer"))+" ",1),o[28]||(o[28]=e("span",{class:"text-danger"},"*",-1))]),c(e("select",{id:"admin_commission_type",class:"form-select","onUpdate:modelValue":o[7]||(o[7]=n=>s.form.admin_commission_type=n)},[e("option",De,t(i.$t("select_admin_commission_type_from_customer")),1),e("option",He,t(i.$t("percentage")),1),e("option",Ne,t(i.$t("fixed_amount")),1)],512),[[L,s.form.admin_commission_type]]),(r(!0),a(u,null,f(s.errors.admin_commission_type,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",je,[e("div",Oe,[e("label",Ae,[d(t(i.$t("admin_commission_from_customer"))+" ",1),o[29]||(o[29]=e("span",{class:"text-danger"},"*",-1))]),c(e("input",{type:"number",min:"0",step:"any",class:"form-control",placeholder:i.$t("enter_admin_commission_from_customer"),id:"admin_commission","onUpdate:modelValue":o[8]||(o[8]=n=>s.form.admin_commission=n),max:s.form.admin_commission_type=="1"?100:null},null,8,Ee),[[p,s.form.admin_commission,void 0,{number:!0}]]),(r(!0),a(u,null,f(s.errors.admin_commission,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",Ie,[e("div",Je,[e("label",Ke,[d(t(i.$t("admin_commission_type_from_driver"))+" ",1),o[30]||(o[30]=e("span",{class:"text-danger"},"*",-1))]),c(e("select",{id:"admin_commission_type_from_driver",class:"form-select","onUpdate:modelValue":o[9]||(o[9]=n=>s.form.admin_commission_type_from_driver=n)},[e("option",Ze,t(i.$t("select_admin_commission_type_from_driver")),1),e("option",Ge,t(i.$t("percentage")),1),e("option",Qe,t(i.$t("fixed_amount")),1)],512),[[L,s.form.admin_commission_type_from_driver]]),(r(!0),a(u,null,f(s.errors.admin_commission_type_from_driver,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",We,[e("div",Xe,[e("label",Ye,[d(t(i.$t("admin_commission_from_driver"))+" ",1),o[31]||(o[31]=e("span",{class:"text-danger"},"*",-1))]),c(e("input",{type:"number",min:"0",step:"any",class:"form-control",placeholder:i.$t("enter_admin_commission_from_driver"),id:"admin_commission_from_driver","onUpdate:modelValue":o[10]||(o[10]=n=>s.form.admin_commission_from_driver=n),max:s.form.admin_commission_type_from_driver=="1"?100:null},null,8,$e),[[p,s.form.admin_commission_from_driver,void 0,{number:!0}]]),(r(!0),a(u,null,f(s.errors.admin_commission_from_driver,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",eo,[e("div",oo,[e("label",so,[d(t(i.$t("admin_commission_type_from_owner"))+" ",1),o[32]||(o[32]=e("span",{class:"text-danger"},"*",-1))]),c(e("select",{id:"admin_commission_type_from_owner",class:"form-select","onUpdate:modelValue":o[11]||(o[11]=n=>s.form.admin_commission_type_from_owner=n)},[e("option",io,t(i.$t("select_admin_commission_type_from_owner")),1),e("option",no,t(i.$t("percentage")),1),e("option",to,t(i.$t("fixed_amount")),1)],512),[[L,s.form.admin_commission_type_from_owner]]),(r(!0),a(u,null,f(s.errors.admin_commission_type_from_owner,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",ro,[e("div",ao,[e("label",lo,[d(t(i.$t("admin_commission_from_owner"))+" ",1),o[33]||(o[33]=e("span",{class:"text-danger"},"*",-1))]),c(e("input",{type:"number",min:"0",step:"any",class:"form-control",placeholder:i.$t("enter_admin_commission_from_owner"),id:"admin_commission_from_owner","onUpdate:modelValue":o[12]||(o[12]=n=>s.form.admin_commission_from_owner=n),max:s.form.admin_commission_type_from_owner=="1"?100:null},null,8,mo),[[p,s.form.admin_commission_from_owner,void 0,{number:!0}]]),(r(!0),a(u,null,f(s.errors.admin_commission_from_owner,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",_o,[e("div",co,[e("label",fo,[d(t(i.$t("service_tax"))+" ",1),o[34]||(o[34]=e("span",{class:"text-danger"},"*",-1))]),c(e("input",{type:"number",min:"0",max:"100",class:"form-control",placeholder:i.$t("enter_service_tax"),id:"service_tax","onUpdate:modelValue":o[13]||(o[13]=n=>s.form.service_tax=n)},null,8,uo),[[p,s.form.service_tax,void 0,{number:!0}]]),(r(!0),a(u,null,f(s.errors.service_tax,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",po,[e("div",vo,[e("label",yo,[d(t(i.$t("cancellation_fee"))+" ",1),o[35]||(o[35]=e("span",{class:"text-danger"},"*",-1))]),c(e("input",{type:"number",class:"form-control",placeholder:i.$t("cancellation_fee"),id:"cancellation_fee","onUpdate:modelValue":o[14]||(o[14]=n=>s.form.cancellation_fee=n)},null,8,bo),[[p,s.form.cancellation_fee,void 0,{number:!0}]]),(r(!0),a(u,null,f(s.errors.cancellation_fee,(n,m)=>(r(),a("span",{key:m,class:"text-danger"},t(n),1))),128))])]),e("div",go,[e("button",ko,t(i.$t("save")),1)])])]),_:1},8,["form","rules"])],32),s.successMessage?(r(),a("div",ho,[e("div",wo,[o[36]||(o[36]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),o[37]||(o[37]=e("strong",null,"Success",-1)),d(" - "+t(s.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:o[16]||(o[16]=(...n)=>s.dismissMessage&&s.dismissMessage(...n)),"aria-label":"Close Success Message"})])])):g("",!0),s.alertMessage?(r(),a("div",Po,[e("div",Co,[o[38]||(o[38]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),o[39]||(o[39]=e("strong",null,"Alert",-1)),d(" - "+t(s.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:o[17]||(o[17]=(...n)=>s.dismissMessage&&s.dismissMessage(...n)),"aria-label":"Close Alert Message"})])])):g("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",zo,[e("div",To,[e("div",xo,[e("div",Mo,[o[40]||(o[40]=e("h5",{class:"modal-title",id:"myModalLabel"},"Rental Commission",-1)),e("button",{type:"button",onClick:o[18]||(o[18]=n=>s.showCommission=!1),class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),e("div",Vo,[o[47]||(o[47]=e("h5",{class:"fs-15"}," Rental Commission Calculation ",-1)),e("p",Bo,[o[41]||(o[41]=d(" Subtotal = ",-1)),o[42]||(o[42]=e("strong",null,"150",-1)),s.showCommission?(r(),a("span",Uo,[e("strong",null," = "+t(((R=s.calculatedPrice)==null?void 0:R.subtotal)??0),1)])):g("",!0)]),e("p",qo,[d(t(i.$t("service_tax"))+" = ",1),o[43]||(o[43]=e("strong",null,"10 % = $15",-1)),s.showCommission?(r(),a("span",So,[e("strong",null," = "+t(((T=s.calculatedPrice)==null?void 0:T.tax)??0),1)])):g("",!0)]),e("p",Ro,[d(t(s.calculatedPrice.forDriver?i.$t("driver_convenience_fee"):i.$t("owner_convenience_fee"))+" = ",1),o[44]||(o[44]=e("strong",null,"15 % = $22.5",-1)),s.showCommission?(r(),a("span",Fo,[e("strong",null," = "+t(((x=s.calculatedPrice)==null?void 0:x.driver_commission)??0),1)])):g("",!0)]),e("p",Lo,[d(t(i.$t("convenience_fee"))+" = ",1),o[45]||(o[45]=e("strong",null,"15 % = $22.5",-1)),s.showCommission?(r(),a("span",Do,[e("strong",null," = "+t(((M=s.calculatedPrice)==null?void 0:M.commission)??0),1)])):g("",!0)]),e("p",Ho,[d(t(i.$t("rental_base_price"))+" = ",1),o[46]||(o[46]=e("strong",null,"$210",-1)),e("strong",null," = "+t(s.form.base_price??0),1)]),e("div",No,[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:o[19]||(o[19]=n=>s.forDriver=!s.forDriver),id:"toggle_for_driver",checked:s.forDriver},null,8,jo),e("label",Oo,t(i.$t("toggle_for_driver")),1)])]),e("div",Ao,[e("button",{type:"button",onClick:o[20]||(o[20]=n=>s.showCommission=!1),class:"btn btn-light","data-bs-dismiss":"modal"},"Close"),s.showCommission?(r(),a("button",{key:0,type:"button",class:"btn btn-info",onClick:o[21]||(o[21]=n=>s.showCommission=!1)},"Hide")):g("",!0),e("button",{type:"button",class:"btn btn-info",onClick:o[22]||(o[22]=(...n)=>s.calculateRentalPrice&&s.calculateRentalPrice(...n))},"Calculate")])])])])]}),_:1})}const Xo=Z(te,[["render",Eo]]);export{Xo as default};
