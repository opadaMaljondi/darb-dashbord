import{_ as j,Z as G,O as J,P as K,B as U,D as Z,r as f,T as $,R as Q,a3 as X,a as E,S as ee,g as u,i,y as S,w as d,W as b,N as te,l as c,n as e,J as l,t as se,K as ae,k as _,L as R,F as V,z as p,C,q as oe,p as O}from"./vendor-8caf5d52.js";import{L as ne}from"./main-cc7bd0ce.js";import{P as le}from"./page-header-18309276.js";import{P as re}from"./Pagination-0518e4bd.js";import{s as ie}from"./search-769502e2.js";import{s as de}from"./searchbar-e42e22fa.js";import{l as ce}from"./footer-502c2797.js";import{_ as ue}from"./search-file-ab3e1046.js";import"./app-974c65a1.js";const me={data(){return{rightOffcanvas:!1}},components:{Layout:ne,PageHeader:le,Head:G,Pagination:re,Multiselect:J,flatPickr:K,Link:U,search:ie,searchbar:de},props:{successMessage:String,alertMessage:String,serviceLocations:{type:Object,required:!0}},setup(o){const{t}=Z(),v=f(""),s=$({all:"",locked:"",limit:10}),h=f([]),P=f({}),B=f(!1),y=f(!1),k=f(null),w=f({}),x=f(o.successMessage||""),M=f(o.alertMessage||""),T=()=>{x.value="",M.value=""},H=()=>{y.value=!0},A=()=>{s.reset(),m(),y.value=!1},N=()=>{B.value=!1},L=async n=>{try{await E.delete(`/driver-bank-info/delete/${n}`);const r=h.value.findIndex(g=>g.id===n);r!==-1&&h.value.splice(r,1),B.value=!1,b.fire(t("success"),t("bank_info_deleted_successfully"),"success")}catch{b.fire(t("error"),t("failed_to_delete_bank_info"),"error")}},a=async(n,r)=>{b.fire({title:t("are_you_sure"),text:t("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:t("yes"),cancelButtonText:t("cancel")}).then(async g=>{if(g.isConfirmed)try{await E.post("/driver-bank-info/update-status",{id:n,status:r});const D=h.value.findIndex(Y=>Y.id===n);D!==-1&&(h.value[D].active=r),b.fire(t("changed"),t("status_updated_successfully"),"success")}catch(D){console.error(t("error_updating_status"),D),b.fire(t("error"),t("failed_to_update_status"),"error")}})},q=async n=>{b.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async r=>{if(r.isConfirmed)try{await L(n)}catch(g){console.error(t("error_deleting_data"),g),b.fire(t("error"),t("failed_to_delete_the_data"),"error")}})};Q(v,X.debounce(function(n){m(v.value)},300));const m=async(n=1)=>{try{const r=s.data();r.search=v.value,r.page=n;const g=await E.get("/driver-bank-info/list",{params:r});h.value=g.data.results,P.value=g.data.paginator,W(P.value.total),y.value=!1}catch(r){console.error(t("error_fetching_bank_infos"),r)}},F=async n=>{m(n)},I=async n=>{te.get(`/driver-bank-info/edit/${n.id}`)},z=async n=>{v.value=n,m()},W=()=>{w.value=[10,25,50,100,200,500]};return{results:h,modalShow:B,deleteItemId:k,successMessage:x,alertMessage:M,filterData:H,deleteModal:q,closeModal:N,deleteData:L,dismissMessage:T,searchTerm:v,paginator:P,modalFilter:y,clearFilter:A,fetchDatas:m,filter:s,handlePageChanged:F,editData:I,toggleActiveStatus:a,fetchSearch:z,paginatorOption:w,changeEntriesPerPage:()=>{m()}}},computed:{...ce,...ee(["permissions"])},mounted(){this.fetchDatas()}},fe={class:"d-flex align-items-center mt-3"},_e={class:"me-2 text-muted"},ge=["value"],pe={class:"ms-2 text-muted"},he={class:"d-flex align-items-center gap-2"},be={class:"col-6"},ve={for:"enable_pament_method",class:"form-label"},ye={href:"",class:"text-success ms-2","data-bs-toggle":"modal","data-bs-target":"#payment"},ke={class:"table-responsive"},we={class:"table align-middle position-relative table-nowrap"},Ce={class:"table-active"},Be={scope:"col"},Me={scope:"col"},Pe={scope:"col"},xe={scope:"col"},Le={key:0},De={key:0},Se=["onClick","id","checked"],Te={class:"d-flex"},He={key:1},Ae={colspan:"7",class:"text-center"},Ne={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},qe={class:"alert-content"},Ee={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Oe={class:"alert-content"};function Re(o,t,v,s,h,P){const B=u("Head"),y=u("PageHeader"),k=u("BCol"),w=u("BButton"),x=u("Link"),M=u("BRow"),T=u("BCardHeader"),H=u("BCardBody"),A=u("BCard"),N=u("Pagination"),L=u("Layout");return i(),S(L,null,{default:d(()=>[c(B,{title:"Driver Needed Documents"}),c(y,{title:o.$t("bank_infos"),pageTitle:o.$t("bank_infos")},null,8,["title","pageTitle"]),c(M,null,{default:d(()=>[c(k,{lg:"12"},{default:d(()=>[c(A,{"no-body":"",id:"tasksList"},{default:d(()=>[c(T,{class:"border-0"},{default:d(()=>[c(M,{class:"g-2"},{default:d(()=>[c(k,{md:"3"},{default:d(()=>[e("div",fe,[e("label",_e,l(o.$t("show")),1),se(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.filter.limit=a),onChange:t[1]||(t[1]=(...a)=>s.changeEntriesPerPage&&s.changeEntriesPerPage(...a)),class:"form-select form-select-sm w-auto"},[(i(!0),_(V,null,R(s.paginatorOption,a=>(i(),_("option",{key:a,value:a},l(a),9,ge))),128))],544),[[ae,s.filter.limit]]),e("label",pe,l(o.$t("entries")),1)])]),_:1}),c(k,{md:"3"}),c(k,{md:"auto",class:"ms-auto"},{default:d(()=>[e("div",he,[o.permissions.includes("add-driver-needed-document")?(i(),S(x,{key:0,href:"/driver-bank-info/create"},{default:d(()=>[c(w,{variant:"primary",class:"float-end"},{default:d(()=>[t[4]||(t[4]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),p(" "+l(o.$t("add_bank_infos")),1)]),_:1,__:[4]})]),_:1})):C("",!0)])]),_:1}),e("div",be,[e("label",ve,l(o.$t("paymentMethods")),1),e("a",ye,l(o.$t("how_it_works")),1)])]),_:1})]),_:1}),c(H,{class:"border border-dashed border-end-0 border-start-0"},{default:d(()=>[e("div",ke,[e("table",we,[e("thead",Ce,[e("tr",null,[e("th",Be,l(o.$t("method")),1),e("th",Me,l(o.$t("fields")),1),e("th",Pe,l(o.$t("status")),1),e("th",xe,l(o.$t("action")),1)])]),s.results.length>0?(i(),_("tbody",Le,[(i(!0),_(V,null,R(s.results,(a,q)=>(i(),_("tr",{key:q},[e("td",null,l(a.method_name),1),e("td",null,l(a.field_names.join(", ")),1),o.permissions.includes("toggle-bank-info")?(i(),_("td",De,[e("div",{class:oe({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":a.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:O(m=>s.toggleActiveStatus(a.id,!a.active),["prevent"]),id:"status_"+a.id,checked:a.active},null,8,Se)],2)])):C("",!0),e("td",null,[e("div",Te,[o.permissions.includes("edit-driver-needed-document")?(i(),S(w,{key:0,onClick:O(m=>s.editData(a),["prevent"]),class:"btn btn-soft-warning btn-sm m-2"},{default:d(()=>t[5]||(t[5]=[e("i",{class:"bx bxs-edit-alt"},null,-1)])),_:2,__:[5]},1032,["onClick"])):C("",!0),o.permissions.includes("delete-driver-needed-document")?(i(),S(w,{key:1,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",id:"sa-warning",onClick:O(m=>s.deleteModal(a.id),["prevent"])},{default:d(()=>t[6]||(t[6]=[e("i",{class:"bx bx-trash"},null,-1)])),_:2,__:[6]},1032,["onClick"])):C("",!0)])])]))),128))])):(i(),_("tbody",He,[e("tr",null,[e("td",Ae,[t[7]||(t[7]=e("img",{src:ue,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,l(o.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[s.successMessage?(i(),_("div",Ne,[e("div",qe,[t[8]||(t[8]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[9]||(t[9]=p()),t[10]||(t[10]=e("strong",null,"Success",-1)),p(" - "+l(s.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):C("",!0),t[14]||(t[14]=e("div",{id:"payment",class:"modal fade",tabindex:"-1","aria-labelledby":"lowLabel","aria-hidden":"true",style:{display:"none"}},[e("div",{class:"modal-dialog"},[e("div",{class:"modal-content"},[e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"myModalLabel"},"How Payment Works"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),e("div",{class:"modal-body"},[e("p",{class:"text-muted"},[e("strong",null,"Add Payment Method – "),p("You can add the preferred payment methods that will be used to process manual transactions for withdrawal requests.")]),e("p",{class:"text-muted"},[e("strong",null,"Receive Withdrawal Request –"),p(" Drivers can submit a withdrawal request, which will be received by the admin for review.")]),e("p",{class:"text-muted"},[e("strong",null,"Process & Approve Transaction –"),p(" The admin reviews the request, completes the manual transaction, and then approves the withdrawal.")])])])])],-1)),s.alertMessage?(i(),_("div",Ee,[e("div",Oe,[t[11]||(t[11]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[12]||(t[12]=p()),t[13]||(t[13]=e("strong",null,"Alert",-1)),p(" - "+l(s.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):C("",!0)]),c(N,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Ue=j(me,[["render",Re]]);export{Ue as default};
