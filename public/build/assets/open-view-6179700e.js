import{_ as ne,Z as _e,O as ue,P as me,B as he,D as ve,r as m,o as ie,Y as p,g as x,i as o,y as se,w as _,a5 as be,a as fe,W as $,l as u,n as e,J as t,k as r,F as D,L as C,C as c,q as te,p as ge,z as b}from"./vendor-54d6cb1e.js";import{L as pe}from"./dispatchmain-7b8a389c.js";import{P as ye}from"./page-header-ff719701.js";import{s as xe}from"./search-06463c60.js";import{s as we}from"./searchbar-3bdb3315.js";import{_ as de,a as ke,b as qe,c as Be}from"./mark-f25bae14.js";import"./footer-7e4f68d9.js";import"./dispatchHorizontal-f9ab2bd0.js";import"./app-cb082573.js";const De={data(){return{rightOffcanvas:!1}},components:{Layout:pe,PageHeader:ye,Head:_e,Multiselect:ue,flatPickr:me,Link:he,search:xe,searchbar:we},props:{successMessage:String,alertMessage:String,app_for:String,pick_icon:String,drop_icon:String,stop_icon:String,firebaseConfig:Object,request:Object},setup(l){var A,E,U,V;const{t:a}=ve(),i=m(l.request),s=m(!1),le=m(!1),ae=m(l.request.requestProofs.data),j=m(l.request?l.request.requestStops.data:[]),ee=m(l.request?l.request.rejectedDrivers.data:[]),w=m(l.successMessage||""),I=m(l.alertMessage||""),M=m(null),T=m(null),L=m([]),k=m("**********"),R=m("**********"),S=m("**********"),z=m("**********"),N=()=>{w.value="",I.value=""},W=async()=>{map.value=p.map("map",{zoomControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,touchZoom:!1}).setView([i.value.pick_lat,i.value.pick_lng],12),map.value.dragging.disable(),map.value.scrollWheelZoom.disable(),map.value.doubleClickZoom.disable(),map.value.touchZoom.disable(),p.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(map.value);const n=p.icon({iconUrl:"/image/map/pickup.png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]}),h=p.icon({iconUrl:"/image/map/drop.png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});if(M.value=p.marker([i.value.pick_lat,i.value.pick_lng],{icon:n,draggable:!1}).addTo(map.value),T.value=p.marker([i.value.drop_lat,i.value.drop_lng],{icon:h,draggable:!1}).addTo(map.value),j.value.forEach((g,y)=>{const F=p.icon({iconUrl:"/image/map/"+y+".png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]}),H=p.marker([g.latitude,g.longitude],{icon:F,draggable:!1}).addTo(map.value);L.value[y]=H}),i.value.poly_line){const g=be.decode(i.value.poly_line);let y=p.polyline(g,{color:"blue"}).addTo(map.value);map.value.fitBounds(y)}},Y=()=>{s.value=!1},P=async n=>{try{const h=await fe.get(`/dispatcher/rides_request/cancel/${n}`);i.value=h.data.request,s.value=!1,$.fire(a("success"),a("trip_cancelled_successfully"),"success")}catch{$.fire(a("error"),a("failed_to_cancel_trip"),"error")}},G=n=>n.is_cancelled?{text:a("cancelled"),colorClass:"text-danger"}:n.is_completed?{text:a("completed"),colorClass:"text-success"}:n.is_trip_start?{text:a("on_trip"),colorClass:"text-primary"}:n.is_driver_arrived?{text:a("driver_arrived"),colorClass:"text-warning"}:n.is_later&&n.is_driver_started?{text:a("driver_started"),colorClass:"text-info"}:n.driver_id?{text:a("accepted"),colorClass:"text-secondary"}:n.is_later?{text:a("upcoming"),colorClass:"text-dark"}:{text:a("searching"),colorClass:"text-muted"},J=n=>n.cancel_method==0?a("automatic"):n.cancel_method==1?a("cancelled_by_user"):n.cancel_method==2?a("cancelled_by_driver"):a("cancelled_by_dispatcher"),O=()=>{const n=new Date,h={weekday:"short",day:"numeric",month:"short",year:"numeric"};return n.toLocaleDateString("en-US",h)},K=async n=>{$.fire({title:"Are you sure?",text:"You want to be cancel this ride!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, Cancel it!",cancelButtonText:"Close"}).then(async h=>{if(h.isConfirmed)try{await P(n)}catch(g){console.error(a("error_deleting_data"),g),$.fire(a("error"),a("failed_to_delete_the_data"),"error")}})};ie(async()=>{var n,h,g;if(!i.value.is_cancelled&&!i.value.is_completed)try{const y=l.firebaseConfig;firebase.apps.length||firebase.initializeApp(y),firebase.database().ref(`requests/${i.value.id}`).on("value",Z=>{const f=Z.val();f&&(f.hasOwnProperty("is_completed")&&(i.value.is_completed=!0),f.accept!==1&&(i.value.driver_id=null),i.value.is_later&&f.hasOwnProperty("modified_by_driver")&&(i.value.is_driver_started=1),f.trip_arrived==1&&(i.value.is_driver_arrived=!0,i.value.converted_arrived_at||(i.value.converted_arrived_at=O())),f.trip_start==1&&(i.value.is_trip_start=!0,i.value.converted_trip_start_time||(i.value.converted_trip_start_time=O())),(f.is_cancelled||f.is_cancel)&&(i.value.is_cancelled=!0,setTimeout(()=>{window.location.reload()},2e3)))}),(n=i.value.driverDetail)!=null&&n.data&&i.value.is_driver_started&&firebase.database().ref("drivers/driver_"+((g=(h=i.value.driverDetail)==null?void 0:h.data)==null?void 0:g.id)).on("value",f=>{const d=f.val(),v=decodeGeohash(d.g);if(v){const Q=[v.lat,v.lon];currentLat.value=v.lat,currentLng.value=v.lon;let B=d.vehicle_type_icon?`/image/map/${d.vehicle_type_icon}.png`:"";if(B.length>0)if(driverMarker.value){const X={lat:v.lat,lng:v.lon};animateDriverMovement(driverMarker.value,X),driverMarker.value.setIcon(p.icon({iconUrl:B,iconSize:[30,30]}))}else driverMarker.value=p.marker(Q,{icon:p.icon({iconUrl:B,iconSize:[30,30]})}).addTo(map.value),map.value.setView([currentLat.value,currentLng.value],15);else driverMarker.value&&(map.value.removeLayer(driverMarker.value),driverMarker.value=null)}})}catch(y){console.error("Error initializing Firebase or fetching settings:",y)}}),ie(()=>{W()}),l.app_for!="demo"&&(i.value.userDetail&&(k.value=(A=i.value.userDetail.data)==null?void 0:A.mobile,R.value=(E=i.value.userDetail.data)==null?void 0:E.email),i.value.driverDetail&&(S.value=(U=i.value.driverDetail.data)==null?void 0:U.mobile,z.value=(V=i.value.driverDetail.data)==null?void 0:V.email));const q=m(a("normal"));return i.value.is_out_station&&(i.value.is_round_trip?q.value=a("round_trip_outstation_trip"):q.value=a("one_way_outstation_trip")),{result:i,modalShow:s,successMessage:w,alertMessage:I,rejected_drivers:ee,deleteModal:K,closeModal:Y,deleteData:P,proof:ae,stops:j,user_mobile:k,user_email:R,driver_mobile:S,driver_email:z,showStops:le,rideStatus:G,dispatch_type:q,dismissMessage:N,cancelledBy:J}}},Ce={class:"mb-1"},Me={class:"row"},Te={class:"col-xxl-4 col-md-6"},Le={class:"card card-animate border border-dashed border-primary"},Se={class:"card-body text-center"},ze={class:"mb-3 flex-grow-1 text-start text-muted badge bg-secondary-subtle fs-18"},Pe={class:"mb-3 fs-18"},Oe={class:"fs-14 mb-4"},Ae={key:0,class:"col-xxl-4 col-md-6"},Ee={class:"card card-animate border border-dashed border-primary"},Ue={class:"card-body text-center"},Ve={class:"mb-3 flex-grow-1 text-start text-muted badge bg-secondary-subtle fs-18"},Fe={class:"mb-3 fs-18"},He={class:"fs-14 mb-4"},Ze={key:1,class:"col-xxl-4 col-md-6"},je={class:"card card-animate border border-dashed border-primary"},Ie={class:"card-body text-center"},Re={class:"mb-3 flex-grow-1 text-start text-muted badge bg-secondary-subtle fs-18"},Ne={class:"mb-3 fs-18"},We={class:"fs-14 mb-4"},Ye={class:"col-xxl-4 col-md-6"},Ge={class:"card card-animate border border-dashed border-primary"},Je={class:"card-body text-center"},Ke={class:"mb-3 flex-grow-1 text-start text-muted badge bg-secondary-subtle fs-18"},Qe={key:0,class:"fs-14 text-danger"},Xe={class:"mb-1"},$e={class:"row"},es={class:"col-xxl-4 col-md-6"},ss={class:"card card-animate border border-dashed border-primary"},ts={class:"card-body"},ls={class:"mb-3 flex-grow-1 text-start text-muted badge bg-secondary-subtle fs-18"},as={class:"d-flex align-items-center mb-2"},os={class:"flex-shrink-0"},rs={class:"text-muted mb-0"},is={class:"flex-grow-1 ms-2"},ds={class:"mb-0"},cs={class:"d-flex align-items-center mb-2"},ns={class:"flex-shrink-0"},_s={class:"text-muted mb-0"},us={class:"flex-grow-1 ms-2"},ms={class:"mb-0"},hs={key:0},vs={key:1},bs={key:2},fs={class:"d-flex align-items-center mb-2"},gs={class:"flex-shrink-0"},ps={class:"text-muted mb-0"},ys={class:"flex-grow-1 ms-2"},xs={class:"mb-0"},ws={class:"d-flex align-items-center mb-2"},ks={class:"flex-shrink-0"},qs={class:"text-muted mb-0"},Bs={class:"flex-grow-1 ms-2"},Ds={class:"mb-0"},Cs={key:0,class:"d-flex align-items-center mb-2"},Ms={class:"flex-shrink-0"},Ts={class:"text-muted mb-0"},Ls={class:"flex-grow-1 ms-2"},Ss={class:"mb-0"},zs={class:"d-flex align-items-center mb-2"},Ps={class:"flex-shrink-0"},Os={class:"text-muted mb-0"},As={class:"flex-grow-1 ms-2"},Es={class:"mb-0"},Us={key:1,class:"d-flex align-items-center mb-2"},Vs={class:"flex-shrink-0"},Fs={class:"text-muted mb-0"},Hs={class:"flex-grow-1 ms-2"},Zs={class:"mb-0"},js={key:2,class:"d-flex align-items-center mb-2"},Is={class:"flex-shrink-0"},Rs={class:"text-muted mb-0"},Ns={class:"mb-0"},Ws={key:3,class:"d-flex align-items-center mb-2"},Ys={class:"flex-shrink-0"},Gs={class:"text-muted mb-0"},Js={class:"flex-grow-1 ms-2"},Ks={class:"mb-0"},Qs={class:"col-xxl-4 col-md-6"},Xs={class:"card card-animate border border-dashed border-primary"},$s={class:"card-body"},et={class:"mb-3 flex-grow-1 text-start text-muted badge bg-secondary-subtle fs-18"},st={class:"flex-grow-1 mt-2 text-center"},tt=["src"],lt={class:"d-flex align-items-center mb-2"},at={class:"flex-shrink-0"},ot={class:"text-muted mb-0"},rt={class:"flex-grow-1 ms-2"},it={class:"mb-0"},dt={class:"d-flex align-items-center mb-2"},ct={class:"flex-shrink-0"},nt={class:"text-muted mb-0"},_t={class:"flex-grow-1 ms-2"},ut={class:"mb-0"},mt={class:"d-flex align-items-center mb-2"},ht={class:"flex-shrink-0"},vt={class:"text-muted mb-0"},bt={class:"flex-grow-1 ms-2"},ft={class:"mb-0"},gt={key:0,class:"col-xxl-4 col-md-6"},pt={class:"card card-animate border border-dashed border-primary"},yt={class:"card-body"},xt={class:"mb-3 flex-grow-1 text-start text-muted badge bg-secondary-subtle fs-18"},wt={class:"flex-grow-1 mt-2 text-center"},kt=["src"],qt={class:"d-flex align-items-center mb-2"},Bt={class:"flex-shrink-0"},Dt={class:"text-muted mb-0"},Ct={class:"flex-grow-1 ms-2"},Mt={class:"mb-0"},Tt={class:"d-flex align-items-center mb-2"},Lt={class:"flex-shrink-0"},St={class:"text-muted mb-0"},zt={class:"flex-grow-1 ms-2"},Pt={class:"mb-0"},Ot={class:"d-flex align-items-center mb-2"},At={class:"flex-shrink-0"},Et={class:"text-muted mb-0"},Ut={class:"flex-grow-1 ms-2"},Vt={class:"mb-0"},Ft={class:"mb-1"},Ht={class:"col-lg-6"},Zt={class:"card border mt-3"},jt={class:"table-responsive"},It={class:"table align-middle position-relative table-nowrap"},Rt={class:"table-active"},Nt={class:"fs-16"},Wt={scope:"col"},Yt={scope:"col"},Gt={scope:"col"},Jt={key:0},Kt={key:0},Qt={key:1},Xt={key:0},$t={key:1,class:"text-danger"},el={key:2},sl={key:3},tl={key:4},ll={class:"bg-body bg-success-subtle"},al={colspan:"2",class:"text-success"},ol={class:"text-success"},rl={class:"text-success"},il={class:"text-success"},dl={class:"col-lg-6"},cl={class:"card border mt-3"},nl={class:"table-responsive"},_l={class:"table align-middle position-relative table-nowrap"},ul={class:"table-active"},ml={class:"fs-16"},hl={scope:"col"},vl={scope:"col"},bl={class:"text-danger"},fl={colspan:"2"},gl={class:"text-danger"},pl={colspan:"2"},yl={class:"text-danger"},xl={colspan:"2"},wl={colspan:"2"},kl={class:"bg-body bg-success-subtle"},ql={colspan:"2",class:"text-success"},Bl={class:"text-success"},Dl={class:"text-success"},Cl={class:"text-success"},Ml={class:"card"},Tl={class:"mb-1"},Ll={class:"card-body"},Sl={class:"profile-timeline"},zl={class:"accordion accordion-flush",id:"accordionFlushExample"},Pl={class:"accordion-item border-0"},Ol={class:"accordion-header",id:"headingOne"},Al={class:"accordion-button p-2 shadow-none","data-bs-toggle":"collapse",href:"#","aria-expanded":"true","aria-controls":"collapseOne"},El={class:"d-flex align-items-center"},Ul={class:"flex-shrink-0 border border-4 border-success rounded-circle"},Vl=["src"],Fl={class:"flex-grow-1 ms-3"},Hl={class:"fs-15 mb-0 fw-semibold text-primary"},Zl={class:"fw-normal text-muted"},jl={key:0,id:"collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},Il={class:"accordion-body ms-5 ps-5 pt-0"},Rl={class:"mb-1 text-success"},Nl={class:"accordion-item border-0"},Wl={class:"accordion-header",id:"headingTwo"},Yl={class:"accordion-button p-2 shadow-none","data-bs-toggle":"collapse",href:"#","aria-expanded":"false","aria-controls":"collapseTwo"},Gl={class:"d-flex align-items-center"},Jl={class:"flex-shrink-0 border border-4 border-danger rounded-circle"},Kl=["src"],Ql={class:"flex-grow-1 ms-3"},Xl={class:"fs-15 mb-1 fw-semibold text-danger"},$l={class:"fw-normal"},ea={id:"collapseTwo",class:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample"},sa={class:"accordion-body ms-5 ps-5 pt-0"},ta={class:"mb-1"},la={class:"badge bg-light text-body fs-14 fw-large"},aa={key:0,class:"accordion-item border-0"},oa={class:"accordion-header",id:"headingThree"},ra={class:"accordion-button p-2 shadow-none","data-bs-toggle":"collapse",href:"#","aria-expanded":"false","aria-controls":"collapseThree"},ia={class:"d-flex align-items-center"},da={class:"flex-shrink-0 border border-4 border-success rounded-circle"},ca=["src"],na={class:"flex-grow-1 ms-3"},_a={class:"fs-15 mb-1 fw-semibold text-success"},ua={class:"fw-normal"},ma={id:"collapseThree",class:"accordion-collapse collapse show","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample"},ha={class:"accordion-body ms-5 ps-5 pt-0"},va={class:"mb-1"},ba={class:"badge bg-light text-body fs-14 fw-large"},fa={key:1,class:"accordion-item border-0"},ga={class:"accordion-header",id:"headingThree"},pa={class:"accordion-button p-2 shadow-none","data-bs-toggle":"collapse",href:"#","aria-expanded":"false","aria-controls":"collapseThree"},ya={class:"d-flex align-items-center"},xa={class:"flex-shrink-0 border border-4 border-warning rounded-circle"},wa=["src"],ka={class:"flex-grow-1 ms-3"},qa={class:"fs-15 mb-1 fw-semibold text-warning"},Ba={class:"fw-normal"},Da={id:"collapseThree",class:"accordion-collapse collapse show","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample"},Ca={class:"accordion-body ms-5 ps-5 pt-0"},Ma={class:"mb-1"},Ta={key:0,id:"collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},La={class:"accordion-body ms-5 ps-5 pt-0"},Sa={class:"mb-1 text-success"},za={key:2,class:"accordion-item border-0"},Pa={class:"accordion-header",id:"headingThree"},Oa={class:"accordion-button p-2 shadow-none","data-bs-toggle":"collapse",href:"#","aria-expanded":"false","aria-controls":"collapseThree"},Aa={class:"d-flex align-items-center"},Ea={class:"flex-shrink-0 border border-4 border-success rounded-circle"},Ua=["src"],Va={class:"flex-grow-1 ms-3"},Fa={class:"fs-15 mb-1 fw-semibold text-success"},Ha={class:"fw-normal"},Za={id:"collapseThree",class:"accordion-collapse collapse show","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample"},ja={class:"accordion-body ms-5 ps-5 pt-0"},Ia={class:"mb-1"},Ra={key:3,class:"accordion-item border-0"},Na={class:"accordion-header",id:"headingFour"},Wa={class:"accordion-button p-2 shadow-none","data-bs-toggle":"collapse",href:"#collapseFour","aria-expanded":"false"},Ya={class:"d-flex align-items-center"},Ga={class:"flex-shrink-0 border border-4 border-success rounded-circle"},Ja=["src"],Ka={class:"flex-grow-1 ms-3"},Qa={class:"fs-14 mb-0 fw-semibold text-success"},Xa={class:"fw-normal text-muted"},$a={key:4,class:"accordion-item border-0"},eo={class:"accordion-header",id:"headingFour"},so={class:"accordion-button p-2 shadow-none","data-bs-toggle":"collapse",href:"#collapseFour","aria-expanded":"false"},to={class:"d-flex align-items-center"},lo={class:"flex-shrink-0 border border-4 border-danger rounded-circle"},ao=["src"],oo={class:"flex-grow-1 ms-3"},ro={class:"fs-14 mb-0 fw-semibold text-danger"},io={class:"fw-normal text-muted"},co={key:1,class:"card"},no={class:"card-body border-top border-top-dashed p-4"},_o={class:"text-muted text-uppercase fw-semibold mb-4"},uo={class:"card-body"},mo={class:"text-muted text-uppercase fw-semibold mb-2"},ho={class:"d-flex"},vo={class:"flex-shrink-0 avatar-sm"},bo={class:"avatar-title bg-light rounded"},fo=["src"],go={class:"flex-grow-1 ms-3"},po={class:"text-muted mb-1 fst-italic"},yo={class:"text-muted mb-1 fst-italic"},xo={class:"fs-11 align-middle text-warning"},wo=["id"],ko={class:"card-body"},qo={class:"text-muted text-uppercase fw-semibold mb-4"},Bo={class:"d-flex"},Do={class:"flex-shrink-0 avatar-sm"},Co={class:"avatar-title bg-light rounded"},Mo=["src"],To={class:"flex-grow-1 ms-3"},Lo={class:"text-muted mb-1 fst-italic"},So={class:"text-muted mb-1 fst-italic"},zo={class:"fs-11 align-middle text-warning"},Po=["id"],Oo={key:2,class:"card"},Ao={class:"mb-1"},Eo={class:"card-body"},Uo={class:"row"},Vo={class:"col-lg-4"},Fo=["src"],Ho={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Zo={class:"alert-content"},jo={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Io={class:"alert-content"};function Ro(l,a,i,s,le,ae){const j=x("Head"),ee=x("PageHeader"),w=x("BCardHeader"),I=x("BButton"),M=x("BCardBody"),T=x("BCard"),L=x("BCol"),k=x("BRow"),R=x("Layout");return o(),se(R,null,{default:_(()=>{var S,z,N,W,Y,P,G,J,O,K,q,A,E,U,V,n,h,g,y,F,H,Z,f;return[u(j,{title:"View Details"}),u(ee,{title:l.$t("view_details"),pageTitle:l.$t("view_details"),pageLink:"/dispatcher/rides_request"},null,8,["title","pageTitle"]),u(k,null,{default:_(()=>[u(L,{lg:"12"},{default:_(()=>[u(T,{"no-body":"",id:"tasksList"},{default:_(()=>[u(w,null,{default:_(()=>[e("h4",Ce,t(l.$t("map_view")),1)]),_:1}),u(M,null,{default:_(()=>[e("div",Me,[a[8]||(a[8]=e("div",{class:"mt-3"},null,-1)),a[9]||(a[9]=e("div",{class:"col-sm-12"},[e("div",{class:"card"},[e("div",{class:"card-body"},[e("div",{id:"map",style:{height:"400px"}})])])],-1)),e("div",Te,[e("div",Le,[e("div",Se,[e("h4",ze,t(l.$t("pickup_details")),1),a[3]||(a[3]=e("div",{class:"flex-grow-1"},[e("img",{src:de,class:"img-fluid",style:{width:"55px",height:"55px"}})],-1)),e("h5",Pe,t(l.$t("location"))+":",1),e("h6",Oe,t(s.result.pick_address),1)])])]),s.stops.length>0?(o(),r("div",Ae,[e("div",Ee,[e("div",Ue,[e("h4",Ve,t(l.$t("stop_details")),1),a[4]||(a[4]=e("div",{class:"flex-grow-1"},[e("img",{src:de,class:"img-fluid",style:{width:"55px",height:"55px"}})],-1)),e("h5",Fe,t(l.$t("location"))+":",1),(o(!0),r(D,null,C(s.stops,(d,v)=>(o(),r("h6",He,t(d.address),1))),256))])])])):c("",!0),s.result.drop_address?(o(),r("div",Ze,[e("div",je,[e("div",Ie,[e("h4",Re,t(l.$t("drop_details")),1),a[5]||(a[5]=e("div",{class:"flex-grow-1"},[e("img",{src:ke,class:"img-fluid",style:{width:"55px",height:"55px"}})],-1)),e("h5",Ne,t(l.$t("location"))+":",1),e("h6",We,t(s.result.drop_address),1)])])])):c("",!0),e("div",Ye,[e("div",Ge,[e("div",Je,[e("h4",Ke,t(l.$t("trip_status"))+" "+t(s.result.is_bid_ride?l.$t("bidding"):""),1),a[7]||(a[7]=e("div",{class:"flex-grow-1 mt-2"},[e("img",{src:qe,class:"img-fluid",style:{width:"55px",height:"55px"}})],-1)),e("h5",{class:te(["mt-5 mb-3 fs-18",s.rideStatus(s.result).colorClass])},t(s.rideStatus(s.result).text),3),s.result.is_cancelled?(o(),r("h5",Qe,"( "+t(s.cancelledBy(s.result))+" )",1)):c("",!0),!s.result.is_cancelled&&!s.result.is_completed?(o(),se(I,{key:1,class:"btn btn-danger btn-md",type:"button",onClick:a[0]||(a[0]=ge(d=>s.deleteModal(s.result.id),["prevent"]))},{default:_(()=>[a[6]||(a[6]=e("i",{class:"bx bx-show-alt align-center text-muted me-2"},null,-1)),b(" "+t(l.$t("cancel")),1)]),_:1})):c("",!0)])])])])]),_:1})]),_:1})]),_:1})]),_:1}),u(k,null,{default:_(()=>[u(L,{lg:"12"},{default:_(()=>[u(T,{"no-body":"",id:"tasksList"},{default:_(()=>[u(w,null,{default:_(()=>[e("h4",Xe,t(l.$t("request_details")),1)]),_:1}),u(M,null,{default:_(()=>{var d,v,Q,B,X;return[e("div",$e,[e("div",es,[e("div",ss,[e("div",ts,[e("h4",ls,t(l.$t("request")),1),a[10]||(a[10]=e("div",{class:"flex-grow-1 mt-2 text-center"},[e("img",{src:Be,class:"img-fluid",style:{width:"55px",height:"55px"}})],-1)),e("div",as,[e("div",os,[e("p",rs,t(l.$t("zone"))+":",1)]),e("div",is,[e("h6",ds,t(s.result.zone_name??"-"),1)])]),e("div",cs,[e("div",ns,[e("p",_s,t(l.$t("transport_type"))+":",1)]),e("div",us,[e("h6",ms,[s.result.transport_type==="taxi"?(o(),r("span",hs,t(l.$t("taxi"))+" "+t(s.result.is_bid_ride?l.$t("bidding"):""),1)):s.result.transport_type==="delivery"?(o(),r("span",vs,t(l.$t("delivery"))+" "+t(s.result.is_bid_ride?l.$t("bidding"):""),1)):(o(),r("span",bs,t(l.$t("all")),1))])])]),e("div",fs,[e("div",gs,[e("p",ps,t(l.$t("vehicle_type"))+":",1)]),e("div",ys,[e("h6",xs,t(s.result.vehicle_type_name??"-"),1)])]),e("div",ws,[e("div",ks,[e("p",qs,t(l.$t("trip_time"))+":",1)]),e("div",Bs,[e("h6",Ds,t(s.result.is_later?s.result.converted_trip_start_time:s.result.converted_created_at),1)])]),s.result.rental_package_name!=="-"?(o(),r("div",Cs,[e("div",Ms,[e("p",Ts,t(l.$t("rental_pack"))+":",1)]),e("div",Ls,[e("h6",Ss,t(s.result.rental_package_name),1)])])):c("",!0),e("div",zs,[e("div",Ps,[e("p",Os,t(l.$t("ride_type"))+":",1)]),e("div",As,[e("h6",Es,t(s.dispatch_type),1)])]),s.result.is_round_trip?(o(),r("div",Us,[e("div",Vs,[e("p",Fs,t(l.$t("return_time"))+":",1)]),e("div",Hs,[e("h6",Zs,t(s.result.return_time),1)])])):c("",!0),((d=s.result.requestPreferences.data)==null?void 0:d.length)>0?(o(),r("div",js,[e("div",Is,[e("p",Rs,t(l.$t("preferences"))+":",1)]),(o(!0),r(D,null,C(s.result.requestPreferences.data,(ce,oe)=>{var re;return o(),r("div",{class:"ms-2",key:oe},[e("h6",Ns,t(ce.name)+" "+t(oe+1==((re=s.result.requestPreferences)==null?void 0:re.data.length)?"":","),1)])}),128))])):c("",!0),s.result.shared_ride?(o(),r("div",Ws,[e("div",Ys,[e("p",Gs,t(l.$t("occupants"))+":",1)]),e("div",Js,[e("h6",Ks,t(s.result.seats_taken),1)])])):c("",!0)])])]),e("div",Qs,[e("div",Xs,[e("div",$s,[e("h4",et,t(l.$t("user_details")),1),e("div",st,[e("img",{src:s.result.userDetail?(v=s.result.userDetail.data)==null?void 0:v.profile_picture:"@assets/images/user.gif",class:"img-fluid",style:{width:"55px",height:"55px"}},null,8,tt)]),e("div",lt,[e("div",at,[e("p",ot,t(l.$t("name"))+":",1)]),e("div",rt,[e("h6",it,t(s.result.userDetail?(Q=s.result.userDetail.data)==null?void 0:Q.name:"-"),1)])]),e("div",dt,[e("div",ct,[e("p",nt,t(l.$t("email"))+":",1)]),e("div",_t,[e("h6",ut,t(s.user_email),1)])]),e("div",mt,[e("div",ht,[e("p",vt,t(l.$t("mobile"))+":",1)]),e("div",bt,[e("h6",ft,t(s.user_mobile),1)])])])])]),s.result.driverDetail?(o(),r("div",gt,[e("div",pt,[e("div",yt,[e("h4",xt,t(l.$t("driver_details")),1),e("div",wt,[e("img",{src:s.result.driverDetail?(B=s.result.driverDetail.data)==null?void 0:B.profile_picture:"@assets/images/driver.gif",class:"img-fluid",style:{width:"55px",height:"55px"}},null,8,kt)]),e("div",qt,[e("div",Bt,[e("p",Dt,t(l.$t("name"))+":",1)]),e("div",Ct,[e("h6",Mt,t(s.result.driverDetail?(X=s.result.driverDetail.data)==null?void 0:X.name:"-"),1)])]),e("div",Tt,[e("div",Lt,[e("p",St,t(l.$t("email"))+":",1)]),e("div",zt,[e("h6",Pt,t(s.driver_email),1)])]),e("div",Ot,[e("div",At,[e("p",Et,t(l.$t("mobile"))+":",1)]),e("div",Ut,[e("h6",Vt,t(s.driver_mobile),1)])])])])])):c("",!0)])]}),_:1})]),_:1})]),_:1})]),_:1}),s.result.requestBill?(o(),se(k,{key:0},{default:_(()=>[u(L,{lg:"col-12"},{default:_(()=>[u(T,null,{default:_(()=>[u(w,null,{default:_(()=>[e("h4",Ft,t(l.$t("bill_details")),1)]),_:1}),u(M,null,{default:_(()=>[u(k,null,{default:_(()=>[e("div",Ht,[e("div",Zt,[e("div",jt,[e("table",It,[e("thead",Rt,[e("tr",Nt,[e("th",Wt,t(l.$t("title")),1),e("th",Yt,t(l.$t("description")),1),e("th",Gt,t(l.$t("price")),1)])]),s.result.accepted_ride_fare>0?(o(),r("tbody",Jt,[e("tr",null,[e("td",null,t(l.$t("bid_fare")),1),a[11]||(a[11]=e("td",null,"-",-1)),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.accepted_ride_fare),1)]),s.result.additional_charges_amount>0?(o(),r("tr",Kt,[e("td",null,t(s.result.additional_charges_reason),1),a[12]||(a[12]=e("td",null,"-",-1)),e("td",null,t(s.result.additional_charges_amount),1)])):c("",!0)])):(o(),r("tbody",Qt,[e("tr",null,[e("td",null,t(l.$t("base_price")),1),e("td",null,t(l.$t("for_first"))+" "+t(s.result.requestBill.data.base_distance)+" "+t(l.$t("km")),1),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.base_price),1)]),e("tr",null,[e("td",null,t(l.$t("distance_price")),1),e("td",null,t(s.result.requestBill.data.total_distance>s.result.requestBill.data.base_distance?s.result.requestBill.data.total_distance-s.result.requestBill.data.base_distance:0)+" "+t(l.$t("km"))+" * "+t(s.result.requested_currency_symbol)+" "+t(s.result.requestBill.data.price_per_distance)+" / "+t(l.$t("km")),1),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.distance_price),1)]),e("tr",null,[e("td",null,t(l.$t("time_price")),1),e("td",null,t(s.result.requestBill.data.total_time)+" "+t(l.$t("min"))+" * "+t(s.result.requested_currency_symbol)+" "+t(s.result.requestBill.data.price_per_time)+" / "+t(l.$t("min")),1),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.time_price),1)]),s.result.requestBill.data.cancellation_fee>0?(o(),r("tr",Xt,[e("td",null,t(l.$t("cancellation_fee")),1),a[13]||(a[13]=e("td",null,"-",-1)),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.cancellation_fee),1)])):c("",!0),e("tr",null,[e("td",null,t(l.$t("service_tax")),1),a[14]||(a[14]=e("td",null,"-",-1)),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.service_tax),1)]),s.result.requestBill.data.promo_discount>0?(o(),r("tr",$t,[e("td",null,t(l.$t("promo_discount")),1),a[15]||(a[15]=e("td",null,"-",-1)),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.promo_discount),1)])):c("",!0),e("tr",null,[e("td",null,t(l.$t("admin_commission")),1),a[16]||(a[16]=e("td",null,"-",-1)),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.admin_commision),1)]),s.result.requestBill.data.additional_charges_amount>0?(o(),r("tr",el,[e("td",null,t(s.result.requestBill.data.additional_charges_reason),1),a[17]||(a[17]=e("td",null,"-",-1)),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.additional_charges_amount),1)])):c("",!0),s.result.requestBill.data.airport_surge_fee>0?(o(),r("tr",sl,[e("td",null,t(l.$t("airport_surge_fee")),1),a[18]||(a[18]=e("td",null,"-",-1)),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.airport_surge_fee),1)])):c("",!0),s.result.requestBill.data.preference_price_total>0?(o(),r("tr",tl,[e("td",null,t(l.$t("preferences_total")),1),a[19]||(a[19]=e("td",null,"-",-1)),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.preference_price_total),1)])):c("",!0)])),e("tfoot",ll,[e("tr",null,[e("td",al,[e("h4",ol,t(l.$t("total")),1)]),e("td",rl,[e("h4",il,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.total_amount),1)])])])])])])]),e("div",dl,[e("div",cl,[e("div",nl,[e("table",_l,[e("thead",ul,[e("tr",ml,[e("th",hl,t(l.$t("title")),1),a[20]||(a[20]=e("th",{scope:"col"},null,-1)),e("th",vl,t(l.$t("price")),1)])]),e("tbody",null,[e("tr",bl,[e("td",fl,t(l.$t("admin_commission")),1),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.admin_commision),1)]),e("tr",gl,[e("td",pl,t(l.$t("service_tax")),1),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.service_tax),1)]),e("tr",yl,[e("td",xl,t(l.$t("admin_commission_from_driver")),1),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.admin_commision_from_driver),1)]),e("tr",null,[e("td",wl,t(l.$t("driver_commission")),1),e("td",null,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.driver_commision),1)])]),e("tfoot",kl,[e("tr",null,[e("td",ql,[e("h4",Bl,t(l.$t("total")),1)]),e("td",Dl,[e("h4",Cl,t(s.result.requested_currency_symbol)+t(s.result.requestBill.data.total_amount),1)])])])])])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):c("",!0),e("div",Ml,[u(w,null,{default:_(()=>[e("h4",Tl,t(l.$t("request_timeline")),1)]),_:1}),e("div",Ll,[e("div",Sl,[e("div",zl,[e("div",Pl,[e("div",Ol,[e("a",Al,[e("div",El,[e("div",Ul,[e("img",{src:s.result.userDetail?(S=s.result.userDetail.data)==null?void 0:S.profile_picture:"/assets/images/default-profile-picture.png",alt:"",class:"avatar-md rounded-circle"},null,8,Vl)]),e("div",Fl,[e("h6",Hl,[b(t(l.$t("ride_created"))+" -",1),e("span",Zl,t(s.result.converted_created_at),1)])])])])]),!s.result.driver_id&&!s.result.is_cancelled?(o(),r("div",jl,[e("div",Il,[e("h6",Rl,t(l.$t("searching")),1)])])):c("",!0)]),(o(!0),r(D,null,C(s.rejected_drivers,(d,v)=>(o(),r("div",Nl,[e("div",Wl,[e("a",Yl,[e("div",Gl,[e("div",Jl,[e("img",{src:d.profile_picture,alt:"",class:"avatar-md rounded-circle"},null,8,Kl)]),e("div",Ql,[e("h6",Xl,[b(t(l.$t("rejected"))+" - ",1),e("span",$l,t(d.converted_created_at),1)])])])])]),e("div",ea,[e("div",sa,[e("h5",ta,t(d.driver_name),1),e("span",null,[e("span",la,[b(t(d.driver_rating),1),a[21]||(a[21]=e("i",{class:"mdi mdi-star text-warning ms-1"},null,-1))])])])])]))),256)),s.result.driverDetail?(o(),r("div",aa,[e("div",oa,[e("a",ra,[e("div",ia,[e("div",da,[e("img",{src:(N=(z=s.result.driverDetail)==null?void 0:z.data)==null?void 0:N.profile_picture,alt:"",class:"avatar-md rounded-circle"},null,8,ca)]),e("div",na,[e("h6",_a,[b(t(l.$t("accepted"))+" - ",1),e("span",ua,t(s.result.converted_accepted_at),1)])])])])]),e("div",ma,[e("div",ha,[e("h5",va,t((W=s.result.driverDetail.data)==null?void 0:W.name),1),e("span",null,[e("span",ba,[b(t((Y=s.result.driverDetail.data)==null?void 0:Y.rating),1),a[22]||(a[22]=e("i",{class:"mdi mdi-star text-warning ms-1"},null,-1))])])])])])):c("",!0),s.result.is_driver_arrived&&!s.result.instant_ride?(o(),r("div",fa,[e("div",ga,[e("a",pa,[e("div",ya,[e("div",xa,[e("img",{src:(G=(P=s.result.driverDetail)==null?void 0:P.data)==null?void 0:G.profile_picture,alt:"",class:"avatar-md rounded-circle"},null,8,wa)]),e("div",ka,[e("h6",qa,[b(t(l.$t("arrived"))+" - ",1),e("span",Ba,t(s.result.converted_arrived_at),1)])])])])]),e("div",Da,[e("div",Ca,[e("h5",Ma,t((O=(J=s.result.driverDetail)==null?void 0:J.data)==null?void 0:O.name),1)])]),s.result.is_trip_start?c("",!0):(o(),r("div",Ta,[e("div",La,[e("h6",Sa,t(l.$t("waiting")),1)])]))])):c("",!0),s.result.is_trip_start?(o(),r("div",za,[e("div",Pa,[e("a",Oa,[e("div",Aa,[e("div",Ea,[e("img",{src:(q=(K=s.result.driverDetail)==null?void 0:K.data)==null?void 0:q.profile_picture,alt:"",class:"avatar-md rounded-circle"},null,8,Ua)]),e("div",Va,[e("h6",Fa,[b(t(s.result.transport_type=="delivery"?l.$t("tripLoaded"):l.$t("tripStarted"))+" - ",1),e("span",Ha,t(s.result.converted_trip_start_time),1)])])])])]),e("div",Za,[e("div",ja,[e("h5",Ia,t((E=(A=s.result.driverDetail)==null?void 0:A.data)==null?void 0:E.name),1)])])])):c("",!0),s.result.is_completed?(o(),r("div",Ra,[e("div",Na,[e("a",Wa,[e("div",Ya,[e("div",Ga,[e("img",{src:(V=(U=s.result.driverDetail)==null?void 0:U.data)==null?void 0:V.profile_picture,alt:"",class:"avatar-md rounded-circle"},null,8,Ja)]),e("div",Ka,[e("h6",Qa,[b(t(s.result.transport_type=="delivery"?l.$t("tripUnloaded"):l.$t("ride_completed"))+" -",1),e("span",Xa,t(s.result.converted_completed_at),1)])])])])])])):c("",!0),s.result.is_cancelled?(o(),r("div",$a,[e("div",eo,[e("a",so,[e("div",to,[e("div",lo,[e("img",{src:(h=(n=s.result.userDetail)==null?void 0:n.data)==null?void 0:h.profile_picture,alt:"",class:"avatar-md rounded-circle"},null,8,ao)]),e("div",oo,[e("h6",ro,[b(t(l.$t("ride_cancelled"))+" -",1),e("span",io,t(s.result.converted_cancelled_at),1)])])])])])])):c("",!0)])])])]),s.result.ride_user_rating>0||s.result.ride_driver_rating>0?(o(),r("div",co,[e("div",no,[e("div",null,[e("h6",_o,t(l.$t("ratings")),1),e("div",uo,[e("h6",mo,t(l.$t("user_ratings")),1),e("div",ho,[e("div",vo,[e("div",bo,[e("img",{src:(y=(g=s.result.userDetail)==null?void 0:g.data)==null?void 0:y.profile_picture,alt:"User",height:"30"},null,8,fo)])]),e("div",go,[e("div",null,[e("p",po,t(s.result.userDetail?(F=s.result.userDetail.data)==null?void 0:F.name:"-"),1),e("p",yo,t(s.result.ride_user_comment),1),e("div",xo,[(o(),r(D,null,C(5,d=>e("i",{key:d,id:"id-"+d,class:te({"ri-star-fill":d<=s.result.ride_user_rating,"ri-star-line":d>s.result.ride_user_rating})},null,10,wo)),64))])])])])]),e("div",ko,[e("h6",qo,t(l.$t("driver_ratings")),1),e("div",Bo,[e("div",Do,[e("div",Co,[e("img",{src:(Z=(H=s.result.driverDetail)==null?void 0:H.data)==null?void 0:Z.profile_picture,alt:"Driver",height:"30"},null,8,Mo)])]),e("div",To,[e("div",null,[e("p",Lo,t(s.result.driverDetail?(f=s.result.driverDetail.data)==null?void 0:f.name:"-"),1),e("p",So,t(s.result.ride_driver_comment),1),e("div",zo,[(o(),r(D,null,C(5,(d,v)=>e("i",{key:d,id:"id-"+d,class:te({"ri-star-fill":d<=s.result.ride_driver_rating,"ri-star-line":d>s.result.ride_driver_rating})},null,10,Po)),64))])])])])])])])])):c("",!0),s.proof.length>0?(o(),r("div",Oo,[u(w,null,{default:_(()=>[e("h4",Ao,t(l.$t("request_proof")),1)]),_:1}),e("div",Eo,[e("div",Uo,[(o(!0),r(D,null,C(s.proof,(d,v)=>(o(),r("div",Vo,[e("img",{src:d.proof_image,style:{height:"100%",width:"100%"}},null,8,Fo)]))),256))])])])):c("",!0),e("div",null,[s.successMessage?(o(),r("div",Ho,[e("div",Zo,[a[23]||(a[23]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),a[24]||(a[24]=b()),a[25]||(a[25]=e("strong",null,"Success",-1)),b(" - "+t(s.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:a[1]||(a[1]=(...d)=>s.dismissMessage&&s.dismissMessage(...d)),"aria-label":"Close Success Message"})])])):c("",!0),s.alertMessage?(o(),r("div",jo,[e("div",Io,[a[26]||(a[26]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),a[27]||(a[27]=b()),a[28]||(a[28]=e("strong",null,"Alert",-1)),b(" - "+t(s.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:a[2]||(a[2]=(...d)=>s.dismissMessage&&s.dismissMessage(...d)),"aria-label":"Close Alert Message"})])])):c("",!0)])]}),_:1})}const er=ne(De,[["render",Ro]]);export{er as default};
