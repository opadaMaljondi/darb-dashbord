import{_ as J,Z as W,O as Z,r as l,T,R as G,a3 as K,a as w,g as d,i as y,y as Q,w as M,W as R,l as u,n as t,t as L,M as F,k,J as E,C as S,z as I}from"./vendor-8caf5d52.js";import{L as X}from"./main-cc7bd0ce.js";import{P as $}from"./page-header-18309276.js";import{P as ee}from"./Pagination-0518e4bd.js";import"./footer-502c2797.js";import"./app-974c65a1.js";const se={components:{Layout:X,PageHeader:$,Head:W,Pagination:ee,Multiselect:Z,Link},props:{successMessage:String,alertMessage:String},setup(p){const e=l(""),i=l(null),s=T({title:"",description:"",onboarding_image:""}),x=T({all:"",locked:""}),c=l([]),C=l({}),v=l(!1),m=l(!1),g=l(!1),O=l(null),b=l(p.successMessage||""),B=l(p.alertMessage||""),U=()=>{b.value="",B.value=""},H=()=>{s.reset(),i.value=null,m.value=!0},n=()=>{g.value=!0},V=r=>{i.value=r,s.title=r.title,s.description=r.description,s.onboarding_image=r.onboarding_image,s.clearErrors(),m.value=!0},D=()=>{s.reset(),m.value=!1,i.value=null},A=()=>{x.reset(),h(),g.value=!1},j=()=>{const{name:r,description:o}=s,a={},f={name:{test:()=>!r,message:"Role name is required"},description:{test:()=>!o,message:"Role description is required"}};return Object.keys(f).forEach(_=>{f[_].test()&&(a[_]=f[_].message)}),a},q=async()=>{const r=j();if(Object.keys(r).length===0)try{let o;if(i.value?o=await w.put(`/onboarding-screen/update/${i.value.id}`,s.data()):o=await w.post("/roles",s.data()),o.status===200||o.status===201){b.value=o.data.successMessage;const a=o.data.roles;if(i.value){const f=c.value.findIndex(_=>_.id===i.value.id);f!==-1&&(c.value[f]=a)}else c.value.push(a);m.value=!1,s.reset()}else console.error("Unexpected response status:",o.status)}catch(o){if(console.error("Error handling form submission:",o),o.response&&o.response.status===422){const a=o.response.data.errors;s.errors=a}else console.error("An unexpected error occurred:",o)}else s.errors=r},N=r=>{s.errors[r]=""},Y=()=>{v.value=!1},P=async r=>{try{await w.delete(`/roles/delete/${r}`);const o=c.value.findIndex(a=>a.id===r);o!==-1&&c.value.splice(o,1),v.value=!1,R.fire("Success","Role deleted successfully","success")}catch(o){console.error("Error deleting role:",o),R.fire("Error","Failed to delete role","error")}},z=async r=>{R.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async o=>{if(o.isConfirmed)try{await P(r)}catch(a){console.error("Error deleting role:",a),R.fire("Error","Failed to delete the role","error")}})};G(e,K.debounce(function(r){h(e.value)},300));const h=async(r=1)=>{try{const o=x.data();o.search=e.value,o.page=r;const a=await w.get("/onboarding-screen/list",{params:o});c.value=a.data.roles,C.value=a.data.paginator,g.value=!1}catch(o){console.error("Error fetching roles:",o)}};return{form:s,roles:c,modalShow:v,modalForm:m,deleteItemId:O,selectedRole:i,successMessage:b,alertMessage:B,createRole:H,filterRole:n,editRole:V,cancelEdit:D,handleSubmit:q,deleteModal:z,closeModal:Y,deleteRole:P,dismissMessage:U,hideError:N,searchTerm:e,paginator:C,modalFilter:g,clearFilter:A,fetchRoles:h,filter:x,handlePageChanged:async r=>{h(r)}}},mounted(){this.fetchRoles()}},oe={action:"javascript:void(0);"},te={class:"row"},re={class:"col-sm-12"},ae={class:"mb-3"},ne={key:0,class:"text-danger"},le={class:"col-sm-12"},ie={class:"mb-3"},de={key:0,class:"text-danger"},ce={class:"col-sm-12"},ue={class:"mb-3"},me={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},ge={class:"alert-content"},fe={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},pe={class:"alert-content"};function ve(p,e,i,s,x,c){const C=d("Head"),v=d("PageHeader"),m=d("BCardHeader"),g=d("ImageUp"),O=d("BCardBody"),b=d("BCard"),B=d("BCol"),U=d("BRow"),H=d("Layout");return y(),Q(H,null,{default:M(()=>[u(C,{title:"Onboarding Screen"}),u(v,{title:"Update",pageTitle:"Onboarding Screen"}),u(U,null,{default:M(()=>[u(B,{lg:"6"},{default:M(()=>[u(b,{"no-body":"",id:"tasksList"},{default:M(()=>[u(m,{class:"border-0"}),u(O,{class:"border border-dashed border-end-0 border-start-0"},{default:M(()=>[t("form",oe,[t("div",te,[t("div",re,[t("div",ae,[e[6]||(e[6]=t("label",{for:"title",class:"form-label"},"Onboarding Title",-1)),L(t("input",{type:"text",class:"form-control",placeholder:"Enter Onboarding Title",id:"title","onUpdate:modelValue":e[0]||(e[0]=n=>s.form.title=n)},null,512),[[F,s.form.title]]),s.form.errors.name?(y(),k("span",ne,E(s.form.errors.title),1)):S("",!0)])]),t("div",le,[t("div",ie,[e[7]||(e[7]=t("label",{for:"description",class:"form-label"},"Onboarding Description",-1)),L(t("textarea",{type:"text",class:"form-control",placeholder:"Enter Onboarding Description",id:"description","onUpdate:modelValue":e[1]||(e[1]=n=>s.form.description=n)},null,512),[[F,s.form.description]]),s.form.errors.description?(y(),k("span",de,E(s.form.errors.description),1)):S("",!0)])]),t("div",ce,[t("div",ue,[e[8]||(e[8]=t("label",{for:"onboarding_image",class:"form-label"},"Invoice Logo (450px * 200px - for better resolution)",-1)),u(g,{initialImageUrl:s.form.onboarding_image,onImageSelected:e[2]||(e[2]=n=>p.handleImageSelected(n,"onboarding_image")),onImageRemoved:e[3]||(e[3]=()=>p.handleImageRemoved("onboarding_image"))},null,8,["initialImageUrl"])])]),e[9]||(e[9]=t("div",{class:"col-lg-12"},[t("div",{class:"text-end"},[t("button",{type:"submit",class:"btn btn-primary"},"Update")])],-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[s.successMessage?(y(),k("div",me,[t("div",ge,[e[10]||(e[10]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[11]||(e[11]=I()),e[12]||(e[12]=t("strong",null,"Success",-1)),I(" - "+E(s.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[4]||(e[4]=(...n)=>s.dismissMessage&&s.dismissMessage(...n)),"aria-label":"Close Success Message"})])])):S("",!0),s.alertMessage?(y(),k("div",fe,[t("div",pe,[e[13]||(e[13]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[14]||(e[14]=I()),e[15]||(e[15]=t("strong",null,"Alert",-1)),I(" - "+E(s.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[5]||(e[5]=(...n)=>s.dismissMessage&&s.dismissMessage(...n)),"aria-label":"Close Alert Message"})])])):S("",!0)])]),_:1})}const he=J(se,[["render",ve]]);export{he as default};
