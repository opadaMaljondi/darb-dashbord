import{_ as He,Z as Ne,B as We,$ as Ze,P as Ge,S as Ye,W as U,D as Je,r as h,T as fe,R as K,a0 as Ke,Y as L,o as ve,G as Qe,a1 as Xe,a as H,g as A,i as _,y as $e,w as V,l as C,n as t,z as de,J as u,t as P,K as ce,k as m,L as B,F as q,M as Q,C as w,H as et,X as tt,a9 as ot,p as at}from"./vendor-54d6cb1e.js";import{L as st}from"./main-b839be26.js";import{P as lt}from"./page-header-ff719701.js";import{F as it}from"./FormValidation-cabc17c8.js";import{i as rt}from"./app-cb082573.js";import{_ as nt}from"./UserWebMenu-96301c0f.js";import"./footer-7e4f68d9.js";const dt={data(){return{rightOffcanvas:!1,isPocSame:!1,form:{is_later:"",assign_method:0,name:"",mobile:"",drop_poc_name:"",drop_poc_mobile:""},dateTimeConfig:{enableTime:!0,dateFormat:"Y-m-d H:i:ss"}}},watch:{isPocSame(s){s?(this.form.drop_poc_name=this.form.name,this.form.drop_poc_mobile=this.form.mobile):(this.form.drop_poc_name="",this.form.drop_poc_mobile="")},"form.name"(s){this.isPocSame&&(this.form.drop_poc_name=s)},"form.mobile"(s){this.isPocSame&&(this.form.drop_poc_mobile=s)}},components:{Layout:st,PageHeader:lt,Head:Ne,Link:We,Scrollbar:Ze,FormValidation:it,flatPickr:Ge,UserWebMenu:nt},computed:{...Ye(["permissions"]),transport_options(){let s=[];return this.form.ride_type==="regular"&&(s=this.transport_type_regular,this.form.transport_type=s[0]),s.length===1&&(this.form.transport_type=s[0]),s}},props:{countries:Array,default_flag:String,default_dial_code:String,default_lat:String,default_lng:String,successMessage:String,alertMessage:String,validate:Function,transport_type_for_ride:Array,ride_type_for_ride:Array,is_rental:Boolean,goodsTypes:Array,user:Object,firebaseSettings:Object,transport_type_regular:Array,enable_ride_without_destination:Boolean},methods:{timer(){let s;U.fire({title:"Booking alert!",html:"Your Ride has been Booked <b></b> Successfully.",timer:2e3,timerProgressBar:!0,didOpen:()=>{U.showLoading(),s=setInterval(()=>{U.getContent().querySelector("b").textContent=U.getTimerLeft()},100)},didClose:()=>{clearInterval(s)}}).then(r=>{r.dismiss===U.DismissReason.timer&&console.log("I was closed by the timer")})}},setup(s){const{t:r}=Je(),X=h({dial_code:s.default_dial_code||"",flag:s.default_flag||""}),l=h(!1),I=h(parseFloat(s.default_lat)),$=h(parseFloat(s.default_lng)),j=h(!1),a=fe({mobile:s.user.mobile,name:s.user.name,user_id:s.user.id,pick_address:"",drop_address:"",terminal:null,enterance:null,pick_lat:"",pick_lng:"",drop_lat:null,drop_lng:null,vehicle_type:null,poly_line:"",payment_opt:1,goods_type_id:null,transport_type:"",pickup_poc_name:null,drop_poc_name:null,goods_type_quantity:null,is_later:0,assign_method:0,is_rental:0,rental_package_id:null,ride_type:"regular",stops:null,trip_start_time:null,country:s.default_dial_code,drop_poc_mobile:null}),D=h("-");h(!1),h(!1),K(l,e=>{e?(a.drop_poc_name=a.name,a.drop_poc_mobile=a.mobile):(a.drop_poc_name="",a.drop_poc_mobile="")}),K(()=>a.name,e=>{l.value&&(a.drop_poc_name=e)}),K(()=>a.mobile,e=>{l.value&&(a.drop_poc_mobile=e)}),K(()=>a.vehicle_type,e=>{le({lat:v.pick_lat,lng:v.pick_lng})});const S=h(null),M=h(null),F=h({}),N=h([]),W=h([]),T=h([]);let o=null;const p=h({}),z={pick_address:{required:!0},mobile:{required:!0},vehicle_type:{required:!0}},d=h({}),ae=h(null),x=h([]);h([]);const ge=h([]),v=fe({pick_lat:"",pick_lng:"",drop_lat:"",drop_lng:"",distance:0,distance_in_unit:0,duration:0}),_e=h("0m");K(()=>v.duration,e=>{const i=Math.floor(e/60),c=e%60;_e.value=i>0?`${i}h ${c}m`:`${c}m`});const ie=async()=>{if(se()){if(a.is_rental)return j.value=!1,loadRentalPack(),!1;j.value=!0}else return j.value=!1,!1;ge.value=[];const{pick_lat:e,pick_lng:i,drop_lat:c,drop_lng:f,distance:n,duration:k}=v.data(),g={pick_lat:e,pick_lng:i,distance:n,duration:k};g.transport_type=a.transport_type,c&&(g.drop_lat=c),f&&(g.drop_lng=f),a.is_out_station&&(g.is_out_station=1,a.trip_start_time&&(g.trip_start_time=a.trip_start_time),a.return_time&&(g.return_time=a.return_time)),g.dispatch=1,b.length>0&&(g.stops=JSON.stringify(b));try{const y=await H.post("/dispatch/request/eta",g);x.value=y.data.data,x.value.length>0&&(x.value[0].unit_in_words=="MILES"?(v.distance_in_unit=v.distance*.621371,D.value=r("miles")):(v.distance_in_unit=v.distance,D.value=r("km"))),le(S.value)}catch(y){y.response.data.data==2?(v.distance_in_unit=v.distance*.621371,D.value=r("miles")):(v.distance_in_unit=v.distance,D.value=r("km")),d.value.drop_address=[r("exceeds_maximum_distance_for_ride")],console.error(d)}},he=h(!1),ue=h(s.successMessage||""),ee=h(s.alertMessage||""),ye=()=>{ue.value="",ee.value=""},b=Ke([]),be=5,re=async()=>{var f;const e=[],i={latitude:v.pick_lat,longitude:v.pick_lng};if(e.push(i),Array.isArray(b)&&b.forEach(n=>{const k={latitude:n.latitude,longitude:n.longitude};e.push(k)}),v.drop_lat){const n={latitude:v.drop_lat,longitude:v.drop_lng};e.push(n)}const c={address:e,ride_type:a.ride_type};try{const n=await H.post("/dispatch/serviceVerify",c)}catch(n){if(n.response&&n.response.status===422)d.value=n.response.data.errors;else if(n.response&&n.response.status===500){if(n.response.data.message=="service not available with this location")d.value.pick_address=[r("service_unavailable")];else if(n.response.data.message=="Outstation service not available within this location")delete d.value.pick_address,d.value.drop_address=[r("outstation_service_unavailable")];else if(n.response.data.message=="Pick up and Drop should not be in the same zone")delete d.value.pick_address,d.value.drop_address=[r("same_zone_outstation_unavailable")];else{const k=n.response.data;delete d.value.pick_address,delete d.value.drop_address,e.forEach((g,y)=>{d.value.stop||(d.value.stop={}),y!==0&&(y!==e.length?k[y].available?d.value.stop[y]=[r("ride_service_unavailable")]:delete d.value.stop[y]:k[y].available?d.value.drop_address=[r("ride_service_unavailable")]:delete d.value.drop_address)})}(f=d.value)!=null&&f.stop&&Object.keys(d.value.stop).length==0&&delete d.value.stop}else console.error(r("error_creating_vehicle_price"),n),ee.value=r("failed_to_make_booking_contact_admin")}},ke=e=>{e=="pickup"?a.pick_address.length<3?pickSuggestions.value=[]:setTimeout(()=>{fetchAutocompleteResults(a.pick_address,e)},300):e=="drop"&&(a.drop_address.length<3?T.value=[]:setTimeout(()=>{fetchAutocompleteResults(a.drop_address,e)},300))},se=async()=>{var e;return d.value=ae.value.validate(),v.pick_lat&&await re(),a.is_later&&(a.trip_start_time?delete d.value.trip_start_time:d.value.trip_start_time=[r("required")]),a.is_rental?(a.drop_lat="",a.drop_lng="",v.drop_lat="",v.drop_lng="",v.distance=0,v.duration=0,a.drop_address="",M.value=null,a.poly_line="",p.value={},b.length>0&&(b.forEach((i,c)=>{delete F.value[c]}),b.length=0),a.rental_package_id?delete d.value.rental_package_id:d.value.rental_package_id=[r("required")]):(!s.enable_ride_without_destination||a.is_out_station)&&!a.drop_address&&a.drop_address.length==0?d.value.drop_address=[r("required")]:delete d.value.drop_address,a.is_out_station&&(a.trip_start_time?delete d.value.trip_start_time:d.value.trip_start_time=[r("required")]),a.is_out_station&&a.is_round_trip&&(a.return_time?delete d.value.return_time:d.value.return_time=[r("required")]),a.transport_type=="delivery"&&(a.goods_type_id?delete d.value.goods_type_id:d.value.goods_type_id=[r("required")],a.drop_poc_name?delete d.value.drop_poc_name:d.value.drop_poc_name=[r("required")],a.drop_poc_mobile?delete d.value.drop_poc_mobile:d.value.drop_poc_mobile=[r("required")]),b.length>0&&b.forEach((i,c)=>{d.value.stop||(d.value.stop={}),i.latitude?d.value.stop[c]&&delete d.value.stop[c]:d.value.stop[c]=[r("required")]}),(e=d.value)!=null&&e.stop&&Object.keys(d.value.stop).length==0&&delete d.value.stop,Se(d)},Se=e=>{if(Object.keys(e.value).length>0)return ne.value=!1,!1;if(a.vehicle_type)return delete e.value.stop,ne.value=!0,!0},ne=h(!1),we=()=>{b.length<be?b.push({address:"",latitude:null,longitude:null}):U.fire(r("maximum_stopovers_reached"),r("you_can_add_up_to_5_stopovers_only"),"warning")},Me=e=>{var i;(i=F.value)!=null&&i[e]&&F.value[e].remove(),b.splice(e,1),Z()},Z=()=>{if(!S.value||!M.value||!S.value.getLatLng()||!M.value.getLatLng())return;ie();const e=L.latLngBounds([S.value.getLatLng(),...b.map(i=>L.latLng(i.latitude,i.longitude)),M.value.getLatLng()]);map.value.fitBounds(e,{padding:[50,50]}),o!==null&&map.value&&(a.poly_line="",map.value.removeControl(o)),o=L.Routing.control({waypoints:[S.value.getLatLng(),...b.map(i=>L.latLng(i.latitude,i.longitude)),M.value.getLatLng()],routeWhileDragging:!1,createMarker:function(){return null},addWaypoints:!1,lineOptions:{styles:[{color:"blue",weight:4}]}}).on("routesfound",function(i){const c=i.routes[0];v.distance=c.summary.totalDistance,v.duration=c.summary.totalTime;const f=c.coordinates.map(n=>[n.lat,n.lng]);a.poly_line=polyline.encode(f)}).addTo(map.value)},Le=(e={lat:I.value,lng:I.value})=>{S.value&&S.value.remove();const i=L.icon({iconUrl:"/image/map/pickup.png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});S.value=L.marker([e.lat,e.lng],{icon:i,draggable:!1}).addTo(map.value),M.value&&Z()},Ce=(e={latitude:I.value,longitude:I.value})=>{M.value&&M.value.remove();const i=L.icon({iconUrl:"/image/map/drop.png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});M.value=L.marker([e.lat,e.lng],{icon:i,draggable:!1}).addTo(map.value),S.value&&Z()},Be=async()=>{const e=a.pick_address;if(e.length>2){const i=await H.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}`);N.value=i.data.map(c=>({display_name:c.display_name,lat:c.lat,lon:c.lon}))}else N.value=[]},qe=async()=>{const e=a.drop_address;if(e.length>2){const i=await H.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}`);T.value=i.data.map(c=>({display_name:c.display_name,lat:c.lat,lon:c.lon}))}else T.value=[]},Ie=async e=>{const i=b[e].address;if(i.length>2){const c=await H.get(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(i)}`);W.value[e]=c.data.map(f=>({display_name:f.display_name,lat:f.lat,lon:f.lon}))}else W.value[e]=[]},Ve=e=>{a.pick_address=e.display_name;const i={lat:parseFloat(e.lat),lng:parseFloat(e.lon)};N.value=[],v.pick_lat=i.lat,v.pick_lng=i.lng,S.value?(S.value.setLatLng(i),map.value.setView(i,12)):(map.value.setView(i,12),Le(i),le(i)),M.value&&(Z(),re()),ie()},pe=e=>{const i="0123456789bcdefghjkmnpqrstuvwxyz",c=[16,8,4,2,1];let f=!0,n=-90,k=90,g=-180,y=180,G,Y;if(e){for(let J=0;J<e.length;J++){let te=e.charAt(J),E=i.indexOf(te);for(let O=0;O<5;O++){let oe=c[O];if(f){let R=(g+y)/2;E&oe?g=R:y=R}else{let R=(n+k)/2;E&oe?n=R:k=R}f=!f}}return G=(n+k)/2,Y=(g+y)/2,{lat:G,lon:Y}}},Pe=e=>{a.drop_address=e.display_name;const i={lat:parseFloat(e.lat),lng:parseFloat(e.lon)};T.value=[],v.drop_lat=i.lat,v.drop_lng=i.lng,M.value?M.value.setLatLng(i):(map.value.setView(i,12),Ce(i)),S.value&&(re(),Z())},xe=(e,i)=>{var n;(n=F.value)!=null&&n[e]&&F.value[e].remove();const c=L.icon({iconUrl:"/image/map/"+e+".png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});return L.marker([i.lat,i.lng],{icon:c,draggable:!1}).addTo(map.value)},Ue=(e,i)=>{console.log(b[e]),b[e].address=i.display_name,b[e].latitude=i.lat,b[e].longitude=i.lon;const c={lat:parseFloat(i.lat),lng:parseFloat(i.lon)},f=xe(e,c);F[e]=f,W.value[e]=[],Z()},Re=(e,i,c,f)=>{const k=(c-e)*Math.PI/180,g=(f-i)*Math.PI/180,y=Math.sin(k/2)*Math.sin(k/2)+Math.cos(e*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(g/2)*Math.sin(g/2);return 6371*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))},le=async e=>{const i=firebase.database().ref("drivers");x.value.forEach(c=>{c.driver_time=null,c.driver_distance=null}),i.on("value",c=>{c.forEach(f=>{var Y,J;const n=f.val(),k=n.g,g=pe(k);if(g){const te=Re(e.lat,e.lng,g.lat,g.lon);var y=!0;if(a.vehicle_type){y=!1;var G=(J=(Y=x.value)==null?void 0:Y.find(E=>E.zone_type_id===a.vehicle_type))==null?void 0:J.type_id;G&&n.vehicle_types&&n.vehicle_types.includes(G)&&(y=!0)}if(te<=10&&De(n,te),te<=10&&n.is_available&&n.is_active&&y){const E=L.latLng(g.lat,g.lon),O=`/image/map/${n.vehicle_type_icon}.png`,oe=L.icon({iconUrl:O,iconSize:[30,30]});if(p[n.id])animateDriverMovement(p[n.id],p[n.id].getLatLng(),E,n.bearing,O),p[n.id].setIcon(oe);else{const R=L.marker(E,{icon:oe}).addTo(map.value);p[n.id]=R,animateDriverMovement(R,R.getLatLng(),E,n.bearing,O)}}else p[n.id]&&(p[n.id].remove(),delete p[n.id])}})}),i.on("child_changed",c=>{const f=c.val(),n=f.g,k=pe(n);!f.is_active&&k&&x.value.forEach(g=>{f.vehicle_types.some(y=>y===g.id)&&le({lat:v.pick_lat,lng:v.pick_lng})}),f.lat&&f.lng&&updateDriverMarker(f)})},Ae=e=>e<2?"3 Mins":e>2&&e<5?"5 Mins":e>5&&e<7?"10 Mins":"15 mins",De=(e,i)=>{const c=Ae(i);x.value.forEach(f=>{e.vehicle_types&&e.vehicle_types.includes(f.type_id)&&(!f.driver_distance||f.driver_distance>i)&&(f.driver_time=c)})},me=async()=>{map.value&&(map.value.remove(),map.value=null),map.value=L.map("map",{zoomControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,touchZoom:!1}).setView([I.value,$.value],12),map.value.dragging.disable(),map.value.scrollWheelZoom.disable(),map.value.doubleClickZoom.disable(),map.value.touchZoom.disable(),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(map.value),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){I.value=e.coords.latitude,$.value=e.coords.longitude,map.value.setView({lat:I.value,lng:$.value},12)},function(e){console.error("Error getting location: ",e)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},Fe=async()=>{if(!se())return!1;j.value=!1;const{pick_lat:e,pick_lng:i,drop_lat:c,drop_lng:f}=v.data();e&&(a.pick_lat=e),i&&(a.pick_lng=i),c&&(a.drop_lat=c),f&&(a.drop_lng=f),b.length>0&&(a.stops=JSON.stringify(b)),console.log("booking-info"),console.log(a.data());try{let n;n=await H.post("/web-create-request",a.data());const k=n.data.data.id;if(n.data.success===!0){let g;U.fire({title:"Booking Successfull",html:"Your Ride has been Booked <b></b> Successfully.",timer:2e3,timerProgressBar:!0,didOpen:()=>{U.showLoading(),g=setInterval(()=>{U.getContent().querySelector("b").textContent=U.getTimerLeft()},100)},didClose:()=>{clearInterval(g),window.location.href=`/history/view/${k}`}}).then(()=>{clearInterval(g),window.location.href=`/history/view/${k}`}),a.reset(),v.reset(),x.value=[],await me()}else ee.value=r("failed_to_make_booking_contact_admin")}catch(n){n.response&&n.response.status===422?d.value=n.response.data.errors:(console.error(r("error_creating_vehicle_price"),n),ee.value=r("failed_to_make_booking_contact_admin"))}};ve(async()=>{await rt("en"),await me()}),ve(()=>{var e={apiKey:s.firebaseSettings.firebase_api_key,authDomain:s.firebaseSettings.firebase_auth_domain,databaseURL:s.firebaseSettings.firebase_database_url,projectId:s.firebaseSettings.firebase_project_id,storageBucket:s.firebaseSettings.firebase_storage_bucket,messagingSenderId:s.firebaseSettings.firebase_messaging_sender_id,appId:s.firebaseSettings.firebase_app_id};firebase.apps.length||firebase.initializeApp(e),s.transport_type_regular.length>0&&(a.transport_type=s.transport_type_regular[0]),s.ride_type_for_ride.length>0&&(a.ride_type=s.ride_type_for_ride[0])});const Te=h(""),ze=h(""),Ee=Qe(()=>{}),je=e=>{X.value=e,a.country=e.dial_code},Oe=Xe(async()=>{const e=await H.get("/dispatch/fetch-user-detail",{params:{mobile:a.mobile}});console.log(e.data.data),e.data.data?(console.log("if"),a.name=e.data.data.name,a.user_id=e.data.data.id):(console.log("else"),a.user_id=null,a.name=null)},300);return K(()=>a.vehicle_type,async e=>{e&&await se()}),{form:a,modalShow:he,successMessage:ue,alertMessage:ee,dismissMessage:ye,validationRef:ae,validationRules:z,errors:d,mobile:Te,selectedCountry:X,searchQuery:ze,filteredCountries:Ee,selectCountry:je,validateNumber:Oe,pickupSuggestions:N,dropSuggestions:T,stopSuggestions:W,fetchPickupSuggestions:Be,fetchDropSuggestions:qe,fetchStopSuggestions:Ie,selectPickupSuggestion:Ve,selectDropSuggestion:Pe,selectStopSuggestion:Ue,loadVehicleTypes:ie,etaParam:v,vehicleTypes:x,makeBooking:Fe,stopovers:b,addStopover:we,removeStopover:Me,showModal:ne,formattedDuration:_e,unit:D,bookValidate:se,handleInput:ke,enableBooking:j}}},ct={class:"row mt-4"},_t={class:"col-lg-6 col-sm-6"},ut={class:"p-0 border border-dashed rounded"},pt={class:"d-flex align-items-center"},mt={class:"flex-grow-1"},ft={class:"text-muted mb-1"},vt={class:"fs-16 fw-bold ms-2"},gt={class:"col-lg-6 col-sm-6"},ht={class:"p-0 border border-dashed rounded"},yt={class:"d-flex align-items-center"},bt={class:"flex-grow-1"},kt={class:"text-muted mb-1"},St={class:"fs-16 fw-bold ms-2"},wt={class:"row"},Mt={class:"col-12 col-lg-6",style:{"max-height":"500px","overflow-y":"auto"}},Lt={class:"row"},Ct={class:"d-flex align-items-center mt-4"},Bt={class:"card-title mb-3 flex-grow-1"},qt={class:"col-6"},It={class:"mb-3"},Vt={for:"type",class:"form-label"},Pt={disabled:"",value:""},xt={value:"0"},Ut={value:"1"},Rt={class:"col-6"},At={class:"col-12"},Dt={class:"mb-3"},Ft={for:"type",class:"form-label"},Tt={disabled:"",value:""},zt=["value"],Et={class:"col-12"},jt={class:"mb-3"},Ot={class:"d-flex align-items-center justify-content-between"},Ht={for:"pickup",class:"form-label"},Nt=["placeholder"],Wt={key:0},Zt=["onClick","value"],Gt={class:"mb-3"},Yt=["for"],Jt={class:"d-flex align-items-center"},Kt=["onUpdate:modelValue","onInput","placeholder","id"],Qt=["onClick"],Xt={key:0},$t=["onClick","value"],eo={key:1,class:"text-danger"},to={key:1,class:"col-12"},oo={class:"mb-3"},ao={for:"drop",class:"form-label"},so=["placeholder"],lo={key:0},io=["onClick","value"],ro={key:2,class:"card-title mb-2 flex-grow-1 mt-4"},no={key:3,class:"px-2 mb-2"},co={class:"badge bg-dark-subtle text-dark p-1 fs-12 text-center"},_o={class:"form-check m-2 mx-3"},uo={class:"form-check-label mt-1",for:"poc"},po={key:4,class:"col-6"},mo={class:"mb-3"},fo={for:"poc_name",class:"form-label"},vo=["placeholder","disabled"],go={key:5,class:"col-6"},ho={class:"mb-3"},yo={for:"poc_mobile",class:"form-label"},bo=["placeholder","disabled"],ko={key:6,class:"card-title mb-2 flex-grow-1 mt-4"},So={key:7,class:"col-6"},wo={class:"mb-3"},Mo={for:"goods_type",class:"form-label"},Lo={disabled:"",value:""},Co=["value"],Bo={key:8,class:"col-6"},qo={class:"mb-3"},Io={for:"goods_type_quantity",class:"form-label"},Vo=["placeholder"],Po={key:9,class:"col-12"},xo={class:"mb-3"},Uo={for:"dispatch-datepicker",class:"form-label"},Ro={key:10,class:"col-12"},Ao={class:"card-title mb-3 flex-grow-1 mt-4"},Do={class:"mb-3",style:{"max-width":"650px","overflow-x":"auto"}},Fo={class:"d-flex mt-5"},To=["for"],zo=["id","value"],Eo={class:"select-checkbox-btn-content"},jo={class:"w-32 me-4 cursor-pointer"},Oo={class:"text-center mt-2 ms-4"},Ho={class:"w-32 h-32 flex-none image-fit rounded-circle"},No=["src"],Wo={class:"text-center mt-2 amount text-dark"},Zo={class:"text-center mt-2"},Go={key:0,class:"bottom-modal"},Yo={class:"modal-content"},Jo={class:"col-12 col-lg-6"},Ko={class:"mb-3 text-center m-auto"},Qo={id:"map",style:{height:"500px"}};function Xo(s,r,X,l,I,$){const j=A("Head"),a=A("UserWebMenu"),D=A("BCardHeader"),S=A("BCol"),M=A("BRow"),F=A("flat-pickr"),N=A("FormValidation"),W=A("BCardBody"),T=A("BCard");return _(),$e(T,null,{default:V(()=>[C(j,{title:"Taxi Ride"}),C(D,{class:"border-0"},{default:V(()=>[C(a,{user:X.user},null,8,["user"])]),_:1}),C(M,null,{default:V(()=>[C(S,{lg:"12"},{default:V(()=>[C(T,{"no-body":"",id:"tasksList"},{default:V(()=>[C(D,{class:"border-0"},{default:V(()=>[C(M,null,{default:V(()=>[C(S,{lg:"6"}),C(S,{lg:"6"},{default:V(()=>[t("div",ct,[t("div",_t,[t("div",ut,[t("div",pt,[r[15]||(r[15]=t("div",{class:"avatar-sm me-2"},[t("div",{class:"avatar-title rounded bg-transparent text-success fs-24"},[t("i",{class:"ri-map-pin-time-line"})])],-1)),t("div",mt,[t("p",ft,[de(u(s.$t("duration"))+" :",1),t("span",vt,u(l.formattedDuration),1)])])])])]),t("div",gt,[t("div",ht,[t("div",yt,[r[16]||(r[16]=t("div",{class:"avatar-sm me-2"},[t("div",{class:"avatar-title rounded bg-transparent text-success fs-24"},[t("i",{class:"ri-pin-distance-line"})])],-1)),t("div",bt,[t("p",kt,[de(u(s.$t("distance"))+" :",1),t("span",St,u((l.etaParam.distance_in_unit/1e3).toFixed(2))+" "+u(l.unit),1)])])])])])])]),_:1})]),_:1})]),_:1}),C(W,{class:"border border-dashed border-end-0 border-start-0"},{default:V(()=>[t("form",{onSubmit:r[14]||(r[14]=at((...o)=>s.handleSubmit&&s.handleSubmit(...o),["prevent"]))},[C(N,{form:l.form,rules:l.validationRules,ref:"validationRef"},{default:V(()=>[t("div",wt,[t("div",Mt,[t("div",Lt,[t("div",Ct,[t("h4",Bt,u(s.$t("ride_info")),1)]),t("div",qt,[t("div",It,[t("label",Vt,u(s.$t("booking_type")),1),P(t("select",{id:"type",class:"form-select","onUpdate:modelValue":r[0]||(r[0]=o=>l.form.is_later=o)},[t("option",Pt,u(s.$t("choose_type")),1),t("option",xt,u(s.$t("instant_booking")),1),t("option",Ut,u(s.$t("book_later")),1)],512),[[ce,l.form.is_later]]),(_(!0),m(q,null,B(l.errors.is_later,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])]),t("div",Rt,[t("div",At,[t("div",Dt,[t("label",Ft,u(s.$t("transport_type")),1),P(t("select",{id:"type",class:"form-select","onUpdate:modelValue":r[1]||(r[1]=o=>l.form.transport_type=o)},[t("option",Tt,u(s.$t("choose_transport_type")),1),(_(!0),m(q,null,B($.transport_options,(o,p)=>(_(),m("option",{key:p,value:o},u(o.charAt(0).toUpperCase()+o.slice(1)),9,zt))),128))],512),[[ce,l.form.transport_type]]),(_(!0),m(q,null,B(l.errors.transport_type,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])]),t("div",Et,[t("div",jt,[t("div",Ot,[t("label",Ht,u(s.$t("pickup_location")),1)]),P(t("input",{type:"text",id:"pickup",class:"form-control","onUpdate:modelValue":r[2]||(r[2]=o=>l.form.pick_address=o),onInput:r[3]||(r[3]=(...o)=>l.fetchPickupSuggestions&&l.fetchPickupSuggestions(...o)),placeholder:s.$t("enter_pickup")},null,40,Nt),[[Q,l.form.pick_address]]),l.pickupSuggestions.length>0?(_(),m("ul",Wt,[(_(!0),m(q,null,B(l.pickupSuggestions,(o,p)=>(_(),m("li",{key:p,onClick:z=>l.selectPickupSuggestion(o),value:o.display_name},u(o.display_name),9,Zt))),128))])):w("",!0)])]),l.form.ride_type=="regular"?(_(!0),m(q,{key:0},B(l.stopovers,(o,p)=>{var z;return _(),m("div",{class:"col-12",key:p},[t("div",Gt,[t("label",{for:`stop-${p}`,class:"form-label"},u(s.$t("stop_location")),9,Yt),t("div",Jt,[P(t("input",{type:"text",class:"form-control mx-1","onUpdate:modelValue":d=>o.address=d,onInput:d=>l.fetchStopSuggestions(p),placeholder:"Enter stop "+(p+1),id:`stop-${p}`},null,40,Kt),[[Q,o.address]]),t("i",{class:"bx bx-trash text-danger fs-22 btn",onClick:d=>l.removeStopover(p)},null,8,Qt)]),((z=l.stopSuggestions[p])==null?void 0:z.length)>0?(_(),m("ul",Xt,[(_(!0),m(q,null,B(l.stopSuggestions[p],(d,ae)=>(_(),m("li",{key:ae,onClick:x=>l.selectStopSuggestion(p,d),value:d.display_name},u(d.display_name),9,$t))),128))])):w("",!0),l.form.errors[`stop-${p}`]?(_(),m("span",eo,u(l.form.errors[`stop-${p}`]),1)):w("",!0)])])}),128)):w("",!0),l.form.ride_type=="regular"?(_(),m("div",to,[t("div",oo,[t("label",ao,u(s.$t("drop_location")),1),P(t("input",{type:"text",class:"form-control","onUpdate:modelValue":r[4]||(r[4]=o=>l.form.drop_address=o),onInput:r[5]||(r[5]=(...o)=>l.fetchDropSuggestions&&l.fetchDropSuggestions(...o)),placeholder:s.$t("enter_drop"),id:"drop"},null,40,so),[[Q,l.form.drop_address]]),l.dropSuggestions.length>0?(_(),m("ul",lo,[(_(!0),m(q,null,B(l.dropSuggestions,(o,p)=>(_(),m("li",{key:p,onClick:z=>l.selectDropSuggestion(o),value:o.display_name},u(o.display_name),9,io))),128))])):w("",!0),(_(!0),m(q,null,B(l.errors.drop_address,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])):w("",!0),l.form.transport_type=="delivery"?(_(),m("h4",ro,u(s.$t("poc_info")),1)):w("",!0),l.form.transport_type=="delivery"?(_(),m("div",no,[t("span",co,[t("div",_o,[P(t("input",{class:"form-check-input",type:"checkbox",id:"poc","onUpdate:modelValue":r[6]||(r[6]=o=>I.isPocSame=o)},null,512),[[et,I.isPocSame]]),t("label",uo,u(s.$t("check_if_poc_info_as_same_as_personal_info")),1)])])])):w("",!0),l.form.transport_type=="delivery"?(_(),m("div",po,[t("div",mo,[t("label",fo,u(s.$t("drop_poc_name")),1),P(t("input",{type:"text",class:"form-control","onUpdate:modelValue":r[7]||(r[7]=o=>l.form.drop_poc_name=o),placeholder:s.$t("enter_poc_name"),id:"poc_name",disabled:I.isPocSame},null,8,vo),[[Q,l.form.drop_poc_name]]),(_(!0),m(q,null,B(l.errors.drop_poc_name,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])):w("",!0),l.form.transport_type=="delivery"?(_(),m("div",go,[t("div",ho,[t("label",yo,u(s.$t("drop_poc_mobile")),1),P(t("input",{type:"text",class:"form-control","onUpdate:modelValue":r[8]||(r[8]=o=>l.form.drop_poc_mobile=o),placeholder:s.$t("enter_poc_mobile"),id:"poc_mobile",disabled:I.isPocSame},null,8,bo),[[Q,l.form.drop_poc_mobile]]),(_(!0),m(q,null,B(l.errors.poc_mobile,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])):w("",!0),l.form.transport_type=="delivery"?(_(),m("h4",ko,u(s.$t("select_goods")),1)):w("",!0),l.form.transport_type=="delivery"?(_(),m("div",So,[t("div",wo,[t("label",Mo,u(s.$t("goods_type")),1),P(t("select",{id:"goods_type",class:"form-select","onUpdate:modelValue":r[9]||(r[9]=o=>l.form.goods_type_id=o)},[t("option",Lo,u(s.$t("choose_type")),1),(_(!0),m(q,null,B(X.goodsTypes,o=>(_(),m("option",{key:o.id,value:o.id},u(o.goods_type_name),9,Co))),128))],512),[[ce,l.form.goods_type_id]]),(_(!0),m(q,null,B(l.errors.goods_type_id,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])):w("",!0),l.form.transport_type=="delivery"?(_(),m("div",Bo,[t("div",qo,[t("label",Io,u(s.$t("goods_quantity")),1),P(t("input",{type:"text",class:"form-control","onUpdate:modelValue":r[10]||(r[10]=o=>l.form.goods_type_quantity=o),placeholder:s.$t("enter_quantity"),id:"goods_type_quantity"},null,8,Vo),[[Q,l.form.goods_type_quantity]]),(_(!0),m(q,null,B(l.errors.goods_type_quantity,(o,p)=>(_(),m("span",{key:p,class:"text-danger"},u(o),1))),128))])])):w("",!0),l.form.is_later==="1"?(_(),m("div",Po,[t("div",xo,[t("label",Uo,u(s.$t("date")),1),C(F,{placeholder:s.$t("select_date"),modelValue:l.form.trip_start_time,"onUpdate:modelValue":r[11]||(r[11]=o=>l.form.trip_start_time=o),config:I.dateTimeConfig,class:"form-control flatpickr-input",id:"dispatch-datepicker"},null,8,["placeholder","modelValue","config"])])])):w("",!0),l.vehicleTypes.length>0?(_(),m("div",Ro,[t("h4",Ao,u(s.$t("select_vehicle")),1),t("div",Do,[t("div",Fo,[(_(!0),m(q,null,B(l.vehicleTypes,(o,p)=>(_(),m("div",{key:p,class:"select-checkbox-btn text-center"},[t("label",{for:"vehicle_"+o.zone_type_id,class:"select-checkbox-btn-wrapper"},[P(t("input",{id:"vehicle_"+o.zone_type_id,name:"types",type:"radio",value:o.zone_type_id,"onUpdate:modelValue":r[12]||(r[12]=z=>l.form.vehicle_type=z),class:"select-checkbox-btn-input"},null,8,zo),[[tt,l.form.vehicle_type]]),t("span",Eo,[t("a",jo,[t("div",Oo,[r[17]||(r[17]=t("i",{class:"bx bx-time-five mx-1"},null,-1)),de(u(o.driver_time||"--"),1)]),t("div",Ho,[t("img",{alt:"",class:"rounded-circle img-fluid",src:o.vehicle_icon},null,8,No)]),t("div",Wo,u(o.currency)+" "+u(o.total),1),t("div",Zo,u(o.name),1)])])],8,To)]))),128))])]),C(ot,{name:"slide-up"},{default:V(()=>[l.showModal?(_(),m("div",Go,[t("div",Yo,[t("button",{type:"submit",onClick:r[13]||(r[13]=(...o)=>l.makeBooking&&l.makeBooking(...o)),class:"btn btn-primary",style:{width:"50%",margin:"auto"}},u(s.$t("make_booking")),1)])])):w("",!0)]),_:1})])):w("",!0)])]),t("div",Jo,[t("div",Ko,[t("div",Qo,u(s.$t("map_loading")),1)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const ia=He(dt,[["render",Xo],["__scopeId","data-v-0b12a459"]]);export{ia as default};
