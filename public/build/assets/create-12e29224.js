import{_ as F,aC as P,i as r,k as l,a2 as T,Z as A,O as Q,D as z,T as G,r as y,G as I,g as _,y as J,w as C,a as V,N as K,l as w,n as e,J as n,z as m,t as f,M as h,L as g,F as b,C as v,K as H,p as Z}from"./vendor-54d6cb1e.js";import{L as W}from"./main-b839be26.js";import{P as X}from"./page-header-ff719701.js";import{i as Y}from"./imageUpload-bad454a2.js";import{F as $}from"./FormValidation-cabc17c8.js";import"./footer-7e4f68d9.js";import"./app-cb082573.js";/* empty css                                                    */const ee={props:{options:{type:Object,required:!0},height:Number,width:Number},data(){return{style:{width:this.width?`${this.width}px`:"100%",height:this.height?`${this.height}px`:"100%",overflow:"hidden",margin:"0 auto"}}},mounted(){this.anim=P.loadAnimation({container:this.$refs.lavContainer,renderer:"svg",loop:this.options.loop!==!1,autoplay:this.options.autoplay!==!1,animationData:this.options.animationData,rendererSettings:this.options.rendererSettings}),this.$emit("animCreated",this.anim)}};function se(s,t,u,o,M,B){return r(),l("div",{style:T(M.style),ref:"lavContainer"},null,4)}const te=F(ee,[["render",se]]);const oe={components:{Layout:W,PageHeader:X,Head:A,Multiselect:Q,FormValidation:$,imageUpload:Y,lottie:te},props:{successMessage:String,alertMessage:String,app_for:String,countries:Array,default_dial_code:String,default_flag:String,default_country_id:Number,owner:Object,serviceLocation:Object,validate:Function},setup(s){const{t}=z(),u=s.serviceLocation,o=G({company_name:s.owner?s.owner.company_name:null,name:s.owner?s.owner.name:null,email:s.owner?s.owner.email:null,mobile:s.owner?s.owner.mobile:null,password:null,confirm_password:null,transport_type:s.owner?s.owner.transport_type:"",service_location_id:s.owner?s.owner.service_location_id:u.id,country:s.owner&&s.owner.user.country||s.default_country_id}),M=y(""),B=y({dial_code:s.default_dial_code||"",flag:s.default_flag||""}),D=I(()=>s.countries.filter(i=>i.name.toLowerCase().includes(M.value.toLowerCase()))),R=i=>{i&&(B.value=i,o.country=i.id)},U={company_name:{required:!0},name:{required:!0},mobile:{required:!0,regex:/^\d+$/},transport_type:{required:!0},service_location_id:{required:!0}},S=y(null),d=y({}),x=y(s.successMessage||""),k=y(s.alertMessage||""),L=y(!1),N=()=>{x.value="",k.value=""},a=new Date;new Date(a).setDate(a.getDate()+1);const O=async()=>{try{return o.email&&(!s.owner||o.email!==s.owner.email)?!!(await V.get(`/manage-owners/check-email/${o.email}${s.owner?`/${s.owner.id}`:""}`)).data.exists:!1}catch(i){return console.error(t("error_handling_form_submission"),i),i.response&&i.response.status===422?d.value=i.response.data.errors:console.error(t("an_unexpected_error_occurred"),i),!0}},j=async()=>{try{return o.mobile&&(!s.owner||o.mobile!==s.owner.mobile)?!!(await V.get(`/manage-owners/check-mobile/${o.mobile}${s.owner?`/${s.owner.id}`:""}`)).data.exists:!1}catch(i){return console.error(t("error_handling_form_submission"),i),i.response&&i.response.status===422?d.value=i.response.data.errors:console.error(t("an_unexpected_error_occurred"),i),!0}};return{form:o,successMessage:x,alertMessage:k,handleSubmit:async()=>{const[i,q]=await Promise.all([j(),O()]);d.value={},i?d.value.mobile=t("mobile_number_already_exists"):delete d.value.mobile,q?d.value.email=t("email_already_exists"):delete d.value.email,o.password&&o.password!==o.confirm_password?Object.assign(d,{password:[t("password_mismatch")]}):delete d.value.password;const E=S.value.validate();if(d.value={...d.value,...E},!(d.value&&Object.keys(d.value).length>0))try{let p;L.value=!0,s.owner&&s.owner.id?p=await V.post(`/manage-owners/update/${s.owner.id}`,o.data()):p=await V.post("/manage-owners/store",o.data()),p.status===201?(x.value=t("owner_created_successfully"),o.reset(),K.get("/manage-owners")):k.value=t("failed_to_create_owner")}catch(p){p.response&&p.response.status===422?d.value=p.response.data.errors:(console.error(t("error_creating_owner"),p),k.value=t("failed_to_create_owner_catch"))}},selectCountry:R,filteredCountries:D,selectedCountry:B,searchQuery:M,dismissMessage:N,validationRules:U,validationRef:S,errors:d,isButtonDisabled:L}}},ae={class:"mb-4"},ne={class:"mb-1"},re={class:"text-muted"},le={class:"row"},ie={class:"col-sm-6"},de={class:"mb-3"},ce={for:"company_name",class:"form-label"},me=["placeholder"],ue={class:"col-sm-6"},_e={class:"mb-3"},fe={for:"name",class:"form-label"},ge=["placeholder"],be={class:"col-sm-6"},pe={class:"form-label"},we={class:"input-group","data-input-flag":""},ye={class:"btn btn-light border",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},he=["src"],ve={class:"ms-2 country-codeno"},ke=["placeholder"],Ce={class:"dropdown-menu w-100"},Me={class:"p-2 px-3 pt-1 searchlist-input"},xe=["placeholder"],Be={class:"list-unstyled dropdown-menu-list mb-0"},Se=["onClick"],Le=["src"],Ve={class:"align-middle"},De={key:0,class:"text-danger"},Re={class:"col-sm-6"},Ue={class:"mb-3"},Ne={for:"email",class:"form-label"},He=["placeholder"],Fe={key:0,class:"col-sm-6"},Oe={class:"mb-3"},je={for:"password",class:"form-label"},qe={key:0,class:"text-danger"},Ee=["placeholder"],Pe={key:1,class:"col-sm-6"},Te={class:"mb-3"},Ae={for:"confirm_password",class:"form-label"},Qe={key:0,class:"text-danger"},ze=["placeholder"],Ge={class:"col-sm-6"},Ie={class:"mb-3"},Je={for:"select_area",class:"form-label"},Ke={value:"",disabled:""},Ze=["value"],We={class:"col-sm-6"},Xe={class:"mb-3"},Ye={for:"select_transport_type",class:"form-label"},$e={disabled:"",value:""},es={value:"taxi"},ss={value:"delivery"},ts={value:"both"},os={class:"d-flex align-items-end gap-3 mt-4"},as=["disabled"],ns={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},rs={class:"alert-content"},ls={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},is={class:"alert-content"};function ds(s,t,u,o,M,B){const D=_("Head"),R=_("PageHeader"),U=_("BCardHeader"),S=_("FormValidation"),d=_("BCardBody"),x=_("BCard"),k=_("BCol"),L=_("BRow"),N=_("Layout");return r(),J(N,null,{default:C(()=>[w(D,{title:"Manage Owners"}),w(R,{title:u.owner?s.$t("edit"):s.$t("create"),pageTitle:s.$t("manage_owners"),pageLink:"/manage-owners"},null,8,["title","pageTitle"]),w(L,null,{default:C(()=>[w(k,{lg:"12"},{default:C(()=>[w(x,{"no-body":"",id:"tasksList"},{default:C(()=>[w(U,{class:"border-0"}),w(d,{class:"border border-dashed border-end-0 border-start-0 form-steps"},{default:C(()=>[e("form",{onSubmit:t[9]||(t[9]=Z((...a)=>o.handleSubmit&&o.handleSubmit(...a),["prevent"])),class:"form-steps"},[t[18]||(t[18]=e("input",{type:"text",name:"fakeusernameremembered",style:{display:"none"}},null,-1)),t[19]||(t[19]=e("input",{type:"password",name:"fakepasswordremembered",style:{display:"none"}},null,-1)),w(S,{form:o.form,rules:o.validationRules,ref:"validationRef"},{default:C(()=>[e("div",null,[e("div",ae,[e("div",null,[e("h5",ne,n(s.$t("basic_information")),1),e("p",re,n(s.$t("fill_all_information_as_below")),1)])]),e("div",le,[e("div",ie,[e("div",de,[e("label",ce,[m(n(s.$t("company_name"))+" ",1),t[12]||(t[12]=e("span",{class:"text-danger"},"*",-1))]),f(e("input",{type:"text",class:"form-control",placeholder:s.$t("enter_company_name"),id:"company_name","onUpdate:modelValue":t[0]||(t[0]=a=>o.form.company_name=a)},null,8,me),[[h,o.form.company_name]]),(r(!0),l(b,null,g(o.errors.company_name,(a,c)=>(r(),l("span",{key:c,class:"text-danger"},n(a),1))),128))])]),e("div",ue,[e("div",_e,[e("label",fe,[m(n(s.$t("name"))+" ",1),t[13]||(t[13]=e("span",{class:"text-danger"},"*",-1))]),f(e("input",{type:"text",class:"form-control",placeholder:s.$t("enter_name"),id:"name","onUpdate:modelValue":t[1]||(t[1]=a=>o.form.name=a)},null,8,ge),[[h,o.form.name]]),(r(!0),l(b,null,g(o.errors.name,(a,c)=>(r(),l("span",{key:c,class:"text-danger"},n(a),1))),128))])]),e("div",be,[e("div",null,[e("label",pe,[m(n(s.$t("mobile"))+" ",1),t[14]||(t[14]=e("span",{class:"text-danger"},"*",-1))]),e("div",we,[e("button",ye,[e("img",{src:o.selectedCountry.flag,alt:"flag",height:"20",class:"country-flagimg rounded"},null,8,he),e("span",ve,n(o.selectedCountry.dial_code),1)]),f(e("input",{type:"text",class:"form-control rounded-end flag-input","onUpdate:modelValue":t[2]||(t[2]=a=>o.form.mobile=a),placeholder:s.$t("enter_number")},null,8,ke),[[h,o.form.mobile]]),e("div",Ce,[e("div",Me,[f(e("input",{type:"text",class:"form-control form-control-sm border search-countryList",placeholder:s.$t("search_country_name_or_country_code"),"onUpdate:modelValue":t[3]||(t[3]=a=>o.searchQuery=a)},null,8,xe),[[h,o.searchQuery]])]),e("ul",Be,[(r(!0),l(b,null,g(o.filteredCountries,a=>(r(),l("li",{key:a.id},[e("a",{href:"javascript:void(0);",class:"dropdown-item notify-item language py-2",onClick:c=>o.selectCountry(a)},[e("img",{src:a.flag,alt:"flag",class:"me-2 rounded",height:"18"},null,8,Le),e("span",Ve,n(a.name)+" "+n(a.dial_code),1)],8,Se)]))),128))])])]),o.errors.mobile?(r(),l("span",De,n(o.errors.mobile),1)):v("",!0)])]),e("div",Re,[e("div",Ue,[e("label",Ne,[m(n(s.$t("email"))+" ",1),t[15]||(t[15]=e("span",{class:"text-danger"},"*",-1))]),f(e("input",{type:"email",class:"form-control",placeholder:s.$t("enter_email"),id:"email","onUpdate:modelValue":t[4]||(t[4]=a=>o.form.email=a)},null,8,He),[[h,o.form.email]]),(r(!0),l(b,null,g(o.errors.email,(a,c)=>(r(),l("span",{key:c,class:"text-danger"},n(a),1))),128))])]),u.owner?v("",!0):(r(),l("div",Fe,[e("div",Oe,[e("label",je,[m(n(s.$t("password"))+" ",1),u.owner?v("",!0):(r(),l("span",qe,"*"))]),f(e("input",{type:"password",class:"form-control",placeholder:s.$t("enter_password"),id:"password","onUpdate:modelValue":t[5]||(t[5]=a=>o.form.password=a)},null,8,Ee),[[h,o.form.password]]),(r(!0),l(b,null,g(o.errors.password,(a,c)=>(r(),l("span",{key:c,class:"text-danger"},n(a),1))),128))])])),u.owner?v("",!0):(r(),l("div",Pe,[e("div",Te,[e("label",Ae,[m(n(s.$t("confirm_password"))+" ",1),u.owner?v("",!0):(r(),l("span",Qe,"*"))]),f(e("input",{type:"password",class:"form-control",placeholder:s.$t("enter_confirm_password"),id:"confirm_password","onUpdate:modelValue":t[6]||(t[6]=a=>o.form.confirm_password=a)},null,8,ze),[[h,o.form.confirm_password]]),(r(!0),l(b,null,g(o.errors.confirm_password,(a,c)=>(r(),l("span",{key:c,class:"text-danger"},n(a),1))),128))])])),e("div",Ge,[e("div",Ie,[e("label",Je,n(s.$t("select_area")),1),f(e("select",{class:"form-control",id:"select_area","onUpdate:modelValue":t[7]||(t[7]=a=>o.form.service_location_id=a)},[e("option",Ke,n(s.$t("select_area")),1),(r(!0),l(b,null,g(u.serviceLocation,a=>(r(),l("option",{key:a.id,value:a.id},n(a.name),9,Ze))),128))],512),[[H,o.form.service_location_id]]),(r(!0),l(b,null,g(o.errors.service_location_id,(a,c)=>(r(),l("span",{key:c,class:"text-danger"},n(a),1))),128))])]),e("div",We,[e("div",Xe,[e("label",Ye,[m(n(s.$t("select_transport_type"))+" ",1),t[16]||(t[16]=e("span",{class:"text-danger"},"*",-1))]),f(e("select",{id:"select_transport_type",class:"form-select","onUpdate:modelValue":t[8]||(t[8]=a=>o.form.transport_type=a)},[e("option",$e,n(s.$t("select_transport_type")),1),e("option",es,n(s.$t("taxi")),1),e("option",ss,n(s.$t("delivery")),1),e("option",ts,n(s.$t("both")),1)],512),[[H,o.form.transport_type]]),(r(!0),l(b,null,g(o.errors.transport_type,(a,c)=>(r(),l("span",{key:c,class:"text-danger"},n(a),1))),128))])]),e("div",os,[e("button",{type:"submit",class:"btn btn-success btn-label right ms-auto",disabled:o.isButtonDisabled},[m(n(s.$t("submit"))+" ",1),t[17]||(t[17]=e("i",{class:"ri-check-fill label-icon align-middle fs-16 ms-2"},null,-1))],8,as)])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[o.successMessage?(r(),l("div",ns,[e("div",rs,[t[20]||(t[20]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[21]||(t[21]=e("strong",null,"Success",-1)),m(" - "+n(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[10]||(t[10]=(...a)=>o.dismissMessage&&o.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):v("",!0),o.alertMessage?(r(),l("div",ls,[e("div",is,[t[22]||(t[22]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[23]||(t[23]=e("strong",null,"Alert",-1)),m(" - "+n(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[11]||(t[11]=(...a)=>o.dismissMessage&&o.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):v("",!0)])]),_:1})}const ys=F(oe,[["render",ds]]);export{ys as default};
