import{_ as J,Z as K,O as W,P as Z,B as Q,D as X,r as f,T as ee,R as te,S as se,g as c,i as u,y as oe,w as _,a as T,W as h,N as O,l as i,n as e,J as r,t as ae,K as re,k as g,L as F,F as R,p as S,z as b,C as E}from"./vendor-54d6cb1e.js";import{L as ne}from"./main-b839be26.js";import{P as le}from"./page-header-ff719701.js";import{P as ie}from"./Pagination-b5e3d5c9.js";import{s as de}from"./search-06463c60.js";import{s as ce}from"./searchbar-3bdb3315.js";import{u as ue}from"./footer-7e4f68d9.js";import{_ as me}from"./search-file-ab3e1046.js";import"./app-cb082573.js";const fe={data(){return{rightOffcanvas:!1}},components:{Layout:ne,PageHeader:le,Head:K,Pagination:ie,Multiselect:W,flatPickr:Z,Link:Q,search:de,searchbar:ce},props:{successMessage:String,alertMessage:String,serviceLocations:{type:Object,required:!0}},setup(n){const{t}=X(),{selectedLocation:L}=ue(),s=f(""),w=ee({service_location_id:"all",limit:10}),p=f([]),v=f({}),C=f(!1),m=f(!1),D=f(null),B=f({}),k=f(n.successMessage||""),P=f(n.alertMessage||""),q=()=>{k.value="",P.value=""},H=()=>{m.value=!0},N=()=>{w.reset(),y(),m.value=!1},a=()=>{C.value=!1},x=async o=>{try{await T.delete(`/delete-request-drivers/delete/${o}`);const l=p.value.findIndex(d=>d.id===o);l!==-1&&p.value.splice(l,1),C.value=!1,h.fire(t("success"),t("delete_request_drivers_deleted_successfully"),"success")}catch{h.fire(t("error"),t("failed_to_delete_request_drivers"),"error")}},M=async o=>{h.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await x(o)}catch(d){console.error(t("error_deleting_data"),d),h.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},V=async o=>{O.get(`/approved-drivers/view-profile/${o.id}`)},y=async(o=1)=>{try{const l=w.data();l.search=s.value,l.page=o;const d=await T.get("/delete-request-drivers/list",{params:l});p.value=d.data.results,v.value=d.data.paginator,z(v.value.total),m.value=!1}catch(l){console.error(t("error_fetching_delete_request_drivers"),l)}},A=async o=>{y(o)},U=async o=>{O.get(`/delete-request-drivers/edit/${o.id}`)},Y=async o=>{s.value=o,y()},$=o=>(v.value.current_page-1)*v.value.per_page+o+1,j=async o=>{if(!o){console.error("Invalid user data:",o);return}h.fire({title:"Are you sure?",text:"Do you want to restore this user?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, restore it!"}).then(async l=>{if(l.isConfirmed)try{const d=await T.patch(`/users/restore/${o}`);p.value=p.value.filter(I=>I.user_id!==o),h.fire("Restored!",d.data.message,"success")}catch(d){console.error("Error restoring user:",d),h.fire("Error!","Failed to restore user.","error")}})},z=()=>{B.value=[10,25,50,100,200,500]},G=()=>{y()};return te(L,o=>{console.log("value",o),w.service_location_id=o,y()}),{results:p,modalShow:C,deleteItemId:D,successMessage:k,alertMessage:P,filterData:H,deleteModal:M,closeModal:a,deleteData:x,dismissMessage:q,SerialNumber:$,fetchSearch:Y,searchTerm:s,paginator:v,modalFilter:m,clearFilter:N,fetchDatas:y,filter:w,handlePageChanged:A,editData:U,viewProfile:V,restoreUser:j,paginatorOption:B,changeEntriesPerPage:G,selectedLocation:L}},computed:{...se(["permissions"])},mounted(){this.filter.service_location_id=this.selectedLocation,this.fetchDatas()}},_e={class:"d-flex align-items-center mt-3"},ge={class:"me-2 text-muted"},pe=["value"],ve={class:"ms-2 text-muted"},he={class:"d-flex align-items-center gap-2"},be={class:"table-responsive"},ye={class:"table align-middle position-relative table-nowrap"},we={class:"table-active"},Ce={scope:"col"},Be={scope:"col"},Me={scope:"col"},ke={scope:"col"},Pe={scope:"col"},xe={key:0},Se=["onClick"],Le={class:"dropdown"},De={class:"dropdown-menu dropdown-menu-end"},qe=["onClick"],He=["onClick"],Ne=["onClick"],Te={key:1},Ee={colspan:"7",class:"text-center"},Oe={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Fe={class:"alert-content"},Re={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ve={class:"alert-content"};function Ae(n,t,L,s,w,p){const v=c("Head"),C=c("PageHeader"),m=c("BCol"),D=c("searchbar"),B=c("BRow"),k=c("BCardHeader"),P=c("BCardBody"),q=c("BCard"),H=c("Pagination"),N=c("Layout");return u(),oe(N,null,{default:_(()=>[i(v,{title:"Delete Request Drivers"}),i(C,{title:n.$t("delete_request_drivers"),pageTitle:n.$t("delete_request_drivers")},null,8,["title","pageTitle"]),i(B,null,{default:_(()=>[i(m,{lg:"12"},{default:_(()=>[i(q,{"no-body":"",id:"tasksList"},{default:_(()=>[i(k,{class:"border-0"},{default:_(()=>[i(B,{class:"g-2"},{default:_(()=>[i(m,{md:"3"},{default:_(()=>[e("div",_e,[e("label",ge,r(n.$t("show")),1),ae(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.filter.limit=a),onChange:t[1]||(t[1]=(...a)=>s.changeEntriesPerPage&&s.changeEntriesPerPage(...a)),class:"form-select form-select-sm w-auto"},[(u(!0),g(R,null,F(s.paginatorOption,a=>(u(),g("option",{key:a,value:a},r(a),9,pe))),128))],544),[[re,s.filter.limit]]),e("label",ve,r(n.$t("entries")),1)])]),_:1}),i(m,{md:"3"}),i(m,{md:"auto",class:"ms-auto"},{default:_(()=>[e("div",he,[i(D,{onSearch:s.fetchSearch},null,8,["onSearch"])])]),_:1})]),_:1})]),_:1}),i(P,{class:"border border-dashed border-end-0 border-start-0"},{default:_(()=>[e("div",be,[e("table",ye,[e("thead",we,[e("tr",null,[e("th",Ce,r(n.$t("name")),1),e("th",Be,r(n.$t("date")),1),e("th",Me,r(n.$t("email")),1),e("th",ke,r(n.$t("mobile_number")),1),e("th",Pe,r(n.$t("action")),1)])]),s.results.length>0?(u(),g("tbody",xe,[(u(!0),g(R,null,F(s.results,(a,x)=>(u(),g("tr",{key:x},[e("td",null,[e("a",{onClick:S(M=>s.viewProfile(a),["prevent"])},r(a.name),9,Se)]),e("td",null,r(a.converted_deleted_at),1),e("td",null,r(a.email),1),e("td",null,r(a.mobile),1),e("td",null,[e("div",Le,[t[7]||(t[7]=e("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("span",{class:"text-muted fs-18"},[e("i",{class:"mdi mdi-dots-vertical"})])],-1)),e("div",De,[n.permissions.includes("view-driver-profile")?(u(),g("a",{key:0,class:"dropdown-item",href:"#",onClick:S(M=>s.viewProfile(a),["prevent"])},[t[4]||(t[4]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),b(r(n.$t("view_profile")),1)],8,qe)):E("",!0),e("a",{class:"dropdown-item",onClick:S(M=>s.deleteModal(a.id),["prevent"])},[t[5]||(t[5]=e("i",{class:"bx bxs-trash align-center text-muted me-2"},null,-1)),b(r(n.$t("delete")),1)],8,He),e("a",{class:"dropdown-item",href:"#",onClick:S(M=>s.restoreUser(a.user_id),["prevent"])},[t[6]||(t[6]=e("i",{class:"bx bx-undo align-center text-muted me-2"},null,-1)),b(" "+r(n.$t("restore")),1)],8,Ne)])])])]))),128))])):(u(),g("tbody",Te,[e("tr",null,[e("td",Ee,[t[8]||(t[8]=e("img",{src:me,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,r(n.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[s.successMessage?(u(),g("div",Oe,[e("div",Fe,[t[9]||(t[9]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[10]||(t[10]=b()),t[11]||(t[11]=e("strong",null,"Success",-1)),b(" - "+r(s.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Success Message"})])])):E("",!0),s.alertMessage?(u(),g("div",Re,[e("div",Ve,[t[12]||(t[12]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[13]||(t[13]=b()),t[14]||(t[14]=e("strong",null,"Alert",-1)),b(" - "+r(s.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...a)=>s.dismissMessage&&s.dismissMessage(...a)),"aria-label":"Close Alert Message"})])])):E("",!0)]),i(H,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const We=J(fe,[["render",Ae]]);export{We as default};
