import{_ as Z,Z as Q,O as X,r as f,T as I,R as $,a3 as ee,a as U,g as m,i,y as se,w as g,W as P,l as u,n as s,J as n,k as c,L as H,F as N,z as b,C as M,t as T,M as K,q as Y,p as oe,K as j}from"./vendor-8caf5d52.js";import{L as te}from"./main-cc7bd0ce.js";import{P as le}from"./page-header-18309276.js";import{P as re}from"./Pagination-0518e4bd.js";import"./footer-502c2797.js";import"./app-974c65a1.js";const ae={components:{Layout:te,PageHeader:le,Head:Q,Pagination:re,Multiselect:X},props:{successMessage:String,alertMessage:String},setup(r){const e=f(""),p=f(null),o=I({name:"",description:""}),R=I({all:"",locked:""}),_=f([]),x=f({}),w=f(!1),y=f(!1),k=f(!1),L=f(null),h=f(r.successMessage||""),E=f(r.alertMessage||""),z=()=>{h.value="",E.value=""},S=()=>{o.reset(),p.value=null,y.value=!0},F=()=>{k.value=!0},A=a=>{p.value=a,o.name=a.name,o.description=a.description,o.clearErrors(),y.value=!0},t=()=>{o.reset(),y.value=!1,p.value=null},v=()=>{R.reset(),V(),k.value=!1},q=()=>{const{name:a,description:l}=o,d={},C={name:{test:()=>!a,message:"Role name is required"},description:{test:()=>!l,message:"Role description is required"}};return Object.keys(C).forEach(B=>{C[B].test()&&(d[B]=C[B].message)}),d},O=async()=>{const a=q();if(Object.keys(a).length===0)try{let l;if(p.value?l=await U.put(`/roles/update/${p.value.id}`,o.data()):l=await U.post("/roles",o.data()),l.status===200||l.status===201){h.value=l.data.successMessage;const d=l.data.roles;if(p.value){const C=_.value.findIndex(B=>B.id===p.value.id);C!==-1&&(_.value[C]=d)}else _.value.push(d);y.value=!1,o.reset()}else console.error("Unexpected response status:",l.status)}catch(l){if(console.error("Error handling form submission:",l),l.response&&l.response.status===422){const d=l.response.data.errors;o.errors=d}else console.error("An unexpected error occurred:",l)}else o.errors=a},G=a=>{o.errors[a]=""},J=()=>{w.value=!1},D=async a=>{try{await U.delete(`/roles/delete/${a}`);const l=_.value.findIndex(d=>d.id===a);l!==-1&&_.value.splice(l,1),w.value=!1,P.fire("Success","Role deleted successfully","success")}catch(l){console.error("Error deleting role:",l),P.fire("Error","Failed to delete role","error")}},W=async a=>{P.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await D(a)}catch(d){console.error("Error deleting role:",d),P.fire("Error","Failed to delete the role","error")}})};$(e,ee.debounce(function(a){V(e.value)},300));const V=async(a=1)=>{try{const l=R.data();l.search=e.value,l.page=a;const d=await U.get("/roles1/list",{params:l});_.value=d.data.roles,x.value=d.data.paginator,k.value=!1}catch(l){console.error("Error fetching roles:",l)}};return{form:o,roles:_,modalShow:w,modalForm:y,deleteItemId:L,selectedRole:p,successMessage:h,alertMessage:E,createRole:S,filterRole:F,editRole:A,cancelEdit:t,handleSubmit:O,deleteModal:W,closeModal:J,deleteRole:D,dismissMessage:z,hideError:G,searchTerm:e,paginator:x,modalFilter:k,clearFilter:v,fetchRoles:V,filter:R,handlePageChanged:async a=>{V(a)}}},mounted(){this.fetchRoles()}},ne={action:"javascript:void(0);"},ie={class:"row"},de={class:"col-sm-6"},ce={class:"mb-3"},ue={for:"select_area",class:"form-label"},me={id:"select_area",class:"form-select"},fe={disabled:"",value:""},pe={class:"col-sm-6"},ve={class:"mb-3"},ge={for:"select_send_to",class:"form-label"},be={id:"select_send_to",class:"form-select"},_e={disabled:"",value:""},ye={value:"driver"},ke={value:"user"},Ce={class:"col-sm-6"},Me={class:"mb-3"},we={for:"push_title",class:"form-label"},he=["placeholder"],Be={class:"col-12"},Re={class:"mb-3"},xe={for:"message",class:"form-label"},Ee=["placeholder"],Se={class:"col-12"},Fe={class:"mb-3"},Ve={for:"select_timezone",class:"form-label d-flex"},Ue={key:0,class:"text-danger"},Pe={class:"col-lg-12"},He={class:"text-end"},Ne={type:"submit",class:"btn btn-primary"},Te={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Le={class:"alert-content"},ze={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Ae={class:"alert-content"},De={class:"form-group mt-3"},Ie={key:0,class:"text-danger"},Ke={class:"form-group mt-3"},Ye={key:0,class:"text-danger"},je={type:"submit",class:"btn btn-success m-2 float-end"},qe={class:"input-group"};function Oe(r,e,p,o,R,_){const x=m("Head"),w=m("PageHeader"),y=m("BCardHeader"),k=m("imageUpload"),L=m("BCardBody"),h=m("BCard"),E=m("BCol"),z=m("BRow"),S=m("BModal"),F=m("BButton"),A=m("Layout");return i(),se(A,null,{default:g(()=>[u(x,{title:"Push Notification"}),u(w,{title:r.$t("update"),pageTitle:r.$t("push_notification")},null,8,["title","pageTitle"]),u(z,null,{default:g(()=>[u(E,{lg:"12"},{default:g(()=>[u(h,{"no-body":"",id:"tasksList"},{default:g(()=>[u(y,{class:"border-0"}),u(L,{class:"border border-dashed border-end-0 border-start-0"},{default:g(()=>[s("form",ne,[s("div",ie,[s("div",de,[s("div",ce,[s("label",ue,n(r.$t("service_location")),1),s("select",me,[s("option",fe,n(r.$t("select_service_location")),1),e[13]||(e[13]=s("option",{value:"chitwan"},"Chitwan",-1)),e[14]||(e[14]=s("option",{value:"katari"},"Katari",-1)),e[15]||(e[15]=s("option",{value:"trigger"},"trigger",-1)),e[16]||(e[16]=s("option",{value:"india"},"India",-1)),e[17]||(e[17]=s("option",{value:"nepal_delivery"},"Nepal Delivery",-1)),e[18]||(e[18]=s("option",{value:"new_york"},"New York",-1)),e[19]||(e[19]=s("option",{value:"nawalparasi"},"Nawalparasi",-1)),e[20]||(e[20]=s("option",{value:"trigger_2"},"TRIGGER 2",-1)),e[21]||(e[21]=s("option",{value:"kathmandu"},"Kathmandu",-1)),e[22]||(e[22]=s("option",{value:"uk_test"},"UK test",-1)),e[23]||(e[23]=s("option",{value:"pokhara"},"Pokhara",-1))]),(i(!0),c(N,null,H(r.errors.country,(t,v)=>(i(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),s("div",pe,[s("div",ve,[s("label",ge,n(r.$t("send_to")),1),s("select",be,[s("option",_e,n(r.$t("select")),1),s("option",ye,n(r.$t("driver")),1),s("option",ke,n(r.$t("user")),1)]),(i(!0),c(N,null,H(r.errors.country,(t,v)=>(i(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),s("div",Ce,[s("div",Me,[s("label",we,n(r.$t("push_title")),1),s("input",{type:"text",class:"form-control",placeholder:r.$t("enter_psuh_title"),id:"push_title"},null,8,he),(i(!0),c(N,null,H(r.errors.name,(t,v)=>(i(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),s("div",Be,[s("div",Re,[s("label",xe,n(r.$t("message")),1),s("textarea",{type:"text",class:"form-control",placeholder:r.$t("enter_message"),id:"message"},null,8,Ee),(i(!0),c(N,null,H(r.errors.name,(t,v)=>(i(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),s("div",Se,[s("div",Fe,[s("label",Ve,[b(n(r.$t("notification_banner")),1),e[24]||(e[24]=s("span",null,[s("h5",{class:"text-muted mt-1 mb-0 fs-13"},"(320px x 320px)")],-1))]),u(k),o.form.errors.timezone?(i(),c("span",Ue,n(o.form.errors.timezone),1)):M("",!0)])]),s("div",Pe,[s("div",He,[s("button",Ne,n(r.$t("update")),1)])])])])]),_:1})]),_:1})]),_:1})]),_:1}),s("div",null,[o.successMessage?(i(),c("div",Te,[s("div",Le,[e[25]||(e[25]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[26]||(e[26]=b()),e[27]||(e[27]=s("strong",null,"Success",-1)),b(" - "+n(o.successMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-success",onClick:e[0]||(e[0]=(...t)=>o.dismissMessage&&o.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):M("",!0),o.alertMessage?(i(),c("div",ze,[s("div",Ae,[e[28]||(e[28]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[29]||(e[29]=b()),e[30]||(e[30]=s("strong",null,"Alert",-1)),b(" - "+n(o.alertMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[1]||(e[1]=(...t)=>o.dismissMessage&&o.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):M("",!0)]),u(S,{modelValue:o.modalForm,"onUpdate:modelValue":e[9]||(e[9]=t=>o.modalForm=t),"hide-footer":"",title:o.selectedRole?"Update Role":"Create Role",class:"v-modal-custom"},{default:g(()=>[s("form",{onSubmit:e[7]||(e[7]=oe((...t)=>o.handleSubmit&&o.handleSubmit(...t),["prevent"])),onKeydown:e[8]||(e[8]=(...t)=>o.hideError&&o.hideError(...t))},[s("div",De,[e[31]||(e[31]=s("label",{for:"name",class:"form-label"},[b("Role Name"),s("span",{class:"text-danger"},"*")],-1)),T(s("input",{type:"text",id:"name","onUpdate:modelValue":e[2]||(e[2]=t=>o.form.name=t),class:Y(["form-control",{"is-invalid":o.form.errors.name}]),onFocus:e[3]||(e[3]=t=>o.hideError("name"))},null,34),[[K,o.form.name]]),o.form.errors.name?(i(),c("div",Ie,n(o.form.errors.name),1)):M("",!0)]),s("div",Ke,[e[32]||(e[32]=s("label",{for:"description",class:"form-label"},[b("description"),s("span",{class:"text-danger"},"*")],-1)),T(s("input",{type:"text",id:"description","onUpdate:modelValue":e[4]||(e[4]=t=>o.form.description=t),class:Y(["form-control",{"is-invalid":o.form.errors.description}]),onFocus:e[5]||(e[5]=t=>o.hideError("description"))},null,34),[[K,o.form.description]]),o.form.errors.description?(i(),c("div",Ye,n(o.form.errors.description),1)):M("",!0)]),s("button",je,n(o.selectedRole?"Update":"Save"),1),o.selectedRole?(i(),c("button",{key:0,type:"button",onClick:e[6]||(e[6]=(...t)=>o.cancelEdit&&o.cancelEdit(...t)),class:"btn btn-secondary m-2 float-end"},"Cancel")):M("",!0)],32)]),_:1},8,["modelValue","title"]),u(S,{modelValue:o.modalFilter,"onUpdate:modelValue":e[12]||(e[12]=t=>o.modalFilter=t),"hide-footer":"","dialog-class":"modal-dialog-right",title:"Filter",class:"v-modal-custom",size:"sm"},{default:g(()=>[s("form",null,[s("div",qe,[T(s("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[10]||(e[10]=t=>o.filter.all=t)},e[33]||(e[33]=[s("option",{selected:""},"Select Status",-1),s("option",{value:"1"},"Yes",-1),s("option",{value:"0"},"No",-1)]),512),[[j,o.filter.all]]),T(s("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[11]||(e[11]=t=>o.filter.locked=t)},e[34]||(e[34]=[s("option",{selected:""},"Select Status",-1),s("option",{value:"0"},"Inactive",-1),s("option",{value:"1"},"Active",-1)]),512),[[j,o.filter.locked]])]),u(F,{variant:"primary",class:"float-end",onClick:o.fetchRoles},{default:g(()=>e[35]||(e[35]=[b(" Apply")])),_:1,__:[35]},8,["onClick"]),u(F,{variant:"outline-primary",class:"float-end mx-2",onClick:o.clearFilter},{default:g(()=>e[36]||(e[36]=[b("Clear")])),_:1,__:[36]},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}const es=Z(ae,[["render",Oe]]);export{es as default};
