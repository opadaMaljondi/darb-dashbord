import{_ as P,O as L,P as M,Z as T,B as q,T as k,N as D,D as F,r as g,G as R,o as U,S as A,g as i,i as m,y as H,w as d,a as N,l,n as e,J as s,t as O,K as V,k as y,F as x,L as W,q as j,z,p as G}from"./vendor-8caf5d52.js";import{L as I}from"./main-cc7bd0ce.js";import{s as $}from"./searchbar-e42e22fa.js";import{_ as E}from"./UserWebMenu-27a14ea3.js";import{P as J}from"./Pagination-0518e4bd.js";import{i as K}from"./app-974c65a1.js";import{_ as Z}from"./search-file-ab3e1046.js";import"./footer-502c2797.js";const Q={props:{user:Object,requestmodel:{type:Object,required:!0},currency:Array},data(){return{searchTerm:""}},components:{Layout:I,Multiselect:L,flatPickr:M,Head:T,searchbar:$,UserWebMenu:E,Pagination:J,Link:q,useForm:k,router:D},setup(n){const{t:r}=F(),u=g(""),o=g(""),b=k({transport_type:null,dispatch_type:null,status:null}),c=g([]),h=g({}),C=async a=>{u.value=a,p()},p=async(a=1)=>{try{const _=b.data();_.search=u.value,_.page=a;const t=await N.get("/webuser/list",{params:_});c.value=t.data.results,h.value=t.data.paginator}catch(_){console.error(r("error_fetching_users"),_)}},v=async a=>{p(a)},f=a=>a.is_cancelled?"Cancelled":a.is_completed?"Completed":a.is_trip_start?"On Trip":a.is_driver_arrived?"Driver Arrived":a.is_later&&a.is_driver_started?"Driver Started":a.is_driver_started?"Accepted":a.is_later?"Upcoming":"Searching",B=R(()=>o.value?c.value.filter(a=>o.value==="_completed"?a.is_completed:o.value==="_cancelled"?a.is_cancelled:o.value==="_upcoming"?!a.is_completed&&!a.is_cancelled:!0):c.value),S=async a=>{D.get(`/history/view/${a.id}`)};return U(async()=>{await K("en")}),{results:c,searchTerm:u,rideStatus:f,fetchSearch:C,paginator:h,fetchDatas:p,filter:b,handlePageChanged:v,filteredResults:B,selectedStatus:o,viewData:S}},computed:{...A(["permissions"])},mounted(){this.fetchDatas()},methods:{applyFilter(){}}},X={class:"tab-content text-muted"},Y={class:"tab-pane active border p-4"},ee={class:"d-flex float-end gap-3 mb-3"},te={value:""},se={value:"_completed"},ae={value:"_cancelled"},oe={value:"_upcoming"},ne={class:"table-responsive px-3 mx-n3"},re={class:"table align-middle position-relative table-nowrap"},le={class:"table-active"},de={scope:"col"},ie={scope:"col"},ce={scope:"col"},_e={scope:"col"},ue={scope:"col"},pe={scope:"col"},me={scope:"col"},he={scope:"col"},ve={key:0},fe={class:"address"},ge={class:"address"},ye={class:"d-flex"},be=["src"],Ce=["onClick","disabled"],Be={key:1},Se={colspan:"7",class:"text-center"};function we(n,r,u,o,b,c){const h=i("Head"),C=i("UserWebMenu"),p=i("BCardHeader"),v=i("BCol"),f=i("BRow"),B=i("BBadge"),S=i("BCardBody"),a=i("BCard"),_=i("Pagination");return m(),H(a,null,{default:d(()=>[l(h,{title:"Taxi Ride"}),l(p,{class:"border-0"},{default:d(()=>[l(C,{user:u.user},null,8,["user"])]),_:1}),l(f,null,{default:d(()=>[l(v,{lg:"12"},{default:d(()=>[l(a,{"no-body":"",id:"tasksList"},{default:d(()=>[l(p,{class:"border-0"},{default:d(()=>[e("h3",null,s(n.$t("history")),1)]),_:1}),l(S,{class:"border border-dashed border-end-0 border-start-0"},{default:d(()=>[r[4]||(r[4]=e("div",null,null,-1)),e("div",X,[e("div",Y,[l(f,null,{default:d(()=>[l(v,{lg:"12"},{default:d(()=>[e("div",ee,[r[2]||(r[2]=e("div",{class:""},null,-1)),O(e("select",{class:"form-select","onUpdate:modelValue":r[0]||(r[0]=t=>o.selectedStatus=t),id:"trip-status",onChange:r[1]||(r[1]=(...t)=>c.applyFilter&&c.applyFilter(...t))},[e("option",te,s(n.$t("all")),1),e("option",se,s(n.$t("completed")),1),e("option",ae,s(n.$t("cancelled")),1),e("option",oe,s(n.$t("upcoming")),1)],544),[[V,o.selectedStatus]])])]),_:1})]),_:1}),e("div",ne,[e("table",re,[e("thead",le,[e("tr",null,[e("th",de,s(n.$t("s_no")),1),e("th",ie,s(n.$t("request_id")),1),e("th",ce,s(n.$t("pickup_location")),1),e("th",_e,s(n.$t("drop_location")),1),e("th",ue,s(n.$t("transport_type")),1),e("th",pe,s(n.$t("trip_status")),1),e("th",me,s(n.$t("amount")),1),e("th",he,s(n.$t("action")),1)])]),o.filteredResults.length>0?(m(),y("tbody",ve,[(m(!0),y(x,null,W(o.filteredResults,(t,w)=>(m(),y("tr",{key:w},[e("td",null,s(w+1),1),e("td",null,s(t.request_number),1),e("td",null,[e("div",fe,s(t.pick_address),1),e("div",null,s(t.converted_created_at),1)]),e("td",null,[e("div",ge,s(t.drop_address),1),e("div",null,s(t.converted_completed_at),1)]),e("td",null,[e("div",ye,[e("img",{src:t.vehicle_type_image,alt:"",class:"avatar-sm rounded-circle me-2"},null,8,be),e("div",null,[e("span",null,s(t.transport_type),1),e("p",null,s(t.converted_created_at),1)])])]),e("td",null,[l(B,{class:j({"text-uppercase":!0,"text-bg-success":o.rideStatus(t)==="Completed"||o.rideStatus(t)==="Accepted"||o.rideStatus(t)==="Driver Started","text-bg-danger":o.rideStatus(t)==="Cancelled","text-bg-info":o.rideStatus(t)==="On Trip","text-bg-warning":o.rideStatus(t)==="Upcoming"||o.rideStatus(t)==="Driver Arrived"||o.rideStatus(t)==="Searching"})},{default:d(()=>[z(s(o.rideStatus(t)),1)]),_:2},1032,["class"])]),e("td",null,s(u.currency)+" "+s(t.request_eta_amount),1),e("td",null,[e("button",{onClick:G(ke=>o.viewData(t),["prevent"]),disabled:!n.permissions.includes("view-web-history-detail"),type:"button",class:"btn btn-primary btn-sm"},s(n.$t("view")),9,Ce)])]))),128))])):(m(),y("tbody",Be,[e("tr",null,[e("td",Se,[r[3]||(r[3]=e("img",{src:Z,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,s(n.$t("no_data_found")),1)])])]))])])])])]),_:1,__:[4]})]),_:1})]),_:1})]),_:1}),l(_,{paginator:o.paginator,onPageChanged:o.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Ue=P(Q,[["render",we]]);export{Ue as default};
