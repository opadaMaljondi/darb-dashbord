import{_ as V,am as O,Z as j,O as D,an as E,D as U,r as x,T as H,o as P,g as p,i as r,y as F,w as d,a as N,N as q,l as c,n as t,k as u,L as B,q as A,J as h,F as M,z as J,t as S,M as z,C as K,p as Z}from"./vendor-54d6cb1e.js";import{L as G}from"./main-b839be26.js";import{P as Q}from"./page-header-ff719701.js";import{P as W}from"./Pagination-b5e3d5c9.js";import{u as X}from"./footer-7e4f68d9.js";import{I as Y}from"./ImageUpload-95e3fa21.js";import{F as $}from"./FormValidation-cabc17c8.js";import"./app-cb082573.js";const tt={data(){return{editor:O,editorData:"",parsedFooter:[]}},components:{Layout:G,PageHeader:Q,Head:j,Pagination:W,Multiselect:D,FormValidation:$,ImageUpload:Y,ckeditor:E.component},props:{successMessage:String,alertMessage:String,notification:{type:Object,required:!0},validate:Function,languages:Array,app_for:String},setup(e){const{t:a}=U(),{languages:y,fetchData:o}=X(),w=x("English"),m=H({push_title:Object.keys(e.notification.languageFields).reduce((n,l)=>{var i;return n[l]=((i=e.notification.languageFields[l])==null?void 0:i.push_title)||"",n},{}),push_body:Object.keys(e.notification.languageFields).reduce((n,l)=>{var i;return n[l]=((i=e.notification.languageFields[l])==null?void 0:i.push_body)||"",n},{})}),C={},b=()=>{const n=document.getElementById("iconInput");if(n.files.length>0){const l=n.files[0],i=new Image;i.onload=function(){(i.width!==512||i.height!==512)&&(alert("Icon must be 512x512 pixels."),n.value="")},i.src=URL.createObjectURL(l)}},g=x(null),k=x({}),v=x(e.successMessage||""),_=x(e.alertMessage||""),R=()=>{v.value="",_.value=""},s=n=>{w.value=n},f=async()=>{if(e.app_for=="demo"){Swal.fire(a("error"),a("you_are_not_authorised"),"error");return}try{const n=new FormData;let l;Object.keys(m.push_title).forEach(i=>{n.append(`push_title[${i}]`,m.push_title[i])}),Object.keys(m.push_body).forEach(i=>{n.append(`push_body[${i}]`,m.push_body[i])}),console.log("formdata",m.data()),e.notification&&e.notification.id&&(l=await N.post(`/notification-channel/update-push-template/${e.notification.id}`,n,{headers:{"Content-Type":"multipart/form-data"}})),l.status===201?(v.value=a("mail_template_created_successfully"),m.reset(),q.get("/notification-channel")):_.value=a("failed_to_create_mail_template")}catch(n){console.error(a("error_creating_mail_template"),n),_.value=a("failed_to_create_mail_template_catch"),n.response&&n.response.data.errors&&(k.value=n.response.data.errors)}},T=e.vehicleType?e.vehicleType.icon:null,I=(n,l)=>{m[l]=n},L=n=>{m[n]=null};return P(async()=>{Object.keys(y).length==0&&await o()}),{form:m,successMessage:v,alertMessage:_,handleSubmit:f,dismissMessage:R,validationRules:C,validationRef:g,errors:k,validateIconSize:b,notification:e.notification,iconUrl:T,handleImageSelected:I,handleImageRemoved:L,languages:y,setActiveTab:s,activeTab:w}},methods:{stripHtmlTags(e){return new DOMParser().parseFromString(e,"text/html").body.textContent||""}}},et={class:"nav nav-tabs nav-tabs-custom nav-success nav-justified",role:"tablist"},ot={class:"nav-item",role:"presentation"},nt=["onClick"],at=["id"],st={class:"col-sm-6 mt-3"},it={class:"mb-3"},lt=["for"],rt=["placeholder","id","onUpdate:modelValue","required"],dt={class:"mb-3"},ct=["placeholder","onUpdate:modelValue"],mt={class:"text-end mb-3"},ut=["disabled"],ft={class:"col-12"},_t={class:"body-wrap"},pt={class:"container",width:"600"},bt={class:"content"},ht={class:"main",width:"100%",cellpadding:"0",cellspacing:"0",itemprop:"action",itemscope:"",itemtype:"http://schema.org/ConfirmAction",style:{"font-family":"'Roboto', sans-serif","box-sizing":"border-box","font-size":"14px","border-radius":"3px",margin:"0",border:"none"}},yt={class:"content-wrap"},gt={width:"100%",cellpadding:"0",cellspacing:"0",style:{"font-family":"'Roboto', sans-serif","box-sizing":"border-box","font-size":"14px",margin:"0"}},vt={key:0},xt={class:"content-block",style:{"font-family":"'Roboto', sans-serif","box-sizing":"border-box","font-size":"20px","line-height":"1.5","font-weight":"500","vertical-align":"top",margin:"0",padding:"0 0 10px"},valign:"top"},kt={key:1},wt={key:2},Ct=["innerHTML"],Rt={key:3};function Tt(e,a,y,o,w,m){const C=p("PageHeader"),b=p("BCol"),g=p("BRow"),k=p("FormValidation"),v=p("BCardBody"),_=p("BCard"),R=p("Layout");return r(),F(R,null,{default:d(()=>[c(C,{title:o.notification?e.$t("edit"):e.$t("create"),pageTitle:e.$t("template"),pageLink:"/notification-channel"},null,8,["title","pageTitle"]),c(g,null,{default:d(()=>[c(b,{lg:"6"},{default:d(()=>[c(_,{"no-body":""},{default:d(()=>[c(v,null,{default:d(()=>[t("form",{onSubmit:a[0]||(a[0]=Z((...s)=>o.handleSubmit&&o.handleSubmit(...s),["prevent"]))},[c(k,{form:o.form,rules:o.validationRules,ref:"validationRef"},{default:d(()=>[c(g,null,{default:d(()=>[c(b,{lg:"12"},{default:d(()=>[t("div",null,[t("ul",et,[(r(!0),u(M,null,B(o.languages,s=>(r(),F(g,{key:s.code},{default:d(()=>[c(b,{lg:"12"},{default:d(()=>[t("li",ot,[t("a",{class:A(["nav-link",{active:o.activeTab===s.label}]),onClick:f=>o.setActiveTab(s.label),role:"tab","aria-selected":"true"},h(s.label),11,nt)])]),_:2},1024)]),_:2},1024))),128))]),(r(!0),u(M,null,B(o.languages,s=>(r(),u("div",{class:"tab-content text-muted",key:s.code},[o.activeTab===s.label?(r(),u("div",{key:0,class:"tab-pane active show",id:`${s.label}`,role:"tabpanel"},[t("div",st,[t("div",it,[t("label",{for:`name-${s.code}`,class:"form-label"},[J(h(e.$t("push_title"))+" ",1),a[1]||(a[1]=t("span",{class:"text-danger"},"*",-1))],8,lt),S(t("input",{type:"text",class:"form-control",placeholder:e.$t("enter_push_title",{language:s.label}),id:`enter_push_title-${s.code}`,"onUpdate:modelValue":f=>o.form.push_title[s.code]=f,required:s.code==="en"},null,8,rt),[[z,o.form.push_title[s.code]]])])]),t("div",dt,[t("label",null,h(e.$t("push_body")),1),S(t("textarea",{class:"form-control",id:"`name-${language.code}`",rows:"3",placeholder:e.$t("enter_message"),"onUpdate:modelValue":f=>o.form.push_body[s.code]=f},null,8,ct),[[z,o.form.push_body[s.code]]]),(r(!0),u(M,null,B(o.errors.push_body,(f,T)=>(r(),u("span",{key:T,class:"text-danger"},h(f),1))),128))]),t("div",mt,[t("button",{type:"submit",class:"btn btn-primary",disabled:y.app_for==="demo"},h(o.notification?e.$t("update"):e.$t("save")),9,ut)])],8,at)):K("",!0)]))),128))])]),_:1})]),_:1})]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1}),c(b,{lg:"6"},{default:d(()=>[c(_,null,{default:d(()=>[t("div",ft,[t("table",_t,[t("tbody",null,[t("tr",null,[a[5]||(a[5]=t("td",null,null,-1)),t("td",pt,[t("div",bt,[t("table",ht,[t("tbody",null,[t("tr",null,[t("td",yt,[a[4]||(a[4]=t("meta",{itemprop:"name",content:"Confirm Email",style:{"font-family":"'Roboto', sans-serif","box-sizing":"border-box","font-size":"14px",margin:"0"}},null,-1)),t("table",gt,[t("tbody",null,[o.notification&&o.notification.push_title?(r(),u("tr",vt,[t("td",xt,h(o.notification.push_title),1)])):(r(),u("tr",kt,[...a[2]||(a[2]=[t("td",{class:"content-block",style:{"font-family":"'Roboto', sans-serif","box-sizing":"border-box","font-size":"20px","line-height":"1.5","font-weight":"500","vertical-align":"top",margin:"0",padding:"0 0 10px"},valign:"top"}," Register successfully ",-1)])])),o.notification&&o.notification.push_body?(r(),u("tr",wt,[t("div",{innerHTML:o.notification.push_body},null,8,Ct)])):(r(),u("tr",Rt,[...a[3]||(a[3]=[t("p",null,"Register successfully",-1)])]))])])])])])])])])])])])])]),_:1})]),_:1})]),_:1})]),_:1})}const Ot=V(tt,[["render",Tt]]);export{Ot as default};
