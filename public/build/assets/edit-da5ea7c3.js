import{_ as L,Z as N,O as R,D,r as g,T,g as n,i as _,y as U,w as i,a as C,N as q,l as d,k as w,n as e,z as p,J as c,C as b,t as k,M as S,p as P}from"./vendor-54d6cb1e.js";import{L as x}from"./main-b839be26.js";import{P as A}from"./page-header-ff719701.js";import{i as I}from"./vehicletypeIcon-f8e6aee3.js";import{I as O}from"./ImageUpload-95e3fa21.js";import{F as j}from"./FormValidation-cabc17c8.js";import"./footer-7e4f68d9.js";import"./app-cb082573.js";const z={components:{Layout:x,PageHeader:A,Head:N,Multiselect:R,imageUpload:I,ImageUpload:O,FormValidation:j},props:{user:Object,successMessage:String,alertMessage:String,app_for:String},setup(o){const{t:s}=D(),m=g({}),t=g(null),u=T({password:o.user&&o.user.password||"",confirm_password:o.user&&o.user.password||""}),v=g(o.successMessage||""),y=g(o.alertMessage||""),f={password:{required:!0},confirm_password:{required:!0,sameAs:"password"}},M=()=>{const r={};for(const a in f)f[a].required&&!u[a]&&(r[a]=s("this_field_is_required"));return r};return{form:u,successMessage:v,alertMessage:y,errors:m,handleSubmit:async()=>{if(m.value=M(),Object.keys(m.value).length===0)try{const r=new FormData;r.append("password",u.password),r.append("confirm_password",u.confirm_password);let a;o.user?a=await C.post(`/users/password/update/${o.user.id}`,r):a=await C.post("store",r),a.status===200||a.status===201?(v.value=a.data.successMessage,u.reset(),q.get("/users")):console.error(s("unexpected_response_status"),a.status)}catch(r){console.error(s("error_handling_form_submission"),r),r.response&&r.response.status===422?m.value=r.response.data.errors:console.error(s("an_unexpected_error_occurred"),r)}},validationRef:t,validationRules:f}}},E={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},J={class:"alert-content"},Z={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},G={class:"alert-content"},K={class:"row"},Q={class:"col-sm-6"},W={class:"mb-3"},X={for:"password",class:"form-label"},Y=["placeholder"],$={key:0,class:"text-danger"},ss={class:"col-sm-6"},es={class:"mb-3"},os={for:"confirm_password",class:"form-label"},ts=["placeholder"],rs={key:0,class:"text-danger"},as={class:"col-sm-12 text-end"},ns={type:"submit",class:"btn btn-primary"};function ls(o,s,m,t,u,v){const y=n("Head"),f=n("PageHeader"),M=n("tab"),B=n("BCardHeader"),r=n("FormValidation"),a=n("BCardBody"),h=n("BCard"),V=n("BCol"),H=n("BRow"),F=n("Layout");return _(),U(F,null,{default:i(()=>[d(y,{title:"User"}),d(f,{title:m.user?o.$t("edit"):o.$t("create"),pageTitle:o.$t("user"),pageLink:"/users"},null,8,["title","pageTitle"]),d(H,null,{default:i(()=>[d(V,{lg:"12"},{default:i(()=>[d(h,{"no-body":"",id:"tasksList"},{default:i(()=>[d(B,{class:"border-0"},{default:i(()=>[d(M),t.successMessage?(_(),w("div",E,[e("div",J,[s[5]||(s[5]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[6]||(s[6]=p()),s[7]||(s[7]=e("strong",null,"Success",-1)),p(" - "+c(t.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[0]||(s[0]=(...l)=>o.dismissMessage&&o.dismissMessage(...l)),"aria-label":"Close Success Message"})])])):b("",!0),t.alertMessage?(_(),w("div",Z,[e("div",G,[s[8]||(s[8]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[9]||(s[9]=p()),s[10]||(s[10]=e("strong",null,"Alert",-1)),p(" - "+c(t.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[1]||(s[1]=(...l)=>o.dismissMessage&&o.dismissMessage(...l)),"aria-label":"Close Alert Message"})])])):b("",!0)]),_:1}),d(a,{class:"border border-dashed border-end-0 border-start-0"},{default:i(()=>[e("form",{onSubmit:s[4]||(s[4]=P((...l)=>t.handleSubmit&&t.handleSubmit(...l),["prevent"])),enctype:"multipart/form-data"},[d(r,{form:t.form,rules:t.validationRules,ref:"validationRef"},{default:i(()=>[e("div",K,[e("div",Q,[e("div",W,[e("label",X,[p(c(o.$t("password"))+" ",1),s[11]||(s[11]=e("span",{class:"text-danger"},"*",-1))]),k(e("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":s[2]||(s[2]=l=>t.form.password=l),placeholder:o.$t("enter_password")},null,8,Y),[[S,t.form.password]]),t.errors.password?(_(),w("span",$,c(t.errors.password),1)):b("",!0)])]),e("div",ss,[e("div",es,[e("label",os,[p(c(o.$t("confirm_password"))+" ",1),s[12]||(s[12]=e("span",{class:"text-danger"},"*",-1))]),k(e("input",{type:"password",class:"form-control",id:"confirm_password","onUpdate:modelValue":s[3]||(s[3]=l=>t.form.confirm_password=l),placeholder:o.$t("confirm_password")},null,8,ts),[[S,t.form.confirm_password]]),t.errors.confirm_password?(_(),w("span",rs,c(t.errors.confirm_password),1)):b("",!0)])]),e("div",as,[e("button",ns,c(o.$t("submit")),1)])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const gs=L(z,[["render",ls]]);export{gs as default};
