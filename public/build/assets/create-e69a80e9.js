import{_ as O,Z as Q,O as J,D as z,r as y,T as E,G as N,g as f,i,y as G,w as C,a as F,N as T,l as h,n as e,z as m,J as l,t as _,K as R,k as n,L as M,F as V,M as b,C as d,p as K}from"./vendor-8caf5d52.js";import{L as Z}from"./main-cc7bd0ce.js";import{P as W}from"./page-header-18309276.js";import{P as X}from"./Pagination-0518e4bd.js";import{i as Y}from"./imageUpload-5fcb01e8.js";import{F as $}from"./FormValidation-f14f6003.js";import{I as ee}from"./ImageUpload-fc3b7bc8.js";import"./footer-502c2797.js";import"./app-974c65a1.js";/* empty css                                                    */const re={components:{Layout:Z,PageHeader:W,Head:Q,Pagination:X,Multiselect:J,FormValidation:$,imageUpload:Y,ImageUpload:ee},props:{successMessage:String,alertMessage:String,driver:Object,serviceLocations:Array,vehicleTypes:Array,app_for:String,selected_vehicle_type:Array,validate:Function,countries:Array,default_dial_code:String,default_flag:String,user:Array,default_country_id:Number,preferences:Object},setup(o){const{t:s}=z(),v=y({dial_code:o.default_dial_code||"",flag:o.default_flag||""}),r=E({name:o.driver&&o.driver.name||"",service_location_id:o.driver&&o.driver.service_location_id||"",mobile:o.driver&&o.driver.mobile||"",email:o.driver&&o.driver.email||"",gender:o.driver&&o.driver.gender||"",vehicle_type:o.selected_vehicle_type[0]&&o.selected_vehicle_type[0]||"",transport_type:o.driver&&o.driver.transport_type||"",vehicle_make:o.driver&&o.driver.custom_make||"",vehicle_model:o.driver&&o.driver.custom_model||"",car_color:o.driver&&o.driver.car_color||"",car_number:o.driver&&o.driver.car_number||"",profilePictureFile:null,profile_picture:o.driver&&o.driver.profile_picture||"",country:o.driver?o.driver.country.id||"":null,password:o.driver&&o.driver.password||"",confirm_password:o.driver&&o.driver.password||"",preference:o.driver?o.driver.preference||[]:[]}),S={name:{required:!0},service_location_id:{required:!0},mobile:{required:!0,regex:/^\d+$/},gender:{required:!0},vehicle_type:{required:!0},vehicle_make:{required:!0},vehicle_model:{required:!0},car_color:{required:!0},car_number:{required:!0},transport_type:{required:!0},profile_picture:{required:!0}},H=y(null),p=y({}),U=y(o.successMessage||""),x=y(o.alertMessage||""),k=y(!1),I=()=>{U.value="",x.value=""},B=y(""),L=N(()=>o.countries.filter(a=>a.name.toLowerCase().includes(B.value.toLowerCase()))),q=()=>{const a={};for(const c in S)S[c].required&&!r[c]&&(a[c]=s("this_field_is_required"));return a},P=async()=>{if(p.value=q(),Object.keys(p.value).length===0)try{if(r.mobile&&(!o.driver||r.mobile!==o.driver.mobile)&&(await F.get(`/approved-drivers/check-mobile/${r.mobile}${o.driver?`/${o.driver.id}`:""}`)).data.exists){p.value.mobile=s("mobile_number_already_exists");return}if(r.email&&(!o.driver||r.email!==o.driver.email)&&(await F.get(`/approved-drivers/check-email/${r.email}${o.driver?`/${o.driver.id}`:""}`)).data.exists){p.value.email=s("email_already_exists");return}const a=new FormData;for(const g in r)g==="iconFile"&&r[g]?a.append("profile_picture",r[g]):a.append(g,r[g]);let c;a.append("profile_picture",r.iconFile),a.append("preference",JSON.stringify(r.preference)),k.value=!0,o.driver?c=await F.post(`/approved-drivers/update/${o.driver.id}`,a):c=await F.post("store",a),c.status===200||c.status===201?(U.value=c.data.successMessage,r.reset(),k.value=!1,o.driver&&o.driver.approve==1?T.get("/approved-drivers"):T.get("/pending-drivers")):(k.value=!1,console.error(s("unexpected_response_status"),c.status))}catch(a){k.value=!1,console.error(s("error_handling_form_submission"),a),a.response&&a.response.status===422?p.value=a.response.data.errors:console.error(s("an_unexpected_error_occurred"),a)}};r.country=o.default_country_id;const A=a=>{a&&(v.value=a,r.country=a.id)},D=a=>{const c=a.target.files[0];if(r.profilePictureFile=c,c){const g=new FileReader;g.onload=j=>{u.value=j.target.result},g.readAsDataURL(c)}},u=y(""),t=N(()=>{var a;return r.profilePictureFile?u.value:(a=o.driver)!=null&&a.profile_picture?o.driver.profile_picture:"/default-profile.jpeg"});return{form:r,successMessage:U,alertMessage:x,handleSubmit:P,dismissMessage:I,validationRules:S,validationRef:H,errors:p,selectCountry:A,selectedCountry:v,searchQuery:B,filteredCountries:L,onFileChange:D,imageSrc:t,driverProfilePictureUrl:u,handleImageSelected:(a,c)=>{r[c]=a},handleImageRemoved:a=>{r[a]=null},isButtonDisabled:k}}},oe={class:"row"},se={class:"col-12"},te={class:"mb-3"},le={for:"service_location_id",class:"form-label"},ae={disabled:"",value:""},ie=["value"],ne={class:"col-sm-6"},de={class:"mb-3"},ce={for:"name",class:"form-label"},me=["placeholder"],_e={class:"col-sm-6"},ue={class:"form-label"},ve={class:"input-group","data-input-flag":""},fe={class:"btn btn-light border",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ge=["src"],he={class:"ms-2 country-codeno"},be=["placeholder"],pe={class:"dropdown-menu w-100"},ye={class:"p-2 px-3 pt-1 searchlist-input"},ke=["placeholder"],we={class:"list-unstyled dropdown-menu-list mb-0"},Ce=["onClick"],Me=["src"],Ve={class:"align-middle"},Ue={key:0,class:"text-danger"},Se={class:"col-sm-6"},xe={class:"mb-3"},Be={for:"select_gender",class:"form-label"},Fe={selected:"",disabled:"",value:""},Re={value:"male"},Ie={value:"female"},Le={value:"others"},qe={key:0,class:"text-danger"},Pe={class:"col-sm-6"},Ae={class:"mb-3"},De={for:"email",class:"form-label"},He=["placeholder"],Ne={key:0,class:"text-danger"},Te={key:0,class:"col-sm-6"},je={class:"mb-3"},Oe={for:"password",class:"form-label"},Qe=["placeholder"],Je={key:0,class:"text-danger"},ze={key:1,class:"col-sm-6"},Ee={class:"mb-3"},Ge={for:"confirm_password",class:"form-label"},Ke=["placeholder"],Ze={key:0,class:"text-danger"},We={class:"col-sm-6"},Xe={class:"mb-3"},Ye={for:"transport_type",class:"form-label"},$e={disabled:"",value:""},er={value:"taxi"},rr={value:"delivery"},or={value:"both"},sr={key:0,class:"text-danger"},tr={class:"col-sm-6"},lr={class:"mb-3"},ar={for:"vehicle_type",class:"form-label"},ir={disabled:"",value:""},nr=["value"],dr={key:0,class:"text-danger"},cr={class:"col-sm-6"},mr={class:"mb-3"},_r={for:"vehicle_make",class:"form-label"},ur=["placeholder"],vr={key:0,class:"text-danger"},fr={class:"col-sm-6"},gr={class:"mb-3"},hr={for:"vehicle_model",class:"form-label"},br=["placeholder"],pr={key:0,class:"text-danger"},yr={class:"col-sm-6"},kr={class:"mb-3"},wr={for:"car_color",class:"form-label"},Cr=["placeholder"],Mr={key:0,class:"text-danger"},Vr={class:"col-sm-6"},Ur={class:"mb-3"},Sr={for:"car_number",class:"form-label"},xr=["placeholder"],Br={key:0,class:"text-danger"},Fr={key:2,class:"col-sm-6"},Rr={class:"mb-3"},Ir={for:"preference",class:"form-label"},Lr={class:"col-sm-6 mb-3"},qr={key:0,class:"text-danger"},Pr={class:"col-lg-12"},Ar={class:"text-end"},Dr=["disabled"],Hr={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Nr={class:"alert-content"},Tr={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},jr={class:"alert-content"};function Or(o,s,v,r,S,H){const p=f("Head"),U=f("PageHeader"),x=f("BCardHeader"),k=f("Multiselect"),I=f("ImageUpload"),B=f("FormValidation"),L=f("BCardBody"),q=f("BCard"),P=f("BCol"),A=f("BRow"),D=f("Layout");return i(),G(D,null,{default:C(()=>[h(p,{title:"Approved Drivers"}),h(U,{title:v.driver?o.$t("edit"):o.$t("create"),pageTitle:o.$t("approved_drivers"),pageLink:"/approved-drivers"},null,8,["title","pageTitle"]),h(A,null,{default:C(()=>[h(P,{lg:"12"},{default:C(()=>[h(q,{"no-body":"",id:"tasksList"},{default:C(()=>[h(x,{class:"border-0"}),h(L,{class:"border border-dashed border-end-0 border-start-0"},{default:C(()=>[e("form",{onSubmit:s[17]||(s[17]=K((...u)=>r.handleSubmit&&r.handleSubmit(...u),["prevent"]))},[h(B,{form:r.form,rules:r.validationRules,ref:"validationRef"},{default:C(()=>{var u;return[e("div",oe,[e("div",se,[e("div",te,[e("label",le,[m(l(o.$t("select_area"))+" ",1),s[20]||(s[20]=e("span",{class:"text-danger"},"*",-1))]),_(e("select",{id:"service_location_id",class:"form-select","onUpdate:modelValue":s[0]||(s[0]=t=>r.form.service_location_id=t)},[e("option",ae,l(o.$t("select")),1),(i(!0),n(V,null,M(v.serviceLocations,t=>(i(),n("option",{key:t.id,value:t.id},l(t.name),9,ie))),128))],512),[[R,r.form.service_location_id]]),(i(!0),n(V,null,M(r.errors.service_location_id,(t,w)=>(i(),n("span",{key:w,class:"text-danger"},l(t),1))),128))])]),e("div",ne,[e("div",de,[e("label",ce,[m(l(o.$t("name")),1),s[21]||(s[21]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:o.$t("enter_name"),id:"name","onUpdate:modelValue":s[1]||(s[1]=t=>r.form.name=t)},null,8,me),[[b,r.form.name]]),(i(!0),n(V,null,M(r.errors.name,(t,w)=>(i(),n("span",{key:w,class:"text-danger"},l(t),1))),128))])]),e("div",_e,[e("div",null,[e("label",ue,[m(l(o.$t("mobile"))+" ",1),s[22]||(s[22]=e("span",{class:"text-danger"},"*",-1))]),e("div",ve,[e("button",fe,[e("img",{src:r.selectedCountry.flag,alt:"flag",height:"20",class:"country-flagimg rounded"},null,8,ge),e("span",he,l(r.selectedCountry.dial_code),1)]),_(e("input",{type:"text",class:"form-control rounded-end flag-input","onUpdate:modelValue":s[2]||(s[2]=t=>r.form.mobile=t),placeholder:o.$t("enter_number")},null,8,be),[[b,r.form.mobile]]),e("div",pe,[e("div",ye,[_(e("input",{type:"text",class:"form-control form-control-sm border search-countryList",placeholder:o.$t("search_country_name_or_country_code"),"onUpdate:modelValue":s[3]||(s[3]=t=>r.searchQuery=t)},null,8,ke),[[b,r.searchQuery]])]),e("ul",we,[(i(!0),n(V,null,M(r.filteredCountries,t=>(i(),n("li",{key:t.id},[e("a",{href:"javascript:void(0);",class:"dropdown-item notify-item language py-2",onClick:w=>r.selectCountry(t)},[e("img",{src:t.flag,alt:"flag",class:"me-2 rounded",height:"18"},null,8,Me),e("span",Ve,l(t.name)+" "+l(t.dial_code),1)],8,Ce)]))),128))])])]),r.errors.mobile?(i(),n("span",Ue,l(r.errors.mobile),1)):d("",!0)])]),e("div",Se,[e("div",xe,[e("label",Be,[m(l(o.$t("select_gender"))+" ",1),s[23]||(s[23]=e("span",{class:"text-danger"},"*",-1))]),_(e("select",{id:"gender",class:"form-select","onUpdate:modelValue":s[4]||(s[4]=t=>r.form.gender=t)},[e("option",Fe,l(o.$t("choose_gender")),1),e("option",Re,l(o.$t("male")),1),e("option",Ie,l(o.$t("female")),1),e("option",Le,l(o.$t("others")),1)],512),[[R,r.form.gender]]),r.errors.gender?(i(),n("span",qe,l(r.errors.gender),1)):d("",!0)])]),e("div",Pe,[e("div",Ae,[e("label",De,[m(l(o.$t("email"))+" ",1),s[24]||(s[24]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"email",class:"form-control",placeholder:o.$t("enter_email"),id:"email","onUpdate:modelValue":s[5]||(s[5]=t=>r.form.email=t)},null,8,He),[[b,r.form.email]]),r.errors.email?(i(),n("span",Ne,l(r.errors.email),1)):d("",!0)])]),v.driver?d("",!0):(i(),n("div",Te,[e("div",je,[e("label",Oe,[m(l(o.$t("password"))+" ",1),s[25]||(s[25]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":s[6]||(s[6]=t=>r.form.password=t),placeholder:o.$t("enter_password")},null,8,Qe),[[b,r.form.password]]),r.errors.password?(i(),n("span",Je,l(r.errors.password),1)):d("",!0)])])),v.driver?d("",!0):(i(),n("div",ze,[e("div",Ee,[e("label",Ge,[m(l(o.$t("confirm_password"))+" ",1),s[26]||(s[26]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"password",class:"form-control",id:"confirm_password","onUpdate:modelValue":s[7]||(s[7]=t=>r.form.confirm_password=t),placeholder:o.$t("confirm_password")},null,8,Ke),[[b,r.form.confirm_password]]),r.errors.confirm_password?(i(),n("span",Ze,l(r.errors.confirm_password),1)):d("",!0)])])),e("div",We,[e("div",Xe,[e("label",Ye,[m(l(o.$t("transport_type"))+" ",1),s[27]||(s[27]=e("span",{class:"text-danger"},"*",-1))]),_(e("select",{id:"transport_type",class:"form-select","onUpdate:modelValue":s[8]||(s[8]=t=>r.form.transport_type=t)},[e("option",$e,l(o.$t("select")),1),e("option",er,l(o.$t("taxi")),1),e("option",rr,l(o.$t("delivery")),1),e("option",or,l(o.$t("both")),1)],512),[[R,r.form.transport_type]]),r.errors.transport_type?(i(),n("span",sr,l(r.errors.transport_type),1)):d("",!0)])]),e("div",tr,[e("div",lr,[e("label",ar,[m(l(o.$t("vehicle_type"))+" ",1),s[28]||(s[28]=e("span",{class:"text-danger"},"*",-1))]),_(e("select",{id:"vehicle_type",class:"form-select","onUpdate:modelValue":s[9]||(s[9]=t=>r.form.vehicle_type=t)},[e("option",ir,l(o.$t("select")),1),(i(!0),n(V,null,M(v.vehicleTypes,t=>(i(),n("option",{key:t.id,value:t.id},l(t.name),9,nr))),128))],512),[[R,r.form.vehicle_type]]),r.errors.vehicle_type?(i(),n("span",dr,l(r.errors.vehicle_type),1)):d("",!0)])]),e("div",cr,[e("div",mr,[e("label",_r,[m(l(o.$t("vehicle_make"))+" ",1),s[29]||(s[29]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:o.$t("enter_vehicle_make"),id:"vehicle_make","onUpdate:modelValue":s[10]||(s[10]=t=>r.form.vehicle_make=t)},null,8,ur),[[b,r.form.vehicle_make]]),r.errors.vehicle_make?(i(),n("span",vr,l(r.errors.vehicle_make),1)):d("",!0)])]),e("div",fr,[e("div",gr,[e("label",hr,[m(l(o.$t("vehicle_model"))+" ",1),s[30]||(s[30]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:o.$t("enter_vehicle_model"),id:"vehicle_model","onUpdate:modelValue":s[11]||(s[11]=t=>r.form.vehicle_model=t)},null,8,br),[[b,r.form.vehicle_model]]),r.errors.vehicle_make?(i(),n("span",pr,l(r.errors.vehicle_make),1)):d("",!0)])]),e("div",yr,[e("div",kr,[e("label",wr,[m(l(o.$t("vehicle_color"))+" ",1),s[31]||(s[31]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:o.$t("enter_vehicle_color"),id:"car_color","onUpdate:modelValue":s[12]||(s[12]=t=>r.form.car_color=t)},null,8,Cr),[[b,r.form.car_color]]),r.errors.car_color?(i(),n("span",Mr,l(r.errors.car_color),1)):d("",!0)])]),e("div",Vr,[e("div",Ur,[e("label",Sr,[m(l(o.$t("vehicle_number"))+" ",1),s[32]||(s[32]=e("span",{class:"text-danger"},"*",-1))]),_(e("input",{type:"text",class:"form-control",placeholder:o.$t("enter_vehicle_number"),id:"car_number","onUpdate:modelValue":s[13]||(s[13]=t=>r.form.car_number=t)},null,8,xr),[[b,r.form.car_number]]),r.errors.car_number?(i(),n("span",Br,l(r.errors.car_number),1)):d("",!0)])]),(u=v.preferences)!=null&&u.length?(i(),n("div",Fr,[e("div",Rr,[e("label",Ir,[m(l(o.$t("preference"))+" ",1),s[33]||(s[33]=e("span",{class:"text-danger"},"*",-1))]),h(k,{id:"preference",mode:"tags",modelValue:r.form.preference,"onUpdate:modelValue":s[14]||(s[14]=t=>r.form.preference=t),"close-on-select":!1,searchable:!0,"create-option":!1,options:v.preferences.map(t=>({value:t.id,label:t.name})),placeholder:o.$t("preference")},null,8,["modelValue","options","placeholder"]),(i(!0),n(V,null,M(r.errors.preference,(t,w)=>(i(),n("span",{key:w,class:"text-danger"},l(t),1))),128))])])):d("",!0),e("div",Lr,[h(I,{imageType:"driver",initialImageUrl:r.form.profile_picture,flexStyle:"0 0 calc(50% - 20px)",aspectRatio:"5 / 5",onImageSelected:s[15]||(s[15]=t=>r.handleImageSelected(t,"profile_picture")),onImageRemoved:s[16]||(s[16]=()=>r.handleImageRemoved("profile_picture")),id:"profilePictureInput",onChange:r.onFileChange},null,8,["initialImageUrl","onChange"]),r.errors.profile_picture?(i(),n("span",qr,l(r.errors.profile_picture),1)):d("",!0)]),e("div",Pr,[e("div",Ar,[e("button",{type:"submit",class:"btn btn-primary",disabled:r.isButtonDisabled},l(v.driver?o.$t("update"):o.$t("save")),9,Dr)])])])]}),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[r.successMessage?(i(),n("div",Hr,[e("div",Nr,[s[34]||(s[34]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[35]||(s[35]=e("strong",null,"Success",-1)),m(" - "+l(r.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[18]||(s[18]=(...u)=>r.dismissMessage&&r.dismissMessage(...u)),"aria-label":"Close Success Message"})])])):d("",!0),r.alertMessage?(i(),n("div",Tr,[e("div",jr,[s[36]||(s[36]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[37]||(s[37]=e("strong",null,"Alert",-1)),m(" - "+l(r.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[19]||(s[19]=(...u)=>r.dismissMessage&&r.dismissMessage(...u)),"aria-label":"Close Alert Message"})])])):d("",!0)])]),_:1})}const eo=O(re,[["render",Or]]);export{eo as default};
