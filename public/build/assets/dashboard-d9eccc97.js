import{L as A}from"./main-b839be26.js";import{_ as T,S as F,Z as H,B as N,D as O,T as R,r as D,R as q,o as M,g as p,i as b,y as L,w as u,a as $,aE as x,l as f,n as e,J as a,q as m,z as k,k as C,L as B,F as j,C as z}from"./vendor-54d6cb1e.js";import{P as S}from"./page-header-ff719701.js";import{W as P}from"./warning-ae968222.js";import{l as V,u as I}from"./footer-7e4f68d9.js";import"./app-cb082573.js";const U={computed:{...V,...F(["permissions"]),layoutType:{get(){return this.$store?this.$store.state.layout.layoutType:{}}}},components:{Layout:A,PageHeader:S,Head:H,Link:N,Warning:P},setup(o){const{selectedLocation:l}=I(),{t:s}=O(),r=R({service_location_id:l.value}),h=D({}),t=D({}),y=D({}),i=D({}),v=async()=>{try{const d=r.data(),c=await $.get("/referral-dashboard/fetch",{params:d});h.value=c.data.userData,i.value=c.data.driverData,t.value=c.data.referralData,y.value=c.data.dashboardData,t.value.total_drivers_rise<=0?t.value.total_drivers_change=`${t.value.total_drivers_rise} %`:t.value.total_drivers_change=`+${t.value.total_drivers_rise} %`,t.value.total_users_rise<=0?t.value.total_users_change=`${t.value.total_users_rise} %`:t.value.total_users_change=`+${t.value.total_users_rise} %`,t.value.referrals_rise<=0?t.value.referrals_change=`${t.value.referrals_rise} %`:t.value.referrals_change=`+${t.value.referrals_rise} %`,t.value.referral_earning_rise<=0?t.value.referral_earning_change=`${t.value.referral_earning_rise} %`:t.value.referral_earning_change=`+${t.value.referral_earning_rise} %`}catch(d){console.error(d)}},g=async()=>{await v();const d={series:[h.value.non_referred_users??0,h.value.referred_users??0],labels:["Normal User","Referral User"],chart:{type:"donut",height:300},plotOptions:{pie:{donut:{size:`${(h.value.referred_users??0)/(h.value.non_referred_users??1)}%`}}},dataLabels:{enabled:!1},stroke:{width:0},legend:{position:"bottom",horizontalAlign:"center",markers:{width:20,height:6,radius:2},itemMargin:{horizontal:12,vertical:0}},colors:["#0d6efd","#ffc107"]};new x(document.querySelector("#userDonutChart"),d).render();const c={series:[{name:"User Referrals",data:h.value.referred_data}],chart:{type:"area",height:300,toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3},xaxis:{categories:[s("jan"),s("feb"),s("mar"),s("apr"),s("may"),s("jun"),s("jul"),s("aug"),s("sep"),s("oct"),s("nov"),s("dec")]},yaxis:{labels:{formatter:_=>_.toFixed(0)},tickAmount:5,min:0,max:Math.max(...h.value.referred_data)},colors:["#198754"],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.1,stops:[0,90,100]}},grid:{borderColor:"#f1f1f1"}};new x(document.querySelector("#userAreaChart"),c).render();const w={series:[i.value.non_referred_users??0,i.value.referred_users??0],labels:["Normal Driver","Referral Driver"],chart:{type:"donut",height:300},plotOptions:{pie:{donut:{size:`${(i.value.referred_users??0)/(i.value.non_referred_users??1)}%`}}},dataLabels:{enabled:!1},stroke:{width:0},legend:{position:"bottom",horizontalAlign:"center",markers:{width:20,height:6,radius:2},itemMargin:{horizontal:12,vertical:0}},colors:["#6610f2","#20c997"]};new x(document.querySelector("#driverDonutChart"),w).render();const n={series:[{name:"Driver Referrals",data:i.value.referred_data}],chart:{type:"area",height:300,toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3},xaxis:{categories:[s("jan"),s("feb"),s("mar"),s("apr"),s("may"),s("jun"),s("jul"),s("aug"),s("sep"),s("oct"),s("nov"),s("dec")]},yaxis:{labels:{formatter:_=>_.toFixed(0)},tickAmount:5,min:0,max:Math.max(...i.value.referred_data)},colors:["#0dcaf0"],fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.1,stops:[0,90,100]}},grid:{borderColor:"#f1f1f1"}};new x(document.querySelector("#driverAreaChart"),n).render()};return q(()=>l.value,d=>{d&&(r.service_location_id=d,v())}),M(()=>{g()}),{referData:t,dashboardData:y}},components:{Layout:A,PageHeader:S}},E={class:"container-fluid py-3"},W={class:"row g-3"},G={class:"col-md-3"},J={class:"card card-animate"},Z={class:"card-body"},K={class:"text-muted text-uppercase fw-medium mb-2"},Q={class:"fw-bold"},X={class:"col-md-3"},Y={class:"card card-animate"},ee={class:"card-body"},re={class:"text-muted text-uppercase fw-medium mb-2"},ae={class:"fw-bold"},se={class:"col-md-3"},te={class:"card card-animate"},oe={class:"card-body"},le={class:"text-muted text-uppercase fw-medium mb-2"},de={class:"fw-bold"},ie={class:"col-md-3"},ce={class:"card card-animate"},ne={class:"card-body"},_e={class:"text-muted text-uppercase fw-medium mb-2"},ue={class:"fw-bold"},he={class:"row row-cols-xl-5 row-cols-lg-3 row-cols-md-2 row-cols-1 mt-5"},fe={class:"card"},me={class:"card-body text-center"},ve={class:"avatar-md rounded-circle object-fit-cover mt-n5 img-thumbnail border-success mx-auto d-block position-relative"},be={class:"rank"},ge={class:"mt-5"},pe=["src"],ye={class:"mt-2 mb-1"},we={class:"text-muted mb-2"},De={class:"row g-3 mt-3"},xe={class:"col-md-6"},ke={class:"card"},Ce={class:"card-header"},Le={class:"mb-0"},Ae={class:"col-md-6"},Be={class:"card"},je={class:"card-header"},ze={class:"mb-0"},Se={class:"row row-cols-xl-5 row-cols-lg-3 row-cols-md-2 row-cols-1 mt-5"},Te={class:"card"},Fe={class:"card-body text-center"},He={class:"avatar-md rounded-circle object-fit-cover mt-n5 img-thumbnail border-success mx-auto d-block position-relative"},Ne={class:"rank"},Oe={class:"mt-5"},Re=["src"],qe={class:"mt-2 mb-1"},Me={class:"text-muted mb-2"},$e={class:"row g-3 mt-3"},Pe={class:"col-md-6"},Ve={class:"card"},Ie={class:"card-header"},Ue={class:"mb-0"},Ee={class:"col-md-6"},We={class:"card"},Ge={class:"card-header"},Je={class:"mb-0"};function Ze(o,l,s,r,h,t){const y=p("Head"),i=p("PageHeader"),v=p("BcardBody"),g=p("BCard"),d=p("Layout");return b(),L(d,null,{default:u(()=>{var c,w;return[f(y,{title:o.$t("referral_dashboard")},null,8,["title"]),f(i,{title:o.$t("referral_dashboard"),pageTitle:"Referral Dashboard"},null,8,["title"]),e("div",E,[e("div",W,[e("div",G,[e("div",J,[e("div",Z,[e("p",K,a(o.$t("total_drivers")),1),e("h4",Q,a(r.referData.total_drivers),1),e("p",{class:m({"text-success":r.referData.total_drivers_rise>=0,"text-danger":r.referData.total_drivers_rise<0,"mb-0":!0})},[e("i",{class:m(r.referData.total_drivers_rise<0?"ri-arrow-down-line":"ri-arrow-up-line")},null,2),k(" "+a(r.referData.total_drivers_change),1)],2)])])]),e("div",X,[e("div",Y,[e("div",ee,[e("p",re,a(o.$t("total_users")),1),e("h4",ae,a(r.referData.total_users),1),e("p",{class:m({"text-success":r.referData.total_users_rise>=0,"text-danger":r.referData.total_users_rise<0,"mb-0":!0})},[e("i",{class:m(r.referData.total_users_rise<0?"ri-arrow-down-line":"ri-arrow-up-line")},null,2),k(" "+a(r.referData.total_users_change),1)],2)])])]),e("div",se,[e("div",te,[e("div",oe,[e("p",le,a(o.$t("active_referrals")),1),e("h4",de,a(r.referData.active_referrals),1),e("p",{class:m({"text-success":r.referData.referrals_rise>=0,"text-danger":r.referData.referrals_rise<0,"mb-0":!0})},[e("i",{class:m(r.referData.referrals_rise<0?"ri-arrow-down-line":"ri-arrow-up-line")},null,2),k(" "+a(r.referData.referrals_change),1)],2)])])]),e("div",ie,[e("div",ce,[e("div",ne,[e("p",_e,a(o.$t("referral_earning")),1),e("h4",ue,a(r.dashboardData.currency_symbol+" "+r.referData.referral_earning),1),e("p",{class:m({"text-success":r.referData.referral_earning_rise>=0,"text-danger":r.referData.referral_earning_rise<0,"mb-0":!0})},[e("i",{class:m(r.referData.referral_earning_rise<0?"ri-arrow-down-line":"ri-arrow-up-line")},null,2),k(" "+a(r.referData.total_users_change),1)],2)])])])]),f(g,null,{default:u(()=>[f(v,null,{default:u(()=>[e("h4",null,a(o.$t("user_referral")),1)]),_:1})]),_:1}),(c=r.dashboardData.user_leaderboard)!=null&&c.length?(b(),L(g,{key:0},{default:u(()=>[f(v,null,{default:u(()=>[e("div",he,[(b(!0),C(j,null,B(r.dashboardData.user_leaderboard,(n,_)=>(b(),C("div",{class:"col",key:_},[e("div",fe,[e("div",me,[e("p",ve,[e("h2",be,a(_+1),1)]),e("a",ge,[e("img",{src:n.profile_picture,alt:"",class:"avatar-md rounded-circle object-fit-cover img-thumbnail border-light mx-auto d-block"},null,8,pe),e("h5",ye,a(n.name),1)]),e("p",we,a(n.referral_count)+" "+a(o.$t("referrals")),1)])])]))),128))])]),_:1})]),_:1})):z("",!0),e("div",De,[e("div",xe,[e("div",ke,[e("div",Ce,[e("h5",Le,a(o.$t("user_referral_overview")),1)]),l[0]||(l[0]=e("div",{class:"card-body"},[e("div",{id:"userDonutChart"})],-1))])]),e("div",Ae,[e("div",Be,[e("div",je,[e("h5",ze,a(o.$t("user_referral")),1)]),l[1]||(l[1]=e("div",{class:"card-body"},[e("div",{id:"userAreaChart"})],-1))])])]),f(g,null,{default:u(()=>[f(v,null,{default:u(()=>[e("h4",null,a(o.$t("driver_referral")),1)]),_:1})]),_:1}),(w=r.dashboardData.driver_leaderboard)!=null&&w.length?(b(),L(g,{key:1},{default:u(()=>[f(v,null,{default:u(()=>[e("div",Se,[(b(!0),C(j,null,B(r.dashboardData.driver_leaderboard,(n,_)=>(b(),C("div",{class:"col",key:_},[e("div",Te,[e("div",Fe,[e("p",He,[e("h2",Ne,a(_+1),1)]),e("a",Oe,[e("img",{src:n.profile_picture,alt:"",class:"avatar-md rounded-circle object-fit-cover img-thumbnail border-light mx-auto d-block"},null,8,Re),e("h5",qe,a(n.name),1)]),e("p",Me,a(n.referral_count)+" "+a(o.$t("referrals")),1)])])]))),128))])]),_:1})]),_:1})):z("",!0),e("div",$e,[e("div",Pe,[e("div",Ve,[e("div",Ie,[e("h5",Ue,a(o.$t("driver_referral")),1)]),l[2]||(l[2]=e("div",{class:"card-body"},[e("div",{id:"driverDonutChart"})],-1))])]),e("div",Ee,[e("div",We,[e("div",Ge,[e("h5",Je,a(o.$t("driver_referral")),1)]),l[3]||(l[3]=e("div",{class:"card-body"},[e("div",{id:"driverAreaChart"})],-1))])])])])]}),_:1})}const ar=T(U,[["render",Ze]]);export{ar as default};
