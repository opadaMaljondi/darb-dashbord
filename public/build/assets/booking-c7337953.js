import{_ as Oe,Z as je,B as De,$ as Ge,P as He,S as ze,W as U,D as Ne,r as b,T as fe,R as E,a0 as Xe,a as Z,a1 as ve,o as ge,G as Ke,g as T,i as p,y as We,w as B,l as w,n as e,z as $,J as _,t as C,K as ie,k as u,L as S,F as I,M as O,C as M,H as Je,X as Ye,a9 as Qe,p as Ze}from"./vendor-54d6cb1e.js";import{L as $e}from"./main-b839be26.js";import{P as et}from"./page-header-ff719701.js";import{F as tt}from"./FormValidation-cabc17c8.js";import{i as ot}from"./app-cb082573.js";import{_ as st}from"./UserWebMenu-96301c0f.js";import{g as at}from"./googleMap-c31fbadb.js";import"./footer-7e4f68d9.js";const lt={data(){return{rightOffcanvas:!1,isPocSame:!1,form:{is_later:"",assign_method:0,name:"",mobile:"",drop_poc_name:"",drop_poc_mobile:""},dateTimeConfig:{enableTime:!0,dateFormat:"Y-m-d H:i:ss"}}},watch:{isPocSame(i){i?(this.form.drop_poc_name=this.form.name,this.form.drop_poc_mobile=this.form.mobile):(this.form.drop_poc_name="",this.form.drop_poc_mobile="")},"form.name"(i){this.isPocSame&&(this.form.drop_poc_name=i)},"form.mobile"(i){this.isPocSame&&(this.form.drop_poc_mobile=i)}},components:{Layout:$e,PageHeader:et,Head:je,Link:De,Scrollbar:Ge,FormValidation:tt,googleMap:at,flatPickr:He,UserWebMenu:st},computed:{...ze(["permissions"]),transport_options(){let i=[];return this.form.ride_type==="regular"&&(i=this.transport_type_regular,this.form.transport_type=i[0],console.log("regular",i)),i.length===1&&(this.form.transport_type=i[0]),i}},props:{countries:Array,default_flag:String,default_dial_code:String,successMessage:String,alertMessage:String,validate:Function,transport_type_regular:Array,ride_type_for_ride:Array,is_rental:Boolean,goodsTypes:Array,user:Object,firebaseSettings:Object,map_key:String,baseUrl:String,default_location:Object,enable_ride_without_destination:Boolean},methods:{timer(){let i;U.fire({title:"Booking alert!",html:"Your Ride has been Booked <b></b> Successfully.",timer:2e3,timerProgressBar:!0,didOpen:()=>{U.showLoading(),i=setInterval(()=>{U.getContent().querySelector("b").textContent=U.getTimerLeft()},100)},didClose:()=>{clearInterval(i)}}).then(a=>{a.dismiss===U.DismissReason.timer&&console.log("I was closed by the timer")})}},setup(i){const{t:a}=Ne(),L=b({dial_code:i.default_dial_code||"",flag:i.default_flag||""}),l=b(null),s=fe({mobile:i.user.mobile,name:i.user.name,user_id:i.user.id,pick_address:"",drop_address:"",terminal:null,enterance:null,pick_lat:"",pick_lng:"",drop_lat:null,drop_lng:null,vehicle_type:null,payment_opt:1,poly_line:"",goods_type_id:null,transport_type:"",pickup_poc_name:null,drop_poc_name:null,goods_type_quantity:null,is_later:0,assign_method:0,is_rental:0,rental_package_id:null,ride_type:"regular",stops:null,trip_start_time:null,country:i.default_dial_code,drop_poc_mobile:null,distance:0,duration:0}),z=b("-"),ee=b(!1),te=b(!1),A=b(null),V=b(null);b(null);const j=b([]),N=b([]),W=b([]),oe={pick_address:{required:!0},transport_type:{required:!0},vehicle_type:{required:!0}},n=b({}),J=b(null),o=b([]),h=b([]),X=b([]),se=b([]),he=b(null),re=b(null),m=fe({pick_lat:"",pick_lng:"",drop_lat:"",drop_lng:"",distance:0,distance_in_unit:0,duration:0}),ne=b("0m");E(()=>m.duration,t=>{const v=Math.floor(t/60),c=t%60;ne.value=v>0?`${v}h ${c}m`:`${c}m`});const ye=async()=>{var g;const t=[],v={latitude:m.pick_lat,longitude:m.pick_lng};if(t.push(v),Array.isArray(k)&&k.forEach(r=>{const y={latitude:r.latitude,longitude:r.longitude};t.push(y)}),m.drop_lat){const r={latitude:m.drop_lat,longitude:m.drop_lng};t.push(r)}const c={address:t,ride_type:s.ride_type};try{const r=await Z.post("/dispatch/serviceVerify",c)}catch(r){if(r.response&&r.response.status===422)n.value=r.response.data.errors;else if(r.response&&r.response.status===500){if(r.response.data.message=="service not available with this location")n.value.pick_address=[a("service_unavailable")];else if(r.response.data.message=="Outstation service not available within this location")delete n.value.pick_address,n.value.drop_address=[a("outstation_service_unavailable")];else if(r.response.data.message=="Pick up and Drop should not be in the same zone")delete n.value.pick_address,n.value.drop_address=[a("same_zone_outstation_unavailable")];else{const y=r.response.data;delete n.value.pick_address,delete n.value.drop_address,t.forEach((d,f)=>{n.value.stop||(n.value.stop={}),f!==0&&(f!==t.length?y[f].available?n.value.stop[f]=[a("ride_service_unavailable")]:delete n.value.stop[f]:y[f].available?n.value.drop_address=[a("ride_service_unavailable")]:delete n.value.drop_address)})}return(g=n.value)!=null&&g.stop&&Object.keys(n.value.stop).length==0&&delete n.value.stop,de(n)}else console.error(a("error_creating_vehicle_price"),r),Y.value=a("failed_to_make_booking_contact_admin")}},be=t=>{t=="pickup"?s.pick_address.length<3?j.value=[]:setTimeout(()=>{ae(s.pick_address,t)},300):t=="drop"&&(s.drop_address.length<3?N.value=[]:setTimeout(()=>{ae(s.drop_address,t)},300))},P=async()=>{var t;return n.value=J.value.validate(),m.pick_lat&&await ye(),s.is_later&&(s.trip_start_time?delete n.value.trip_start_time:n.value.trip_start_time=[a("required")]),s.is_rental?(s.drop_lat="",s.drop_lng="",m.drop_lat="",m.drop_lng="",m.distance=0,m.duration=0,s.drop_address="",re.value=null,s.poly_line="",G.value={},k.length>0&&(k.forEach((v,c)=>{delete h.value[c]}),k.length=0),s.rental_package_id?delete n.value.rental_package_id:n.value.rental_package_id=[a("required")]):(!i.enable_ride_without_destination||s.is_out_station)&&!s.drop_address&&s.drop_address.length==0?n.value.drop_address=[a("required")]:delete n.value.drop_address,s.is_out_station&&(s.trip_start_time?delete n.value.trip_start_time:n.value.trip_start_time=[a("required")]),s.is_out_station&&s.is_round_trip&&(s.return_time?delete n.value.return_time:n.value.return_time=[a("required")]),s.transport_type=="delivery"&&(s.goods_type_id?delete n.value.goods_type_id:n.value.goods_type_id=[a("required")],s.drop_poc_name?delete n.value.drop_poc_name:n.value.drop_poc_name=[a("required")],s.drop_poc_mobile?delete n.value.drop_poc_mobile:n.value.drop_poc_mobile=[a("required")]),k.length>0&&k.forEach((v,c)=>{n.value.stop||(n.value.stop={}),v.latitude?n.value.stop[c]&&delete n.value.stop[c]:n.value.stop[c]=[a("required")]}),(t=n.value)!=null&&t.stop&&Object.keys(n.value.stop).length==0&&delete n.value.stop,de(n)},de=t=>{if(Object.keys(t.value).length>0)return D.value=!1,l.value&&(l.value.scrollTop=0),!1;if(s.vehicle_type)return delete t.value.stop,D.value=!0,!0},D=b(!1),ce=b(i.successMessage||""),Y=b(i.alertMessage||""),ae=(t,v,c=null)=>{const g="https://places.googleapis.com/v1/places:autocomplete",r={"Content-Type":"application/json","X-Goog-Api-Key":i.map_key,"X-Goog-FieldMask":"suggestions.placePrediction.placeId,suggestions.placePrediction.place,suggestions.placePrediction.text"};fetch(g,{method:"POST",headers:r,body:JSON.stringify({input:t})}).then(d=>d.json()).then(d=>{d.suggestions.length>0&&(v=="pickup"?j.value=d.suggestions.filter(f=>f.placePrediction).map(f=>({placeId:f.placePrediction.placeId,formattedAddress:f.placePrediction.text.text})):v=="drop"?N.value=d.suggestions.filter(f=>f.placePrediction).map(f=>({placeId:f.placePrediction.placeId,formattedAddress:f.placePrediction.text.text})):v=="stop"&&(W.value[c]=d.suggestions.filter(f=>f.placePrediction).map(f=>({placeId:f.placePrediction.placeId,formattedAddress:f.placePrediction.text.text}))))}).catch(d=>{console.error("Error fetching autocomplete results:",d)})},ke=async(t,v,c=null)=>{const g={"X-Goog-Api-Key":i.map_key,"X-Goog-FieldMask":"types,location"};fetch(`https://places.googleapis.com/v1/places/${t.placeId}?fields=types,location`,{headers:g}).then(r=>r.json()).then(r=>{if(v=="pickup"){m.pick_lat=r.location.latitude,m.pick_lng=r.location.longitude,s.pick_address=t.formattedAddress;const y={lat:r.location.latitude,lng:r.location.longitude};A.value=y,j.value=[]}else if(v=="drop"){m.drop_lat=r.location.latitude,m.drop_lng=r.location.longitude,s.drop_address=t.formattedAddress;const y={lat:r.location.latitude,lng:r.location.longitude};V.value=y,N.value=[]}else if(v=="stop"){s.drop_address=t.formattedAddress,W.value[c]=[],k[c].address=t.formatted_address,k[c].latitude=r.location.latitude,k[c].longitude=r.location.longitude;const y={lat:r.location.latitude,lng:r.location.longitude};h[c]=y}_e()}).catch(r=>{console.error("Error fetching autocomplete results:",r)})},Me=()=>{ce.value="",Y.value=""},k=Xe([]),we=5,Se=()=>{console.log("stopovers-length"),console.log(k.length),k.length<we?(k.push({address:"",latitude:null,longitude:null}),k.length==0&&addStopMarker(0),k.forEach((t,v)=>{addStopMarker(v)})):U.fire(a("maximum_stopovers_reached"),a("you_can_add_up_to_5_stopovers_only"),"warning")},Ie=t=>{h[t]&&h[t].setMap(null),k.splice(t,1),k.forEach((v,c)=>{addStopMarker(c)}),t>0&&_e()},G=b({});E(()=>m.pick_lat,async t=>{t&&(P(),H())}),E(()=>m.drop_lat,async t=>{t&&m.pick_lat&&P()}),E(()=>m.distance,async t=>{s.ride_type=="rental"?m.pick_lat&&m.pick_lng&&await H():m.pick_lat&&m.pick_lng&&m.drop_lat&&m.drop_lng&&await H()});const _e=async()=>{if(m.distance=0,m.duration=0,s.poly_line.length&&(s.poly_line=""),!A.value||!V.value)return;const t="https://routes.googleapis.com/directions/v2:computeRoutes",v={origin:{location:{latLng:{latitude:A.value.lat,longitude:A.value.lng}}},destination:{location:{latLng:{latitude:V.value.lat,longitude:V.value.lng}}},travelMode:"DRIVE",routingPreference:"TRAFFIC_AWARE",computeAlternativeRoutes:!1,routeModifiers:{avoidTolls:!1,avoidHighways:!1,avoidFerries:!1},languageCode:"en-US",units:"IMPERIAL"};v.intermediates=k.map(g=>({location:new google.maps.LatLng(g.latitude,g.longitude)}));const c={"Content-Type":"application/json","X-Goog-Api-Key":i.map_key,"X-Goog-FieldMask":"routes.duration,routes.distanceMeters,routes.polyline.encodedPolyline,routes.viewport"};Z.post(t,v,{headers:c}).then(g=>{var y,d;const r=(y=g.data.routes)==null?void 0:y[0];r&&(m.distance=r.distanceMeters,m.duration=Math.round(parseInt(r.duration.slice(0,-1))/60),(d=r.polyline)!=null&&d.encodedPolyline&&(s.poly_line=r.polyline.encodedPolyline),H(),n.value.map&&delete n.value.map)}).catch(g=>{n.value.map=a("service_not_available"),console.error("Error:",g)})},H=async()=>{if(P()){if(s.is_rental)return D.value=!1,loadRentalPack(),!1}else return D.value=!1,!1;se.value=[];const{pick_lat:t,pick_lng:v,drop_lat:c,drop_lng:g,distance:r,duration:y}=m.data(),d={pick_lat:t,pick_lng:v,distance:r,duration:y};d.transport_type=s.transport_type,c&&(d.drop_lat=c),g&&(d.drop_lng=g),s.is_out_station&&(d.is_out_station=1,s.trip_start_time&&(d.trip_start_time=s.trip_start_time),s.return_time&&(d.return_time=s.return_time)),d.dispatch=1,k.length>0&&(d.stops=JSON.stringify(k));try{const f=await Z.post("/dispatch/request/eta",d);o.value=f.data.data,o.value.length>0&&(o.value[0].unit_in_words=="MILES"?(m.distance_in_unit=m.distance*.621371,z.value=a("miles")):(m.distance_in_unit=m.distance,z.value=a("km"))),ue(A.value)}catch(f){f.response.data.data==2?(m.distance_in_unit=m.distance*.621371,z.value=a("miles")):(m.distance_in_unit=m.distance,z.value=a("km")),n.value.drop_address=[a("exceeds_maximum_distance_for_ride")],console.error(n)}},xe=(t,v)=>{const c=Pe(v);return o.value.forEach(g=>{t.vehicle_types&&t.vehicle_types.includes(g.type_id)&&(!g.driver_distance||g.driver_distance>v)&&(g.driver_time=c)}),!0};function Ce(t,v,c,g,r,y=1e3){const d=performance.now();function f(q){const F=q-d,R=Math.min(F/y,1),K=v+(g-v)*R,x=c+(r-c)*R;t.lat=K,t.lng=x,R<1&&requestAnimationFrame(f)}requestAnimationFrame(f)}E(()=>s.vehicle_type,async t=>{t&&(ue(A.value),P()||(D.value=!1))}),E(()=>s.transport_type,async t=>{t&&(t=="taxi"?s.goods_type_quantity=null:s.goods_type_quantity=s.goods_type_quantity??0,s.pick_address&&P()&&H())}),E(()=>s.ride_type,async t=>{s.pick_address&&P()&&H()});const pe=ve(t=>{P()},300);E(()=>s.name,async t=>{pe(t),s.pick_address&&P()}),E(()=>s.return_time,async t=>{t&&await H()});const ue=t=>{o.value.forEach(c=>{c.driver_time=null}),firebase.database().ref("drivers").on("value",c=>{c.forEach(g=>{var F,R;const r=g.val(),y=r.g,d=qe(y);if(d){const K=Be(t.lat,t.lng,d.lat,d.lon);var f=!0;if(s.vehicle_type){f=!1;var q=(R=(F=o.value)==null?void 0:F.find(x=>x.zone_type_id===s.vehicle_type))==null?void 0:R.type_id;q&&r.vehicle_types&&r.vehicle_types.includes(q)&&(f=!0)}if(K<=10&&r.is_available&&r.is_active&&f){xe(r,K);const x=G.value[r.id];x?x.lat!==d.lat&&x.lng!==d.lon&&Ce(x,x.lat,x.lng,d.lat,d.lon):G.value[r.id]={lat:d.lat,lng:d.lon,type_icon:r.vehicle_type_icon}}else G.value[r.id]&&delete G.value[r.id]}})})},Pe=t=>t<2?"3 Mins":t>2&&t<5?"5 Mins":t>5&&t<7?"10 Mins":"15 mins",qe=t=>{const v="0123456789bcdefghjkmnpqrstuvwxyz",c=[16,8,4,2,1];let g=!0,r=-90,y=90,d=-180,f=180,q,F;if(t){for(let R=0;R<t.length;R++){let K=t.charAt(R),x=v.indexOf(K);for(let le=0;le<5;le++){let me=c[le];if(g){let Q=(d+f)/2;x&me?d=Q:f=Q}else{let Q=(r+y)/2;x&me?r=Q:y=Q}g=!g}}return q=(r+y)/2,F=(d+f)/2,{lat:q,lon:F}}},Be=(t,v,c,g)=>{const y=(c-t)*Math.PI/180,d=(g-v)*Math.PI/180,f=Math.sin(y/2)*Math.sin(y/2)+Math.cos(t*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(d/2)*Math.sin(d/2);return 6371*(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)))},Ae=(t,v)=>{new google.maps.Geocoder().geocode({location:t},(g,r)=>{r==="OK"?g[0]?document.getElementById(v).value=g[0].formatted_address:console.error(a("no_reverse_geocode_results_found")):console.error(a("geocoder_failed_due_to")+r)})},Ve=async()=>{if(!P())return!1;D.value=!1;const{pick_lat:t,pick_lng:v,drop_lat:c,drop_lng:g,distance:r,duration:y}=m.data();t&&(s.pick_lat=t),v&&(s.pick_lng=v),c&&(s.drop_lat=c),g&&(s.drop_lng=g),k.length>0&&(s.stops=JSON.stringify(k)),r&&(s.distance=r),y&&(s.duration=y);try{let d;d=await Z.post("/web-create-request",s.data());const f=d.data.data.id;if(d.data.success===!0){let q;U.fire({title:"Booking Successfull",html:"Your Ride has been Booked <b></b> Successfully.",timer:2e3,timerProgressBar:!0,didOpen:()=>{U.showLoading(),q=setInterval(()=>{U.getContent().querySelector("b").textContent=U.getTimerLeft()},100)},didClose:()=>{clearInterval(q),window.location.href=`/history/view/${f}`}}).then(()=>{clearInterval(q),window.location.href=`/history/view/${f}`}),s.reset(),m.reset(),o.value=[],se.value=[],k.length=0,A.value=null,V.value=null,s.poly_line="",G.value={}}else Y.value=a("failed_to_make_booking_contact_admin")}catch(d){d.response&&d.response.status===422?n.value=d.response.data.errors:(console.error(a("error_creating_vehicle_price"),d),Y.value=a("failed_to_make_booking_contact_admin"))}};ge(async()=>{await ot("en")}),ge(()=>{var t={apiKey:i.firebaseSettings.firebase_api_key,authDomain:i.firebaseSettings.firebase_auth_domain,databaseURL:i.firebaseSettings.firebase_database_url,projectId:i.firebaseSettings.firebase_project_id,storageBucket:i.firebaseSettings.firebase_storage_bucket,messagingSenderId:i.firebaseSettings.firebase_messaging_sender_id,appId:i.firebaseSettings.firebase_app_id};firebase.apps.length==0&&firebase.initializeApp(t),i.transport_type_regular.length>0&&(s.transport_type=i.transport_type_regular[0])});const Re=b(""),Ue=b(""),Ee=Ke(()=>{}),Te=t=>{L.value=t,s.country=t.dial_code},Le=ve(async()=>{const t=await Z.get("/dispatch/fetch-user-detail",{params:{mobile:s.mobile}});console.log(t.data.data),t.data.data?(s.pick_address&&P(),s.name=t.data.data.name,s.user_id=t.data.data.id):(s.user_id=null,s.name=null)},300),Fe=()=>{const t=m.duration,v=s.trip_start_time,c=new Date(v);return c.setMinutes(c.getMinutes()+t),c};return E(()=>s.vehicle_type,async t=>{t&&await P()}),{form:s,successMessage:ce,alertMessage:Y,dismissMessage:Me,validationRef:J,validationRules:oe,errors:n,mobile:Re,selectedCountry:L,driverMarkers:G,pickupLocation:A,dropLocation:V,searchQuery:Ue,filteredCountries:Ee,selectCountry:Te,validateNumber:Le,showAiportTerminal:ee,showTrainStationEnterance:te,etaParam:m,vehicleTypes:o,makeBooking:Ve,stopovers:k,addStopover:Se,removeStopover:Ie,fetchAutocompleteResults:ae,handleInput:be,selectSuggestion:ke,pickSuggestions:j,dropSuggestions:N,stopSuggestions:W,showModal:D,formattedDuration:ne,unit:z,pickupMarker:he,dropMarker:re,packageTypes:X,rentalVehicleTypes:se,reverseGeocodeAndUpdateInput:Ae,bookValidate:P,getMinReturnTime:Fe,nameChangeShow:pe}}},it={class:"row mt-4"},rt={class:"col-lg-6 col-sm-6"},nt={class:"p-0 border border-dashed rounded"},dt={class:"d-flex align-items-center"},ct={class:"flex-grow-1"},_t={class:"text-muted mb-1"},pt={class:"fs-16 fw-bold ms-2"},ut={class:"col-lg-6 col-sm-6"},mt={class:"p-0 border border-dashed rounded"},ft={class:"d-flex align-items-center"},vt={class:"flex-grow-1"},gt={class:"text-muted mb-1"},ht={class:"fs-16 fw-bold ms-2"},yt={class:"row"},bt={class:"col-12 col-lg-6",style:{"max-height":"500px","overflow-y":"auto"}},kt={class:"row"},Mt={class:"d-flex align-items-center mt-4"},wt={class:"card-title mb-3 flex-grow-1"},St={class:"col-6"},It={class:"mb-3"},xt={for:"type",class:"form-label"},Ct={disabled:"",value:""},Pt={value:"0"},qt={value:"1"},Bt={class:"col-6"},At={class:"col-12"},Vt={class:"mb-3"},Rt={for:"type",class:"form-label"},Ut={disabled:"",value:""},Et=["value"],Tt={class:"col-12"},Lt={class:"mb-3"},Ft={class:"d-flex align-items-center justify-content-between"},Ot={for:"pickup",class:"form-label"},jt={class:"autocomplete-container"},Dt={class:"input-group"},Gt=["placeholder"],Ht={key:0,class:"autocomplete-results"},zt=["onClick"],Nt={class:"mb-3"},Xt=["for"],Kt={class:"d-flex align-items-center"},Wt=["onUpdate:modelValue","placeholder","id"],Jt=["onClick"],Yt={key:0,class:"text-danger"},Qt={key:1,class:"col-12"},Zt={class:"mb-3"},$t={for:"terminal",class:"form-label"},eo={key:2,class:"col-12"},to={class:"mb-3"},oo={for:"enterance",class:"form-label"},so={key:3,class:"col-12"},ao={class:"mb-3"},lo={for:"drop",class:"form-label"},io={class:"autocomplete-container"},ro={class:"input-group"},no=["placeholder"],co={key:0,class:"autocomplete-results"},_o=["onClick"],po={key:4,class:"card-title mb-2 flex-grow-1 mt-4"},uo={key:5,class:"px-2 mb-2"},mo={class:"badge bg-dark-subtle text-dark p-1 fs-12 text-center"},fo={class:"form-check m-2 mx-3"},vo={class:"form-check-label mt-1",for:"poc"},go={key:6,class:"col-6"},ho={class:"mb-3"},yo={for:"poc_name",class:"form-label"},bo=["placeholder","disabled"],ko={key:7,class:"col-6"},Mo={class:"mb-3"},wo={for:"poc_mobile",class:"form-label"},So=["placeholder","disabled"],Io={key:8,class:"card-title mb-2 flex-grow-1 mt-4"},xo={key:9,class:"col-6"},Co={class:"mb-3"},Po={for:"goods_type",class:"form-label"},qo={disabled:"",value:""},Bo=["value"],Ao={key:10,class:"col-6"},Vo={class:"mb-3"},Ro={for:"goods_type_quantity",class:"form-label"},Uo=["placeholder"],Eo={key:11,class:"col-12"},To={class:"mb-3"},Lo={for:"dispatch-datepicker",class:"form-label"},Fo={key:12,class:"col-12"},Oo={class:"card-title mb-3 flex-grow-1 mt-4"},jo={class:"mb-3",style:{"max-width":"650px","overflow-x":"auto"}},Do={class:"d-flex mt-5"},Go=["for"],Ho=["id","value"],zo={class:"select-checkbox-btn-content"},No={class:"w-32 me-4 cursor-pointer"},Xo={class:"text-center mt-2 ms-4"},Ko={class:"w-32 h-32 flex-none image-fit rounded-circle"},Wo=["src"],Jo={class:"text-center mt-2 amount text-dark"},Yo={class:"text-center mt-2"},Qo={key:0,class:"bottom-modal"},Zo={class:"modal-content"},$o={class:"col-12 col-lg-6"},es={class:"mb-3 text-center m-auto"},ts={id:"map",style:{height:"500px"}};function os(i,a,L,l,s,z){const ee=T("Head"),te=T("UserWebMenu"),A=T("BCardHeader"),V=T("BCol"),j=T("BRow"),N=T("flat-pickr"),W=T("googleMap"),oe=T("FormValidation"),n=T("BCardBody"),J=T("BCard");return p(),We(J,null,{default:B(()=>[w(ee,{title:"Taxi Ride"}),w(A,{class:"border-0"},{default:B(()=>[w(te,{user:L.user},null,8,["user"])]),_:1}),w(j,null,{default:B(()=>[w(V,{lg:"12"},{default:B(()=>[w(J,{"no-body":"",id:"tasksList"},{default:B(()=>[w(A,{class:"border-0"},{default:B(()=>[w(j,null,{default:B(()=>[w(V,{lg:"6"}),w(V,{lg:"6"},{default:B(()=>[e("div",it,[e("div",rt,[e("div",nt,[e("div",dt,[a[17]||(a[17]=e("div",{class:"avatar-sm me-2"},[e("div",{class:"avatar-title rounded bg-transparent text-success fs-24"},[e("i",{class:"ri-map-pin-time-line"})])],-1)),e("div",ct,[e("p",_t,[$(_(i.$t("duration"))+" :",1),e("span",pt,_(l.formattedDuration),1)])])])])]),e("div",ut,[e("div",mt,[e("div",ft,[a[18]||(a[18]=e("div",{class:"avatar-sm me-2"},[e("div",{class:"avatar-title rounded bg-transparent text-success fs-24"},[e("i",{class:"ri-pin-distance-line"})])],-1)),e("div",vt,[e("p",gt,[$(_(i.$t("distance"))+" :",1),e("span",ht,_((l.etaParam.distance_in_unit/1e3).toFixed(2))+" "+_(l.unit),1)])])])])])])]),_:1})]),_:1})]),_:1}),w(n,{class:"border border-dashed border-end-0 border-start-0"},{default:B(()=>[e("form",{onSubmit:a[16]||(a[16]=Ze((...o)=>i.handleSubmit&&i.handleSubmit(...o),["prevent"]))},[w(oe,{form:l.form,rules:l.validationRules,ref:"validationRef"},{default:B(()=>[e("div",yt,[e("div",bt,[e("div",kt,[e("div",Mt,[e("h4",wt,_(i.$t("ride_info")),1)]),e("div",St,[e("div",It,[e("label",xt,_(i.$t("booking_type")),1),C(e("select",{id:"type",class:"form-select","onUpdate:modelValue":a[0]||(a[0]=o=>l.form.is_later=o)},[e("option",Ct,_(i.$t("choose_type")),1),e("option",Pt,_(i.$t("instant_booking")),1),e("option",qt,_(i.$t("book_later")),1)],512),[[ie,l.form.is_later]]),(p(!0),u(I,null,S(l.errors.is_later,(o,h)=>(p(),u("span",{key:h,class:"text-danger"},_(o),1))),128))])]),e("div",Bt,[e("div",At,[e("div",Vt,[e("label",Rt,_(i.$t("transport_type")),1),C(e("select",{id:"type",class:"form-select","onUpdate:modelValue":a[1]||(a[1]=o=>l.form.transport_type=o)},[e("option",Ut,_(i.$t("choose_transport_type")),1),(p(!0),u(I,null,S(L.transport_type_regular,(o,h)=>(p(),u("option",{key:h,value:o},_(o.charAt(0).toUpperCase()+o.slice(1)),9,Et))),128))],512),[[ie,l.form.transport_type]]),(p(!0),u(I,null,S(l.errors.transport_type,(o,h)=>(p(),u("span",{key:h,class:"text-danger"},_(o),1))),128))])])]),e("div",Tt,[e("div",Lt,[e("div",Ft,[e("label",Ot,_(i.$t("pickup_location")),1)]),e("div",jt,[e("div",Dt,[C(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=o=>l.form.pick_address=o),placeholder:i.$t("enter_pickup"),id:"pickup",autocomplete:"off",onInput:a[3]||(a[3]=o=>l.handleInput("pickup"))},null,40,Gt),[[O,l.form.pick_address]])]),l.pickSuggestions.length>0?(p(),u("div",Ht,[(p(!0),u(I,null,S(l.pickSuggestions,o=>(p(),u("div",{key:o.placeId,class:"autocomplete-item",onClick:h=>l.selectSuggestion(o,"pickup")},_(o.formattedAddress),9,zt))),128))])):M("",!0)]),(p(!0),u(I,null,S(l.errors.pick_address,(o,h)=>(p(),u("span",{key:h,class:"text-danger"},_(o),1))),128))])]),l.form.ride_type=="regular"?(p(!0),u(I,{key:0},S(l.stopovers,(o,h)=>(p(),u("div",{class:"col-12",key:h},[e("div",Nt,[e("label",{for:`stop-${h}`,class:"form-label"},_(i.$t("stop_location")),9,Xt),e("div",Kt,[C(e("input",{type:"text",class:"form-control mx-1","onUpdate:modelValue":X=>o.address=X,placeholder:"Enter stop "+(h+1),id:`stop-${h}`},null,8,Wt),[[O,o.address]]),e("i",{class:"bx bx-trash text-danger fs-22 btn",onClick:X=>l.removeStopover(h)},null,8,Jt)]),l.form.errors[`stop-${h}`]?(p(),u("span",Yt,_(l.form.errors[`stop-${h}`]),1)):M("",!0)])]))),128)):M("",!0),l.showAiportTerminal?(p(),u("div",Qt,[e("div",Zt,[e("label",$t,_(i.$t("aiport_terminal_info")),1),C(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=o=>l.form.terminal=o),placeholder:"$t('enter_terminal_info')",id:"terminal"},null,512),[[O,l.form.terminal]])])])):M("",!0),l.showTrainStationEnterance?(p(),u("div",eo,[e("div",to,[e("label",oo,_(i.$t("station_enterance_info")),1),C(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[5]||(a[5]=o=>l.form.enterance=o),placeholder:"$t('enter_enterance_info')",id:"enterance"},null,512),[[O,l.form.enterance]])])])):M("",!0),l.form.ride_type=="regular"?(p(),u("div",so,[e("div",ao,[e("label",lo,_(i.$t("drop_location")),1),e("div",io,[e("div",ro,[C(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[6]||(a[6]=o=>l.form.drop_address=o),placeholder:i.$t("enter_drop"),id:"drop",autocomplete:"off",onInput:a[7]||(a[7]=o=>l.handleInput("drop"))},null,40,no),[[O,l.form.drop_address]])]),l.dropSuggestions.length>0?(p(),u("div",co,[(p(!0),u(I,null,S(l.dropSuggestions,o=>(p(),u("div",{key:o.placeId,class:"autocomplete-item",onClick:h=>l.selectSuggestion(o,"drop")},_(o.formattedAddress),9,_o))),128))])):M("",!0)]),(p(!0),u(I,null,S(l.errors.drop_address,(o,h)=>(p(),u("span",{key:h,class:"text-danger"},_(o),1))),128))])])):M("",!0),l.form.transport_type=="delivery"?(p(),u("h4",po,_(i.$t("poc_info")),1)):M("",!0),l.form.transport_type=="delivery"?(p(),u("div",uo,[e("span",mo,[e("div",fo,[C(e("input",{class:"form-check-input",type:"checkbox",id:"poc","onUpdate:modelValue":a[8]||(a[8]=o=>s.isPocSame=o)},null,512),[[Je,s.isPocSame]]),e("label",vo,_(i.$t("check_if_poc_info_as_same_as_personal_info")),1)])])])):M("",!0),l.form.transport_type=="delivery"?(p(),u("div",go,[e("div",ho,[e("label",yo,_(i.$t("drop_poc_name")),1),C(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[9]||(a[9]=o=>l.form.drop_poc_name=o),placeholder:i.$t("enter_poc_name"),id:"poc_name",disabled:s.isPocSame},null,8,bo),[[O,l.form.drop_poc_name]]),(p(!0),u(I,null,S(l.errors.drop_poc_name,(o,h)=>(p(),u("span",{key:h,class:"text-danger"},_(o),1))),128))])])):M("",!0),l.form.transport_type=="delivery"?(p(),u("div",ko,[e("div",Mo,[e("label",wo,_(i.$t("drop_poc_mobile")),1),C(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[10]||(a[10]=o=>l.form.drop_poc_mobile=o),placeholder:i.$t("enter_poc_mobile"),id:"poc_mobile",disabled:s.isPocSame},null,8,So),[[O,l.form.drop_poc_mobile]]),(p(!0),u(I,null,S(l.errors.poc_mobile,(o,h)=>(p(),u("span",{key:h,class:"text-danger"},_(o),1))),128))])])):M("",!0),l.form.transport_type=="delivery"?(p(),u("h4",Io,_(i.$t("select_goods")),1)):M("",!0),l.form.transport_type=="delivery"?(p(),u("div",xo,[e("div",Co,[e("label",Po,_(i.$t("goods_type")),1),C(e("select",{id:"goods_type",class:"form-select","onUpdate:modelValue":a[11]||(a[11]=o=>l.form.goods_type_id=o)},[e("option",qo,_(i.$t("choose_type")),1),(p(!0),u(I,null,S(L.goodsTypes,o=>(p(),u("option",{key:o.id,value:o.id},_(o.goods_type_name),9,Bo))),128))],512),[[ie,l.form.goods_type_id]]),(p(!0),u(I,null,S(l.errors.goods_type_id,(o,h)=>(p(),u("span",{key:h,class:"text-danger"},_(o),1))),128))])])):M("",!0),l.form.transport_type=="delivery"?(p(),u("div",Ao,[e("div",Vo,[e("label",Ro,_(i.$t("goods_quantity")),1),C(e("input",{type:"text",class:"form-control","onUpdate:modelValue":a[12]||(a[12]=o=>l.form.goods_type_quantity=o),placeholder:i.$t("enter_quantity"),id:"goods_type_quantity"},null,8,Uo),[[O,l.form.goods_type_quantity]]),(p(!0),u(I,null,S(l.errors.goods_type_quantity,(o,h)=>(p(),u("span",{key:h,class:"text-danger"},_(o),1))),128))])])):M("",!0),l.form.is_later==="1"?(p(),u("div",Eo,[e("div",To,[e("label",Lo,_(i.$t("date")),1),w(N,{placeholder:i.$t("select_date"),modelValue:l.form.trip_start_time,"onUpdate:modelValue":a[13]||(a[13]=o=>l.form.trip_start_time=o),config:s.dateTimeConfig,class:"form-control flatpickr-input",id:"dispatch-datepicker"},null,8,["placeholder","modelValue","config"])])])):M("",!0),l.vehicleTypes.length>0?(p(),u("div",Fo,[e("h4",Oo,_(i.$t("select_vehicle")),1),e("div",jo,[e("div",Do,[(p(!0),u(I,null,S(l.vehicleTypes,(o,h)=>(p(),u("div",{key:h,class:"select-checkbox-btn text-center"},[e("label",{for:"vehicle_"+o.zone_type_id,class:"select-checkbox-btn-wrapper"},[C(e("input",{id:"vehicle_"+o.zone_type_id,name:"types",type:"radio",value:o.zone_type_id,"onUpdate:modelValue":a[14]||(a[14]=X=>l.form.vehicle_type=X),class:"select-checkbox-btn-input"},null,8,Ho),[[Ye,l.form.vehicle_type]]),e("span",zo,[e("a",No,[e("div",Xo,[a[19]||(a[19]=e("i",{class:"bx bx-time-five mx-1"},null,-1)),$(_(o.driver_time||"--"),1)]),e("div",Ko,[e("img",{alt:"",class:"rounded-circle img-fluid",src:o.vehicle_icon},null,8,Wo)]),e("div",Jo,_(o.currency)+" "+_(o.total),1),a[20]||(a[20]=$()),e("div",Yo,_(o.name),1)])])],8,Go)]))),128))])]),w(Qe,{name:"slide-up"},{default:B(()=>[l.showModal?(p(),u("div",Qo,[e("div",Zo,[e("button",{type:"submit",onClick:a[15]||(a[15]=(...o)=>l.makeBooking&&l.makeBooking(...o)),class:"btn btn-primary",style:{width:"50%",margin:"auto"}},_(i.$t("make_booking")),1)])])):M("",!0)]),_:1})])):M("",!0)])]),e("div",$o,[e("div",es,[e("div",ts,[w(W,{baseUrl:L.baseUrl,default_location:L.default_location,pick_location:l.pickupLocation,drop_location:l.dropLocation,nearbyDrivers:l.driverMarkers,polyline:l.form.poly_line,map_key:L.map_key,libraries:["marker","geometry"]},{default:B(()=>[$(_(i.$t("map_loading")),1)]),_:1},8,["baseUrl","default_location","pick_location","drop_location","nearbyDrivers","polyline","map_key"])])])])])]),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const _s=Oe(lt,[["render",os],["__scopeId","data-v-66271b82"]]);export{_s as default};
