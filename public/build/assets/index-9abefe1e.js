import{_ as z,Z as Y,O as j,P as E,B as G,D as J,r as f,T as W,S as X,g as i,U as Z,i as c,y as x,w as o,a as U,W as D,N as q,l,n as t,z as p,J as d,C as B,k as v,F as K,L as Q,t as L,p as A,X as I}from"./vendor-54d6cb1e.js";import{L as $}from"./main-b839be26.js";import{P as ee}from"./page-header-ff719701.js";import{P as te}from"./Pagination-b5e3d5c9.js";import{s as se}from"./searchbar-3bdb3315.js";import{l as ae}from"./footer-7e4f68d9.js";import{_ as oe}from"./search-file-ab3e1046.js";import"./app-cb082573.js";const le={data(){return{rightOffcanvas:!1}},components:{Layout:$,PageHeader:ee,Head:Y,Pagination:te,Multiselect:j,flatPickr:E,Link:G,searchbar:se},props:{successMessage:String,alertMessage:String,app_for:String},setup(a){const{t:e}=J(),S=f(""),s=W({transport_type:null,dispatch_type:null,status:null}),y=f([]),O=f({}),b=f(!1),h=f(!1),k=f(null),m=f(a.successMessage||""),M=f(a.alertMessage||""),w=()=>{m.value="",M.value=""},C=f(!1),V=()=>{g(),h.value=!0,C.value=!1},H=()=>{s.reset(),g(),C.value=!1},F=()=>{b.value=!1},P=async r=>{try{await U.delete(`/category/delete/${r}`);const u=y.value.findIndex(_=>_.id===r);u!==-1&&y.value.splice(u,1),b.value=!1,D.fire(e("success"),e("category_deleted_successfully"),"success")}catch{D.fire(e("error"),e("failed_to_delete_category"),"error")}},N=async r=>{D.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async u=>{if(u.isConfirmed)try{await P(r)}catch(_){console.error(e("error_deleting_data"),_),D.fire(e("error"),e("failed_to_delete_the_data"),"error")}})},T=async r=>{S.value=r,g()},g=async(r=1)=>{try{const u=s.data(),_=await U.get("/category/list",{params:u});y.value=_.data.results,O.value=_.data.paginator,h.value=!1}catch(u){console.error(e("error_fetching_category"),u)}};return{results:y,modalShow:b,deleteItemId:k,successMessage:m,alertMessage:M,filterData:V,deleteModal:N,closeModal:F,deleteData:P,dismissMessage:w,searchTerm:S,fetchSearch:T,paginator:O,modalFilter:h,clearFilter:H,fetchDatas:g,filter:s,handlePageChanged:async r=>{g(r)},editData:async r=>{q.get(`/category/edit/${r.id}`)},rightOffcanvas:C}},computed:{...ae,...X(["permissions"])},mounted(){this.fetchDatas()}},ne={class:"d-flex align-items-center gap-2"},re={class:"table-responsive"},ie={class:"table align-middle position-relative table-nowrap"},de={class:"table-active"},ce={scope:"col"},ue={scope:"col"},fe={key:0},me={class:"d-flex"},ge={key:1},pe={colspan:"12",class:"text-center"},_e={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},ve={class:"alert-content"},ye={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},be={class:"alert-content"},he={class:"offcanvas-body"},ke={class:"mb-4"},Ce={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Be={class:"form-check form-check-inline"},Me={class:"form-check-label",for:"active"},we={class:"form-check form-check-inline"},Pe={class:"form-check-label",for:"inactive"},xe={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function De(a,e,S,s,y,O){const b=i("Head"),h=i("PageHeader"),k=i("BCol"),m=i("BButton"),M=i("Link"),w=i("BRow"),C=i("BCardHeader"),V=i("BCardBody"),H=i("BCard"),F=i("BFrom"),P=i("BOffcanvas"),N=i("Pagination"),T=i("Layout"),g=Z("b-tooltip");return c(),x(T,null,{default:o(()=>[l(b,{title:"Category"}),l(h,{title:a.$t("category"),pageTitle:a.$t("support_management")},null,8,["title","pageTitle"]),l(w,null,{default:o(()=>[l(k,{lg:"12"},{default:o(()=>[l(H,{"no-body":"",id:"tasksList"},{default:o(()=>[l(C,{class:"border-0"},{default:o(()=>[l(w,{class:"g-2"},{default:o(()=>[l(k,{md:"3"}),l(k,{md:"auto",class:"ms-auto"},{default:o(()=>[t("div",ne,[a.permissions.includes("add-category")?(c(),x(M,{key:0,href:"/category/create"},{default:o(()=>[l(m,{variant:"primary",class:"float-end"},{default:o(()=>[e[5]||(e[5]=t("i",{class:"ri-add-line align-bottom me-1"},null,-1)),p(d(a.$t("add_category")),1)]),_:1})]),_:1})):B("",!0)])]),_:1})]),_:1})]),_:1}),l(V,{class:"border border-dashed border-end-0 border-start-0"},{default:o(()=>[t("div",re,[t("table",ie,[t("thead",de,[t("tr",null,[e[6]||(e[6]=t("th",null,null,-1)),t("th",ce,d(a.$t("category")),1),t("th",ue,d(a.$t("action")),1)])]),s.results.length>0?(c(),v("tbody",fe,[(c(!0),v(K,null,Q(s.results,(n,R)=>(c(),v("tr",{key:R},[e[9]||(e[9]=t("td",null,null,-1)),t("td",null,d(n.category),1),t("td",null,[t("div",me,[a.permissions.includes("edit-category")?L((c(),x(m,{key:0,onClick:A(r=>s.editData(n),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:a.$t("edit")},{default:o(()=>[...e[7]||(e[7]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])]),_:1},8,["onClick","title"])),[[g,void 0,void 0,{hover:!0}]]):B("",!0),a.permissions.includes("delete-category")?L((c(),x(m,{key:1,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",onClick:A(r=>s.deleteModal(n.id),["prevent"]),"data-bs-toggle":"tooltip",title:a.$t("delete")},{default:o(()=>[...e[8]||(e[8]=[t("i",{class:"bx bx-trash bx-xs"},null,-1)])]),_:1},8,["onClick","title"])),[[g,void 0,void 0,{hover:!0}]]):B("",!0)])])]))),128))])):(c(),v("tbody",ge,[t("tr",null,[t("td",pe,[e[10]||(e[10]=t("img",{src:oe,alt:"Loading...",style:{width:"100px"}},null,-1)),t("h5",null,d(a.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[s.successMessage?(c(),v("div",_e,[t("div",ve,[e[11]||(e[11]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[12]||(e[12]=p()),e[13]||(e[13]=t("strong",null,"Success",-1)),p(" - "+d(s.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:e[0]||(e[0]=(...n)=>s.dismissMessage&&s.dismissMessage(...n)),"aria-label":"Close Success Message"})])])):B("",!0),s.alertMessage?(c(),v("div",ye,[t("div",be,[e[14]||(e[14]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[15]||(e[15]=p()),e[16]||(e[16]=t("strong",null,"Alert",-1)),p(" - "+d(s.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[1]||(e[1]=(...n)=>s.dismissMessage&&s.dismissMessage(...n)),"aria-label":"Close Alert Message"})])])):B("",!0)]),l(P,{modelValue:s.rightOffcanvas,"onUpdate:modelValue":e[4]||(e[4]=n=>s.rightOffcanvas=n),placement:"end",title:a.$t("users_filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:o(()=>[l(F,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:o(()=>[t("div",he,[t("div",ke,[t("label",Ce,d(a.$t("status")),1),t("div",null,[t("div",Be,[L(t("input",{class:"form-check-input","onUpdate:modelValue":e[2]||(e[2]=n=>s.filter.status=n),type:"radio",name:"inlineRadioOptions",id:"active",value:"1"},null,512),[[I,s.filter.status]]),t("label",Me,d(a.$t("active")),1)]),t("div",we,[L(t("input",{class:"form-check-input","onUpdate:modelValue":e[3]||(e[3]=n=>s.filter.status=n),type:"radio",name:"inlineRadioOptions",id:"inactive",value:"0"},null,512),[[I,s.filter.status]]),t("label",Pe,d(a.$t("inactive")),1)])])])]),t("div",xe,[l(m,{variant:"light",onClick:s.clearFilter,class:"w-100"},{default:o(()=>[p(d(a.$t("clear_filter")),1)]),_:1},8,["onClick"]),l(m,{type:"submit",onClick:s.filterData,variant:"success",class:"w-100"},{default:o(()=>[p(d(a.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),l(N,{paginator:s.paginator,onPageChanged:s.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Re=z(le,[["render",De]]);export{Re as default};
