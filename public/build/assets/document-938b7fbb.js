import{_ as A,Z as P,B as H,D as z,r as c,T,S as j,g as m,U as R,i as n,y as U,w as b,a as L,N as y,l as k,n as e,J as l,k as i,C as d,L as F,q,t as N,F as V,z as M,M as G,p as J}from"./vendor-8caf5d52.js";import{L as Z}from"./main-cc7bd0ce.js";import{P as x}from"./page-header-18309276.js";import{P as K}from"./Pagination-0518e4bd.js";import{l as O}from"./footer-502c2797.js";import"./app-974c65a1.js";const Q={components:{Layout:Z,PageHeader:x,Head:P,Pagination:K,Link:H},props:{successMessage:String,alertMessage:String,fleetId:Number,documents:Array},setup(o){const{t:s}=z(),g=c(!1),a=c(null),C=c({}),v=c(o.successMessage||""),w=c(o.alertMessage||""),f=c(!1),_=c(null),p=c(null),D=()=>{v.value="",w.value=""},$=async r=>{try{(await L.post(`/manage-fleet/document-toggle/${r}/${o.fleetId}/1`)).data.allDocumentsApproved==!0?(v.value=s("document_approved"),y.get("/manage-fleet")):y.get(`/manage-fleet/document/${o.fleetId}`)}catch(E){console.error("Error approving document:",E)}},S=async r=>{g.value=!0,a.value=r,u.reason="",C.value={}},u=T({reason:""});return{successMessage:v,alertMessage:w,dismissMessage:D,approveDocument:$,declineDocument:S,updateDocuments:async()=>{try{await L.get(`/manage-fleet/update-document/${o.fleetId}`),y.get("/manage-fleet")}catch(r){console.error("Error updating documents:",r)}},viewDocument:r=>{_.value=r.image||null,p.value=r.back_image||null,f.value=!0},closeModal:()=>{f.value=!1,_.value=null,p.value=null},showModal:f,imageUrl:_,backImageUrl:p,disapproveModelShow:g,document_id:a,errors:C,form:u,handleSubmit:async()=>{console.log(u);try{(await L.post(`/manage-fleet/document-toggle/${a.value}/${o.fleetId}/5`,{reason:u.reason})).data.allDocumentsDisapproved==!0?(v.value=s("document_declined"),y.get("/manage-fleet")):y.get(`/manage-fleet/document/${o.fleetId}`)}catch(B){console.error("Error declining document:",B)}}}},computed:{...O,...j(["permissions"])}},W={class:"row"},X={class:"col-lg-12"},Y={class:"card",id:"tasksList"},ee={class:"card-body border border-dashed border-end-0 border-start-0"},te={class:"table-responsive"},se={class:"table align-middle position-relative table-nowrap"},oe={class:"table-active"},ae={scope:"col"},le={scope:"col"},ne={scope:"col"},ie={scope:"col"},de={scope:"col"},re={scope:"col"},ce={key:0,scope:"col"},ue={key:0},me=["onClick"],_e=["onClick"],be=["onClick"],ge=["onClick"],ve={key:0,class:"modal fade show",tabindex:"-1",role:"dialog",style:{display:"block"}},fe={class:"modal-dialog",role:"document"},pe={class:"modal-content"},he={class:"modal-header d-flex align-items-center justify-content-between"},ye={class:"modal-title"},ke={class:"modal-body"},we={id:"carouselExampleFade",class:"carousel slide carousel-fade py-5","data-ride":"carousel"},Me={class:"carousel-inner"},Ce={class:"carousel-item active"},De={key:0},$e=["src","alt"],Se={class:"text-center"},Ie={key:1,class:"d-grid"},Be={class:"text-center m-auto"},Ue={class:"carousel-item"},Le={key:0},Ne=["src","alt"],Ve={class:"text-center"},Ee={key:1,class:"d-grid"},Fe={class:"text-center m-auto"},Ae={class:"modal-footer"},Pe=["href"],He=["href"],ze={key:1,class:"custom-alert alert alert-success alert-border-left fade show"},Te={class:"alert-content"},je={key:2,class:"custom-alert alert alert-danger alert-border-left fade show"},Re={class:"alert-content"},qe={class:"row"},Ge={class:"col-sm-12"},Je={class:"mb-3"},Ze={for:"declined_reason",class:"form-label"},xe=["placeholder"],Ke={class:"modal-footer v-modal-footer"};function Oe(o,s,g,a,C,v){const w=m("Head"),f=m("PageHeader"),_=m("BButton"),p=m("BLink"),D=m("FormValidation"),$=m("BModal"),S=m("Layout"),u=R("b-tooltip");return n(),U(S,null,{default:b(()=>[k(w,{title:"Documents"}),k(f,{title:o.$t("documents"),pageTitle:o.$t("documents"),pageLink:"/manage-fleet"},null,8,["title","pageTitle"]),e("div",W,[e("div",X,[e("div",Y,[s[10]||(s[10]=e("div",{class:"card-header border-0"},null,-1)),e("div",ee,[e("div",te,[e("table",se,[e("thead",oe,[e("tr",null,[e("th",ae,l(o.$t("document_name")),1),e("th",le,l(o.$t("identify_number")),1),e("th",ne,l(o.$t("expiry_date")),1),e("th",ie,l(o.$t("status")),1),e("th",de,l(o.$t("comment")),1),e("th",re,l(o.$t("document")),1),o.permissions.includes("drivers-management")?(n(),i("th",ce,l(o.$t("action")),1)):d("",!0)])]),e("tbody",null,[(n(!0),i(V,null,F(g.documents,(t,I)=>(n(),i("tr",{key:t.id},[e("td",null,l(t.name),1),e("td",null,l(t.identify_number||"N/A"),1),e("td",null,l(t.expiry_date||"N/A"),1),e("td",null,[e("span",{class:q({badge:!0,"bg-success":t.document_status===1,"bg-secondary":t.document_status===2||t.document_status==null,"bg-warning":t.document_status===3||t.document_status===4,"bg-danger":t.document_status===5||t.document_status===0,"bg-dark":t.document_status===6})},l(t.document_status===1?o.$t("approved"):t.document_status===2||t.document_status==null?o.$t("not_uploaded"):t.document_status===3||t.document_status===4?o.$t("waiting_for_approval"):t.document_status===0||t.document_status===5?o.$t("declined"):t.document_status===6?o.$t("expired"):""),3)]),e("td",null,l(t.comment||"N/A"),1),e("td",null,[N((n(),U(_,{class:"btn btn-soft-info btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"view",onClick:h=>a.viewDocument(t)},{default:b(()=>s[8]||(s[8]=[e("i",{class:"bx bx-show-alt align-center"},null,-1)])),_:2,__:[8]},1032,["onClick"])),[[u,void 0,void 0,{hover:!0}]]),N((n(),U(_,{class:"btn btn-soft-success btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"upload",href:`/manage-fleet/document-upload/${t.id}/${g.fleetId}`},{default:b(()=>s[9]||(s[9]=[e("i",{class:"bx bx-upload align-center"},null,-1)])),_:2,__:[9]},1032,["href"])),[[u,void 0,void 0,{hover:!0}]])]),o.permissions.includes("drivers-management")?(n(),i("td",ue,[t.document_status===1?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:h=>a.declineDocument(t.id)},l(o.$t("decline")),9,me)):d("",!0),t.document_status===5?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:h=>a.approveDocument(t.id)},l(o.$t("approve")),9,_e)):d("",!0),t.document_status===2||t.document_status==null?d("",!0):(n(),i(V,{key:2},[t.document_status===3||t.document_status===4||t.document_status===6?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:h=>a.approveDocument(t.id)},l(o.$t("approve")),9,be)):d("",!0),t.document_status===3||t.document_status===4||t.document_status===6?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:h=>a.declineDocument(t.id)},l(o.$t("decline")),9,ge)):d("",!0)],64))])):d("",!0)]))),128))])])])])])])]),a.showModal?(n(),i("div",ve,[e("div",fe,[e("div",pe,[e("div",he,[e("h5",ye,l(o.$t("view_document")),1),e("a",{href:"#",class:"close fs-18",onClick:s[0]||(s[0]=(...t)=>a.closeModal&&a.closeModal(...t)),"aria-label":"Close"},s[11]||(s[11]=[e("span",{class:"fs-22","aria-hidden":"true"},"Ã—",-1)]))]),e("div",ke,[e("div",we,[s[14]||(s[14]=e("div",{class:"carousel-indicators"},[e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"0",class:"active","aria-current":"true","aria-label":"Slide 1"}),e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"1","aria-label":"Slide 2"})],-1)),e("div",Me,[e("div",Ce,[a.imageUrl?(n(),i("div",De,[e("img",{src:a.imageUrl,alt:o.$t("front_side_document"),class:"img-fluid mb-2"},null,8,$e),e("h5",Se,l(o.$t("front_side_document")),1)])):(n(),i("div",Ie,[s[12]||(s[12]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",Be,l(o.$t("no_front_image_available")),1)]))]),e("div",Ue,[a.backImageUrl?(n(),i("div",Le,[e("img",{src:a.backImageUrl,alt:o.$t("back_side_document"),class:"img-fluid mb-2"},null,8,Ne),e("h5",Ve,l(o.$t("back_side_document")),1)])):(n(),i("div",Ee,[s[13]||(s[13]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",Fe,l(o.$t("no_back_image_available")),1)]))])]),s[15]||(s[15]=e("a",{class:"carousel-control-prev bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"prev"},[e("span",{class:"carousel-control-prev-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Previous")],-1)),s[16]||(s[16]=e("a",{class:"carousel-control-next bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"next"},[e("span",{class:"carousel-control-next-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Next")],-1))])]),e("div",Ae,[e("button",{type:"button",class:"btn btn-danger",onClick:s[1]||(s[1]=(...t)=>a.closeModal&&a.closeModal(...t))},l(o.$t("close")),1),a.imageUrl?(n(),i("a",{key:0,href:a.imageUrl,download:"",class:"btn btn-primary"},l(o.$t("download_front_image")),9,Pe)):d("",!0),a.backImageUrl?(n(),i("a",{key:1,href:a.backImageUrl,download:"",class:"btn btn-primary"},l(o.$t("download_back_image")),9,He)):d("",!0)])])])])):d("",!0),a.successMessage?(n(),i("div",ze,[e("div",Te,[s[17]||(s[17]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[18]||(s[18]=e("strong",null,"Success",-1)),M(" - "+l(a.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:s[2]||(s[2]=(...t)=>a.dismissMessage&&a.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):d("",!0),a.alertMessage?(n(),i("div",je,[e("div",Re,[s[19]||(s[19]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[20]||(s[20]=e("strong",null,"Alert",-1)),M(" - "+l(a.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[3]||(s[3]=(...t)=>a.dismissMessage&&a.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):d("",!0),k($,{modelValue:a.disapproveModelShow,"onUpdate:modelValue":s[7]||(s[7]=t=>a.disapproveModelShow=t),"hide-footer":"",title:o.$t("declined_reason"),class:"v-modal-custom",size:"md"},{default:b(()=>[e("form",null,[k(D,{form:a.form,rules:o.validationRules,ref:"validationRef"},{default:b(()=>[e("div",qe,[e("div",Ge,[e("div",Je,[e("label",Ze,[M(l(o.$t("declined_reason")),1),s[21]||(s[21]=e("span",{class:"text-danger"},"*",-1))]),N(e("input",{type:"text",class:"form-control",placeholder:o.$t("enter_declined_reason"),id:"declined_reason","onUpdate:modelValue":s[4]||(s[4]=t=>a.form.reason=t)},null,8,xe),[[G,a.form.reason]]),(n(!0),i(V,null,F(a.errors.reason,(t,I)=>(n(),i("span",{key:I,class:"text-danger"},l(t),1))),128))])])]),e("div",Ke,[k(p,{href:"javascript:void(0);",class:"btn btn-link link-warning fw-medium",onClick:s[5]||(s[5]=t=>a.disapproveModelShow=!1)},{default:b(()=>[s[22]||(s[22]=e("i",{class:"ri-close-line me-1 align-middle"},null,-1)),M(" "+l(o.$t("close")),1)]),_:1,__:[22]}),e("button",{type:"button",class:"btn btn-soft-info waves-effect waves-light",onClick:s[6]||(s[6]=J((...t)=>a.handleSubmit&&a.handleSubmit(...t),["prevent"]))},l(o.$t("submit")),1)])]),_:1},8,["form","rules"])])]),_:1},8,["modelValue","title"])]),_:1})}const ot=A(Q,[["render",Oe],["__scopeId","data-v-97a820cd"]]);export{ot as default};
