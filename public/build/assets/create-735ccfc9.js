import{_ as q,Z as N,O as P,D as O,T as j,r as _,R as A,g as m,i as a,y as D,w,a as R,N as z,l as u,n as e,k as r,z as f,J as n,t as k,K as U,F as g,L as b,C as T,M as B,p as E}from"./vendor-54d6cb1e.js";import{L as I}from"./main-b839be26.js";import{P as J}from"./page-header-ff719701.js";import{P as K}from"./Pagination-b5e3d5c9.js";import{i as Z}from"./imageUpload-bad454a2.js";import{F as G}from"./FormValidation-cabc17c8.js";import"./footer-7e4f68d9.js";import"./app-cb082573.js";/* empty css                                                    */const Q={components:{Layout:I,PageHeader:J,Head:N,Pagination:K,Multiselect:P,FormValidation:G,imageUpload:Z},props:{successMessage:String,alertMessage:String,owners:Array,types:Object,fleet:Object},setup(s){var C;const{t}=O(),h=((C=s.owners)==null?void 0:C.length)==1&&s.owners[0].user_id||"",l=j({owner_id:s.fleet?s.fleet.owner_id||"":h,custom_make:s.fleet&&s.fleet.car_make_name||"",custom_model:s.fleet&&s.fleet.car_model_name||"",vehicle_type:s.fleet&&s.fleet.vehicle_type||"",license_number:s.fleet&&s.fleet.license_number||"",car_color:s.fleet&&s.fleet.car_color||""}),F={owner_id:{required:!0},custom_make:{required:!0},custom_model:{required:!0},vehicle_type:{required:!0},license_number:{required:!0},car_color:{required:!0}},V=_(null),v=_({}),p=_(s.successMessage||""),y=_(s.alertMessage||""),S=()=>{p.value="",y.value=""},M=_(s.types||[]),x=_(s.fleet),H=async()=>{if(v.value=V.value.validate(),!(Object.keys(v.value).length>0))try{let c;s.fleet&&s.fleet.id?c=await R.post(`/manage-fleet/update/${s.fleet.id}`,l.data()):c=await R.post("/manage-fleet/store",l.data()),c.status===201?(p.value=t("fleet_created_successfully"),l.reset(),z.get("/manage-fleet")):y.value=t("failed_to_create_fleet")}catch(c){c.response&&c.response.status===422?v.value=c.response.data.errors:(console.error(t("error_creating_fleet"),c),y.value=t("failed_to_create_fleet_catch"))}};return A(()=>l.owner_id,c=>{var o,d;const i=(o=s.owners)==null?void 0:o.find(L=>L.user_id==l.owner_id);M.value=(d=s.types)==null?void 0:d.filter(L=>L.is_taxi==(i==null?void 0:i.transport_type))}),{form:l,successMessage:p,alertMessage:y,handleSubmit:H,dismissMessage:S,selectedCountry:_(null),selectedTimezone:_(null),validationRules:F,validationRef:V,errors:v,filteredTypes:M,fleet:x}}},W={class:"row"},X={key:0,class:"col-sm-6"},Y={class:"mb-3"},$={for:"owner_id",class:"form-label"},ee={value:"",disabled:""},te=["value"],se={class:"col-sm-6"},le={class:"mb-3"},oe={for:"select_type",class:"form-label"},ae=["value"],re={class:"col-sm-6"},ne={class:"mb-3"},de={for:"car_brand",class:"form-label"},ie=["placeholder"],ce={class:"col-sm-6"},me={class:"mb-3"},_e={for:"car_model",class:"form-label"},ue=["placeholder"],fe={class:"col-sm-6"},ge={class:"mb-3"},be={for:"license_plate_number",class:"form-label"},ve=["placeholder"],ye={class:"col-sm-6"},we={class:"mb-3"},ke={for:"car_color",class:"form-label"},pe=["placeholder"],he={class:"col-lg-12"},Me={class:"text-end"},Ce={type:"submit",class:"btn btn-primary"},Be={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Ve={class:"alert-content"},Se={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},xe={class:"alert-content"};function He(s,t,h,l,F,V){const v=m("Head"),p=m("PageHeader"),y=m("BCardHeader"),S=m("FormValidation"),M=m("BCardBody"),x=m("BCard"),H=m("BCol"),C=m("BRow"),c=m("Layout");return a(),D(c,null,{default:w(()=>[u(v,{title:"Manage Fleet"}),u(p,{title:l.fleet?s.$t("edit"):s.$t("create"),pageTitle:s.$t("manage_fleet"),pageLink:"/manage-fleet"},null,8,["title","pageTitle"]),u(C,null,{default:w(()=>[u(H,{lg:"12"},{default:w(()=>[u(x,{"no-body":"",id:"tasksList"},{default:w(()=>[u(y,{class:"border-0"}),u(M,{class:"border border-dashed border-end-0 border-start-0 form-steps"},{default:w(()=>[e("form",{onSubmit:t[6]||(t[6]=E((...i)=>l.handleSubmit&&l.handleSubmit(...i),["prevent"])),class:"form-steps"},[u(S,{form:l.form,rules:l.validationRules,ref:"validationRef"},{default:w(()=>{var i;return[e("div",W,[((i=h.owners)==null?void 0:i.length)>1?(a(),r("div",X,[e("div",Y,[e("label",$,[f(n(s.$t("owner"))+" ",1),t[9]||(t[9]=e("span",{class:"text-danger"},"*",-1))]),k(e("select",{id:"owner_id",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=o=>l.form.owner_id=o)},[e("option",ee,n(s.$t("select_an_owner")),1),(a(!0),r(g,null,b(h.owners,o=>(a(),r("option",{key:o.user_id,value:o.user_id},n(o.company_name),9,te))),128))],512),[[U,l.form.owner_id]]),(a(!0),r(g,null,b(l.errors.owner_id,(o,d)=>(a(),r("span",{key:d,class:"text-danger"},n(o),1))),128))])])):T("",!0),e("div",se,[e("div",le,[e("label",oe,[f(n(s.$t("select_type"))+" ",1),t[10]||(t[10]=e("span",{class:"text-danger"},"*",-1))]),k(e("select",{id:"select_type",class:"form-select","onUpdate:modelValue":t[1]||(t[1]=o=>l.form.vehicle_type=o)},[(a(!0),r(g,null,b(l.filteredTypes,(o,d)=>(a(),r("option",{key:d,value:o.id},n(o.name),9,ae))),128))],512),[[U,l.form.vehicle_type]]),(a(!0),r(g,null,b(l.errors.vehicle_type,(o,d)=>(a(),r("span",{key:d,class:"text-danger"},n(o),1))),128))])]),e("div",re,[e("div",ne,[e("label",de,[f(n(s.$t("car_brand"))+" ",1),t[11]||(t[11]=e("span",{class:"text-danger"},"*",-1))]),k(e("input",{id:"car_brand",class:"form-control",placeholder:s.$t("enter_car_make"),"onUpdate:modelValue":t[2]||(t[2]=o=>l.form.custom_make=o)},null,8,ie),[[B,l.form.custom_make]]),(a(!0),r(g,null,b(l.errors.custom_make,(o,d)=>(a(),r("span",{key:d,class:"text-danger"},n(o),1))),128))])]),e("div",ce,[e("div",me,[e("label",_e,[f(n(s.$t("car_model"))+" ",1),t[12]||(t[12]=e("span",{class:"text-danger"},"*",-1))]),k(e("input",{id:"car_model",class:"form-control",placeholder:s.$t("enter_car_model"),"onUpdate:modelValue":t[3]||(t[3]=o=>l.form.custom_model=o)},null,8,ue),[[B,l.form.custom_model]]),(a(!0),r(g,null,b(l.errors.custom_model,(o,d)=>(a(),r("span",{key:d,class:"text-danger"},n(o),1))),128))])]),e("div",fe,[e("div",ge,[e("label",be,[f(n(s.$t("license_plate_number"))+" ",1),t[13]||(t[13]=e("span",{class:"text-danger"},"*",-1))]),k(e("input",{type:"text",class:"form-control",placeholder:s.$t("enter_license_plate_number"),id:"license_plate_number","onUpdate:modelValue":t[4]||(t[4]=o=>l.form.license_number=o)},null,8,ve),[[B,l.form.license_number]]),(a(!0),r(g,null,b(l.errors.license_number,(o,d)=>(a(),r("span",{key:d,class:"text-danger"},n(o),1))),128))])]),e("div",ye,[e("div",we,[e("label",ke,[f(n(s.$t("car_color"))+" ",1),t[14]||(t[14]=e("span",{class:"text-danger"},"*",-1))]),k(e("input",{type:"text",class:"form-control",placeholder:s.$t("enter_car_color"),id:"car_color","onUpdate:modelValue":t[5]||(t[5]=o=>l.form.car_color=o)},null,8,pe),[[B,l.form.car_color]]),(a(!0),r(g,null,b(l.errors.car_color,(o,d)=>(a(),r("span",{key:d,class:"text-danger"},n(o),1))),128))])]),e("div",he,[e("div",Me,[e("button",Ce,n(l.fleet?s.$t("update"):s.$t("save")),1)])])])]}),_:1},8,["form","rules"])],32)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[l.successMessage?(a(),r("div",Be,[e("div",Ve,[t[15]||(t[15]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[16]||(t[16]=e("strong",null,"Success",-1)),f(" - "+n(l.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[7]||(t[7]=(...i)=>l.dismissMessage&&l.dismissMessage(...i)),"aria-label":"Close Success Message"})])])):T("",!0),l.alertMessage?(a(),r("div",Se,[e("div",xe,[t[17]||(t[17]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[18]||(t[18]=e("strong",null,"Alert",-1)),f(" - "+n(l.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[8]||(t[8]=(...i)=>l.dismissMessage&&l.dismissMessage(...i)),"aria-label":"Close Alert Message"})])])):T("",!0)])]),_:1})}const je=q(Q,[["render",He]]);export{je as default};
