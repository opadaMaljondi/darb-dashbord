import{_ as q,Z as z,O,T as j,D as J,r as u,R as W,g as r,U as Z,i as f,y as H,w as m,W as N,a as $,N as b,l as d,n as t,q as k,J as c,k as w,L as G,p as B,t as A,F as K,z as R,C as V}from"./vendor-8caf5d52.js";import{L as Q}from"./main-cc7bd0ce.js";import{P as X}from"./page-header-18309276.js";import{P as Y}from"./Pagination-0518e4bd.js";import{i as tt}from"./imageUpload-5fcb01e8.js";import{I as et}from"./ImageUp-e3b9310d.js";import{F as ot}from"./FormValidation-f14f6003.js";import"./footer-502c2797.js";import"./app-974c65a1.js";/* empty css                                                    */const st={components:{Layout:Q,PageHeader:X,Head:z,Pagination:Y,Multiselect:O,FormValidation:ot,imageUpload:tt,ImageUp:et},props:{successMessage:String,alertMessage:String,notification:{type:Object,required:!0},validate:Function},setup(n){const s=j({roletype:"user"}),{t:i}=J(),e=u([]),M=u({}),L=u(!1),g=u(!1),P=u(null),C=u(n.successMessage||""),p=u(n.alertMessage||""),x=()=>{C.value="",p.value=""},D=()=>{g.value=!0},I=()=>{s.reset(),_(),g.value=!1},F=async(a,l,v,T)=>{N.fire({title:i("are_you_sure"),text:i("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:i("yes"),cancelButtonText:i("cancel")}).then(async U=>{if(U.isConfirmed)try{await $.post("/notification-channel/update-status",{id:a,push_notification:l,mail:v,sms:T});const h=e.value.findIndex(E=>E.id===a);h!==-1&&(e.value[h].push_notification=l,e.value[h].mail=v,e.value[h].sms=T,b.get("/notification-channel")),N.fire(i("changed"),i("status_updated_successfully"),"success")}catch(h){console.error(i("error_updating_status"),h),N.fire(i("error"),i("failed_to_update_status"),"error")}})},_=async(a=1)=>{try{const l=s.data();l.page=a;const v=await $.get("/notification-channel/list",{params:l});e.value=v.data.results,M.value=v.data.paginator,g.value=!1}catch(l){console.error(i("error_fetching_notification"),l)}},S=async a=>{localStorage.setItem("/notification-channel/list",a),_(a)},y=async a=>{b.get(`/notification-channel/edit/${a.id}`),a.topics==="Invoice For End of the Ride User"&&b.get(`/notification-channel/user-invoice-edit/${a.id}`),a.topics==="Invoice For End of the Ride Driver"&&b.get(`/notification-channel/driver-invoice-edit/${a.id}`)},o=async a=>{b.get(`/notification-channel/push-template/edit/${a.id}`)};return W(()=>s.roletype,a=>{console.log("sdins",a),_()}),{results:e,modalShow:L,deleteItemId:P,successMessage:C,alertMessage:p,filterData:D,dismissMessage:x,paginator:M,modalFilter:g,clearFilter:I,fetchDatas:_,filter:s,handlePageChanged:S,editData:y,toggleActiveStatus:F,editPushData:o}},mounted(){this.fetchDatas();const n=localStorage.getItem("/notification-channel/list");n?this.handlePageChanged(Number(n)):this.handlePageChanged(1)}},at={class:"nav nav-tabs mb-3",role:"tablist"},nt={class:"tab-content text-muted mt-4"},it={class:"tab-pane active"},lt={class:"table-responsive"},ct={class:"table align-middle position-relative table-nowrap"},rt={class:"table-active"},dt={scope:"col"},ut={scope:"col"},ft={scope:"col"},mt={scope:"col"},gt={scope:"col"},_t={class:"fw-bold"},ht=["onClick","id","checked"],pt=["onClick","id","checked"],vt={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},bt={class:"alert-content"},Ct={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},yt={class:"alert-content"};function kt(n,s,i,e,M,L){const g=r("Head"),P=r("PageHeader"),C=r("BCardHeader"),p=r("BButton"),x=r("Pagination"),D=r("BCardBody"),I=r("BCard"),F=r("BCol"),_=r("BRow"),S=r("Layout"),y=Z("b-tooltip");return f(),H(S,null,{default:m(()=>[d(g,{title:"Notification Channel"}),d(P,{title:n.$t("notification-channel"),pageTitle:n.$t("notification-channel")},null,8,["title","pageTitle"]),d(_,null,{default:m(()=>[d(F,{lg:"12"},{default:m(()=>[d(I,{"no-body":"",id:"tasksList"},{default:m(()=>[d(C,{class:"border-0"}),d(D,{class:"border border-dashed border-end-0 border-start-0"},{default:m(()=>[t("ul",at,[t("li",{class:"nav-item",onClick:s[0]||(s[0]=o=>e.filter.roletype="user")},[t("a",{class:k({"nav-link":!0,active:e.filter.roletype=="user"}),role:"tab","aria-selected":"false"},c(n.$t("customers")),3)]),t("li",{class:"nav-item",onClick:s[1]||(s[1]=o=>e.filter.roletype="driver")},[t("a",{class:k({"nav-link":!0,active:e.filter.roletype=="driver"}),role:"tab","aria-selected":"false"},c(n.$t("driver")),3)])]),t("div",nt,[t("div",it,[t("div",lt,[t("table",ct,[t("thead",rt,[t("tr",null,[t("th",dt,c(n.$t("topics")),1),t("th",ut,c(n.$t("push_notifications")),1),t("th",ft,c(n.$t("mail")),1),t("th",mt,c(n.$t("email-template")),1),t("th",gt,c(n.$t("push-template")),1)])]),t("tbody",null,[(f(!0),w(K,null,G(e.results,(o,a)=>(f(),w("tr",{key:a},[t("td",null,[t("div",null,[t("h6",_t,c(o.topics),1),t("p",null,c(o.topics_content),1)])]),t("td",null,[t("div",{class:k({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":o.push_notification})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:B(l=>e.toggleActiveStatus(o.id,!o.push_notification,o.mail,o.sms),["prevent"]),id:"status_push_"+o.id,checked:o.push_notification},null,8,ht)],2)]),t("td",null,[t("div",{class:k({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":o.mail})},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:B(l=>e.toggleActiveStatus(o.id,o.push_notification,!o.mail,o.sms),["prevent"]),id:"status_mail_"+o.id,checked:o.mail},null,8,pt)],2)]),t("td",null,[A((f(),H(p,{onClick:B(l=>e.editData(o),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:n.$t("edit")},{default:m(()=>s[4]||(s[4]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[4]},1032,["onClick","title"])),[[y,void 0,void 0,{hover:!0}]])]),t("td",null,[A((f(),H(p,{onClick:B(l=>e.editPushData(o),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:n.$t("edit")},{default:m(()=>s[5]||(s[5]=[t("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])),_:2,__:[5]},1032,["onClick","title"])),[[y,void 0,void 0,{hover:!0}]])])]))),128))])])])]),d(x,{paginator:e.paginator,onPageChanged:e.handlePageChanged},null,8,["paginator","onPageChanged"])])]),_:1})]),_:1})]),_:1})]),_:1}),t("div",null,[e.successMessage?(f(),w("div",vt,[t("div",bt,[s[6]||(s[6]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[7]||(s[7]=t("strong",null,"Success",-1)),R(" - "+c(e.successMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-success",onClick:s[2]||(s[2]=(...o)=>e.dismissMessage&&e.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):V("",!0),e.alertMessage?(f(),w("div",Ct,[t("div",yt,[s[8]||(s[8]=t("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),s[9]||(s[9]=t("strong",null,"Alert",-1)),R(" - "+c(e.alertMessage)+" ",1),t("button",{type:"button",class:"btn-close btn-close-danger",onClick:s[3]||(s[3]=(...o)=>e.dismissMessage&&e.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):V("",!0)])]),_:1})}const Nt=q(st,[["render",kt]]);export{Nt as default};
