import{_ as E,Z as P,B as x,D as H,r,T as z,g as v,U as T,i as n,y as I,w as b,a as S,N as k,l as y,n as e,J as l,k as i,L as $,q as j,t as U,C as c,F,z as C,M as R,p as q}from"./vendor-54d6cb1e.js";import{L as J}from"./main-b839be26.js";import{P as O}from"./page-header-ff719701.js";import{P as Z}from"./Pagination-b5e3d5c9.js";import"./footer-7e4f68d9.js";import"./app-cb082573.js";const G={data(){return{rightOffcanvas:!1}},components:{Layout:J,PageHeader:O,Head:P,Pagination:Z,Link:x},props:{successMessage:String,alertMessage:String,driverId:Number,documents:Array},setup(a){const{t}=H(),u=r(a.successMessage||""),o=r(a.alertMessage||""),L=r({}),w=r(!1),g=r(null),f=r(null),_=r(!1),p=r(null),D=()=>{u.value="",o.value=""},N=async d=>{(await S.post(`/approved-drivers/document-toggle/${d}/${a.driverId}/1`)).data.allDocumentsApproved==!0?(u.value=t("document_approved"),k.get("/approved-drivers")):k.get(`/approved-drivers/document/${a.driverId}`)},B=async d=>{_.value=!0,p.value=d},h=z({reason:""}),s=async()=>{try{(await S.post(`/approved-drivers/document-toggle/${p.value}/${a.driverId}/5`,{reason:h.reason})).data.allDocumentsDisapproved==!0?(u.value=t("document_declined"),k.get("/pending-drivers")):k.get(`/approved-drivers/document/${a.driverId}`),_.value=!1}catch(d){console.error("Error declining document:",d),o.value=t("decline_failed")}},M=async()=>{await S.get(`/approved-drivers/update-documents/${a.driverId}`),k.get("/approved-drivers")},m=r(null),V=r(null);return{successMessage:u,alertMessage:o,dismissMessage:D,approveDocument:N,declineDocument:B,updateDocuments:M,viewDocument:d=>{g.value=d.image,f.value=d.back_image,w.value=!0,m.value=d.document_name_front??t("document"),V.value=d.document_name_back??t("document")},closeModal:()=>{w.value=!1,g.value=null,f.value=null},showModal:w,imageUrl:g,backImageUrl:f,documentNameFront:m,documentNameBack:V,errors:L,disapproveModelShow:_,document_id:p,handleSubmit:s,form:h}}},K={class:"row"},Q={class:"col-lg-12"},W={class:"card",id:"tasksList"},X={class:"card-body border border-dashed border-end-0 border-start-0"},Y={class:"table-responsive"},ee={class:"table align-middle position-relative table-nowrap"},se={class:"table-active"},te={scope:"col"},oe={scope:"col"},ae={scope:"col"},le={scope:"col"},ne={scope:"col"},ie={scope:"col"},de={scope:"col"},re=["onClick"],ce=["onClick"],ue=["onClick"],me=["onClick"],ve={key:0,class:"modal fade show",tabindex:"-1",role:"dialog",style:{display:"block"}},_e={class:"modal-dialog",role:"document"},be={class:"modal-content"},ge={class:"modal-header d-flex align-items-center justify-content-between"},fe={class:"modal-title"},pe={class:"modal-body"},he={id:"carouselExampleFade",class:"carousel slide carousel-fade py-5","data-ride":"carousel"},ke={class:"carousel-inner"},ye={class:"carousel-item active"},we={key:0,class:"car-img"},Me=["src","alt"],Ce={class:"text-center"},De={key:1,class:"d-grid"},Ne={class:"text-center m-auto"},Be={class:"carousel-item"},Ie={key:0,class:"car-img"},Se=["src","alt"],Ue={class:"text-center"},Fe={key:1,class:"d-grid"},Le={class:"text-center m-auto"},Ve={class:"modal-footer"},$e=["href"],Ae=["href"],Ee={key:1,class:"custom-alert alert alert-success alert-border-left fade show"},Pe={class:"alert-content"},xe={key:2,class:"custom-alert alert alert-danger alert-border-left fade show"},He={class:"alert-content"},ze={class:"row"},Te={class:"col-sm-12"},je={class:"mb-3"},Re={for:"declined_reason",class:"form-label"},qe=["placeholder"],Je={class:"modal-footer v-modal-footer"};function Oe(a,t,u,o,L,w){const g=v("Head"),f=v("PageHeader"),_=v("BButton"),p=v("BLink"),D=v("FormValidation"),N=v("BModal"),B=v("Layout"),h=T("b-tooltip");return n(),I(B,null,{default:b(()=>[y(g,{title:"Documents"}),y(f,{title:a.$t("documents"),pageTitle:a.$t("documents"),pageLink:"/approved-drivers"},null,8,["title","pageTitle"]),e("div",K,[e("div",Q,[e("div",W,[t[10]||(t[10]=e("div",{class:"card-header border-0"},null,-1)),e("div",X,[e("div",Y,[e("table",ee,[e("thead",se,[e("tr",null,[e("th",te,l(a.$t("document_name")),1),e("th",oe,l(a.$t("identify_number")),1),e("th",ae,l(a.$t("expiry_date")),1),e("th",le,l(a.$t("status")),1),e("th",ne,l(a.$t("comment")),1),e("th",ie,l(a.$t("document")),1),e("th",de,l(a.$t("action")),1)])]),e("tbody",null,[(n(!0),i(F,null,$(u.documents,(s,M)=>(n(),i("tr",{key:s.id},[e("td",null,l(s.name),1),e("td",null,l(s.identify_number||"N/A"),1),e("td",null,l(s.expiry_date||"N/A"),1),e("td",null,[e("span",{class:j({badge:!0,"bg-success":s.document_status===1,"bg-secondary":s.document_status===2||s.document_status==null,"bg-warning":s.document_status===3||s.document_status===4,"bg-danger":s.document_status===5||s.document_status===0,"bg-dark":s.document_status===6})},l(s.document_status===1?a.$t("approved"):s.document_status===2||s.document_status==null?a.$t("not_uploaded"):s.document_status===3||s.document_status===4?a.$t("waiting_for_approval"):s.document_status===0||s.document_status===5?a.$t("declined"):s.document_status===6?a.$t("expired"):""),3)]),e("td",null,l(s.comment||"N/A"),1),e("td",null,[U((n(),I(_,{class:"btn btn-soft-info btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"view",onClick:m=>o.viewDocument(s)},{default:b(()=>[...t[8]||(t[8]=[e("i",{class:"bx bx-show-alt align-center"},null,-1)])]),_:1},8,["onClick"])),[[h,void 0,void 0,{hover:!0}]]),U((n(),I(_,{class:"btn btn-soft-success btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"upload",href:`/approved-drivers/document-upload/${s.id}/${u.driverId}`},{default:b(()=>[...t[9]||(t[9]=[e("i",{class:"bx bx-upload align-center"},null,-1)])]),_:1},8,["href"])),[[h,void 0,void 0,{hover:!0}]])]),e("td",null,[s.document_status===1?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:m=>o.declineDocument(s.id)},l(a.$t("decline")),9,re)):c("",!0),s.document_status===5?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:m=>o.approveDocument(s.id)},l(a.$t("approve")),9,ce)):c("",!0),s.document_status===2||s.document_status==null?c("",!0):(n(),i(F,{key:2},[s.document_status===3||s.document_status===4||s.document_status===6?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:m=>o.approveDocument(s.id)},l(a.$t("approve")),9,ue)):c("",!0),s.document_status===3||s.document_status===4||s.document_status===6?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:m=>o.declineDocument(s.id)},l(a.$t("decline")),9,me)):c("",!0)],64))])]))),128))])])])])])])]),o.showModal?(n(),i("div",ve,[e("div",_e,[e("div",be,[e("div",ge,[e("h5",fe,l(a.$t("view_document")),1),e("a",{href:"#",class:"close fs-18",onClick:t[0]||(t[0]=(...s)=>o.closeModal&&o.closeModal(...s)),"aria-label":"Close"},[...t[11]||(t[11]=[e("span",{class:"fs-22","aria-hidden":"true"},"Ã—",-1)])])]),e("div",pe,[e("div",he,[t[14]||(t[14]=e("div",{class:"carousel-indicators"},[e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"0",class:"active","aria-current":"true","aria-label":"Slide 1"}),e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"1","aria-label":"Slide 2"})],-1)),e("div",ke,[e("div",ye,[o.imageUrl?(n(),i("div",we,[e("img",{src:o.imageUrl,alt:o.documentNameFront,class:"img-fluid mb-2"},null,8,Me),e("h5",Ce,l(o.documentNameFront),1)])):(n(),i("div",De,[t[12]||(t[12]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",Ne,l(a.$t("no_front_image_available")),1)]))]),e("div",Be,[o.backImageUrl?(n(),i("div",Ie,[e("img",{src:o.backImageUrl,alt:o.documentNameBack,class:"img-fluid mb-2"},null,8,Se),e("h5",Ue,l(o.documentNameBack),1)])):(n(),i("div",Fe,[t[13]||(t[13]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",Le,l(a.$t("no_back_image_available")),1)]))])]),t[15]||(t[15]=e("a",{class:"carousel-control-prev bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"prev"},[e("span",{class:"carousel-control-prev-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Previous")],-1)),t[16]||(t[16]=e("a",{class:"carousel-control-next bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"next"},[e("span",{class:"carousel-control-next-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Next")],-1))])]),e("div",Ve,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...s)=>o.closeModal&&o.closeModal(...s))},l(a.$t("close")),1),o.imageUrl?(n(),i("a",{key:0,href:o.imageUrl,download:"",class:"btn btn-primary"},l(a.$t("download_front_image")),9,$e)):c("",!0),o.backImageUrl?(n(),i("a",{key:1,href:o.backImageUrl,download:"",class:"btn btn-primary"},l(a.$t("download_back_image")),9,Ae)):c("",!0)])])])])):c("",!0),o.successMessage?(n(),i("div",Ee,[e("div",Pe,[t[17]||(t[17]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[18]||(t[18]=e("strong",null,"Success",-1)),C(" - "+l(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):c("",!0),o.alertMessage?(n(),i("div",xe,[e("div",He,[t[19]||(t[19]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[20]||(t[20]=e("strong",null,"Alert",-1)),C(" - "+l(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):c("",!0),y(N,{modelValue:o.disapproveModelShow,"onUpdate:modelValue":t[7]||(t[7]=s=>o.disapproveModelShow=s),"hide-footer":"",title:a.$t("declined_reason"),class:"v-modal-custom",size:"md"},{default:b(()=>[e("form",null,[y(D,{form:o.form,rules:a.validationRules,ref:"validationRef"},{default:b(()=>[e("div",ze,[e("div",Te,[e("div",je,[e("label",Re,[C(l(a.$t("declined_reason")),1),t[21]||(t[21]=e("span",{class:"text-danger"},"*",-1))]),U(e("input",{type:"text",class:"form-control",placeholder:a.$t("enter_declined_reason"),id:"declined_reason","onUpdate:modelValue":t[4]||(t[4]=s=>o.form.reason=s)},null,8,qe),[[R,o.form.reason]]),(n(!0),i(F,null,$(o.errors.reason,(s,M)=>(n(),i("span",{key:M,class:"text-danger"},l(s),1))),128))])])]),e("div",Je,[y(p,{href:"javascript:void(0);",class:"btn btn-link link-warning fw-medium",onClick:t[5]||(t[5]=s=>o.disapproveModelShow=!1)},{default:b(()=>[t[22]||(t[22]=e("i",{class:"ri-close-line me-1 align-middle"},null,-1)),C(" "+l(a.$t("close")),1)]),_:1}),e("button",{type:"button",class:"btn btn-soft-info waves-effect waves-light",onClick:t[6]||(t[6]=q((...s)=>o.handleSubmit&&o.handleSubmit(...s),["prevent"]))},l(a.$t("submit")),1)])]),_:1},8,["form","rules"])])]),_:1},8,["modelValue","title"])]),_:1})}const ts=E(G,[["render",Oe],["__scopeId","data-v-08cce5f9"]]);export{ts as default};
