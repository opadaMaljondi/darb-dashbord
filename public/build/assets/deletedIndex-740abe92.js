import{_ as X,Z as ee,O as te,P as se,B as oe,D as le,r as w,T as ne,S as ie,g as h,U as ae,i as a,y as $,w as _,W as v,a as H,N as j,l as g,n as e,t as z,k as r,q as M,J as n,K as re,L as A,F,p as y,C as b,z as p}from"./vendor-54d6cb1e.js";import{L as de}from"./main-b839be26.js";import{P as ce}from"./page-header-ff719701.js";import{P as ue}from"./Pagination-b5e3d5c9.js";import{s as me}from"./searchbar-3bdb3315.js";import{l as fe}from"./footer-7e4f68d9.js";import{_ as q}from"./search-file-ab3e1046.js";import"./app-cb082573.js";const ge={data(){return{rightOffcanvas:!1,SearchQuery:"",isListView:!0,copiedIndex:null}},created(){const o=localStorage.getItem("deletedUserViewMode");o&&(this.isListView=o==="list")},methods:{toggleView(o){this.isListView=o==="list",localStorage.setItem("deletedUserViewMode",o)},getStarIcons(o){let t=[],x=Math.floor(o),l=o%1>=.5,d=5-x-(l?1:0);for(let m=0;m<x;m++)t.push("ri-star-s-fill text-warning fs-16");l&&t.push("ri-star-half-s-fill text-warning fs-16");for(let m=0;m<d;m++)t.push("ri-star-line text-muted");return t},copyText(o,t){navigator.clipboard.writeText(o).then(()=>{this.copiedIndex=t,setTimeout(()=>{this.copiedIndex=null},2e3)})}},components:{Layout:de,PageHeader:ce,Head:ee,Pagination:ue,Multiselect:te,flatPickr:se,Link:oe,searchbar:me},props:{successMessage:String,alertMessage:String,vehicleTypes:{type:Object,required:!0},results:{type:Array,required:!0}},setup(o){const{t}=le(),x=w(""),l=ne({transport_type:null,dispatch_type:null,status:null,limit:10}),d=w([]),m=w({}),P=w(!1),S=w(!1),C=w(null),L=w({}),I=w(o.successMessage||""),T=w(o.alertMessage||""),E=()=>{I.value="",T.value=""},U=async(i,c)=>{v.fire({title:t("are_you_sure"),text:t("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:t("yes"),cancelButtonText:t("cancel")}).then(async f=>{if(f.isConfirmed)try{await H.post("/users/update-status",{id:i,status:c});const B=d.value.findIndex(Z=>Z.id===i);B!==-1&&(d.value[B].active=c),v.fire(t("changed"),t("status_updated_successfully"),"success")}catch(B){console.error(t("error_updating_status"),B),v.fire(t("error"),t("failed_to_update_status"),"error")}})},N=()=>{S.value=!0},O=()=>{l.reset(),V()},D=()=>{P.value=!1},s=async i=>{try{await H.delete(`/users/delete/${i}`);const c=d.value.findIndex(f=>f.id===i);c!==-1&&d.value.splice(c,1),P.value=!1,v.fire(t("success"),t("users_deleted_successfully"),"success")}catch{v.fire(t("error"),t("failed_to_delete_users"),"error")}},k=async i=>{v.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async c=>{if(c.isConfirmed)try{await s(i)}catch(f){console.error(t("error_deleting_data"),f),v.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},u=i=>o.app_for&&o.app_for=="demo"?"***********":i.mobile_number,R=i=>o.app_for&&o.app_for=="demo"?"***********":i.email,Y=async i=>{x.value=i,V()},V=async(i=1)=>{try{const c=l.data();c.search=x.value,c.page=i;const f=await H.get("/users/deletedList",{params:c});d.value=f.data.results,m.value=f.data.paginator,W(m.value.total),S.value=!1}catch(c){console.error(t("error_fetching_users"),c)}},G=async i=>{localStorage.setItem("deletedusers/list",i),V(i)},J=async i=>{j.get(`/users/edit/${i.id}`)},K=async i=>{j.get(`/users/view-profile/${i.id}`)},Q=async i=>{if(!i){console.error("Invalid user data:",i);return}v.fire({title:"Are you sure?",text:"Do you want to restore this user?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, restore it!"}).then(async c=>{if(c.isConfirmed)try{const f=await H.patch(`/users/restore/${i}`);d.value=d.value.filter(B=>B.id!==i),v.fire("Restored!",f.data.message,"success")}catch(f){console.error("Error restoring user:",f),v.fire("Error!","Failed to restore user.","error")}})},W=()=>{L.value=[10,25,50,100,200,500]};return{results:d,modalShow:P,deleteItemId:C,successMessage:I,alertMessage:T,filterData:N,deleteModal:k,closeModal:D,deleteData:s,dismissMessage:E,searchTerm:x,fetchSearch:Y,paginator:m,modalFilter:S,mobileFromUser:u,emailFromUser:R,clearFilter:O,fetchDatas:V,filter:l,handlePageChanged:G,toggleActiveStatus:U,editData:J,viewProfile:K,restoreUser:Q,paginatorOption:L,changeEntriesPerPage:()=>{V()}}},computed:{...fe,...ie(["permissions"])},mounted(){this.fetchDatas();const o=localStorage.getItem("deletedusers/list");o?this.handlePageChanged(Number(o)):this.handlePageChanged(1)}},_e={class:"d-flex align-items-center"},pe={class:"toggle-buttons mt-3 me-4"},he=["title"],ve=["title"],be={class:"d-flex align-items-center mt-3"},we={class:"me-2 text-muted"},ye=["value"],xe={class:"ms-2 text-muted"},ke={class:"table-responsive"},Ce={class:"table align-middle position-relative table-nowrap"},Be={class:"table-active"},Me={scope:"col"},Pe={scope:"col"},Se={scope:"col"},Le={scope:"col"},Ve={scope:"col"},Ie={scope:"col"},Te={scope:"col"},Ue={key:0},De={key:0},He=["onClick","id","checked"],Ae={class:"dropdown"},Fe={class:"dropdown-menu dropdown-menu-end"},Ee=["onClick"],Ne=["onClick"],Oe=["onClick"],$e={key:1},ze={colspan:"12",class:"text-center"},je={key:0,class:"row"},qe={class:"card card-height-100"},Re={class:"card-body"},Ye={class:"d-flex flex-column h-100"},Ge={class:"d-flex"},Je={class:"flex-grow-1"},Ke={class:"text-muted mb-4"},Qe=["onClick"],We={class:"flex-shrink-0"},Ze={class:"d-flex gap-1 align-items-center"},Xe={class:"dropdown"},et={class:"dropdown-menu dropdown-menu-end"},tt=["onClick"],st=["onClick"],ot=["onClick"],lt={class:"d-flex mb-2 card-footer bg-transparent border-top-dashed"},nt={class:"flex-shrink-0 me-3"},it={class:"avatar-sm"},at={class:"avatar-title bg-warning-subtle rounded p-2"},rt=["src"],dt={class:"flex-grow-1"},ct={class:"mb-1 fs-15"},ut={class:"text-body"},mt={class:"mb-0"},ft={class:"table-responsive table-card mt-2 ms-2"},gt={class:"table table-borderless mb-0"},_t={class:"card-footer bg-transparent border-top-dashed py-2"},pt={class:"d-flex align-items-center"},ht={class:"flex-grow-1"},vt={scope:"col"},bt={class:"flex-end"},wt={key:0},yt=["onClick","id","checked"],xt={class:"table-responsive table-card mt-2 ms-2"},kt={class:"table table-borderless mb-0"},Ct={colspan:"12",class:"text-center m-auto"},Bt={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Mt={class:"alert-content"},Pt={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},St={class:"alert-content"};function Lt(o,t,x,l,d,m){const P=h("Head"),S=h("PageHeader"),C=h("BCol"),L=h("BRow"),I=h("BCardHeader"),T=h("BButton"),E=h("BCardBody"),U=h("BCard"),N=h("Pagination"),O=h("Layout"),D=ae("b-tooltip");return a(),$(O,null,{default:_(()=>[g(P,{title:"Users"}),g(S,{title:o.$t("users"),pageTitle:o.$t("users")},null,8,["title","pageTitle"]),g(L,null,{default:_(()=>[g(C,{lg:"12"},{default:_(()=>[g(U,{"no-body":"",id:"tasksList"},{default:_(()=>[g(I,{class:"border-0"},{default:_(()=>[g(L,{class:"g-2"},{default:_(()=>[g(C,{md:"4"},{default:_(()=>[e("div",_e,[e("div",pe,[z((a(),r("a",{"data-bs-toggle":"tooltip",title:o.$t("list_view"),class:M(["list-btn",{active:d.isListView}]),onClick:t[0]||(t[0]=s=>m.toggleView("list"))},[...t[6]||(t[6]=[e("i",{class:"ri-list-check"},null,-1)])],10,he)),[[D,void 0,void 0,{hover:!0}]]),z((a(),r("a",{"data-bs-toggle":"tooltip",title:o.$t("grid_view"),class:M(["list-btn",{active:!d.isListView}]),onClick:t[1]||(t[1]=s=>m.toggleView("grid"))},[...t[7]||(t[7]=[e("i",{class:"ri-grid-fill"},null,-1)])],10,ve)),[[D,void 0,void 0,{hover:!0}]])]),e("div",be,[e("label",we,n(o.$t("show")),1),z(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.filter.limit=s),onChange:t[3]||(t[3]=(...s)=>l.changeEntriesPerPage&&l.changeEntriesPerPage(...s)),class:"form-select form-select-sm w-auto"},[(a(!0),r(F,null,A(l.paginatorOption,s=>(a(),r("option",{key:s,value:s},n(s),9,ye))),128))],544),[[re,l.filter.limit]]),e("label",xe,n(o.$t("entries")),1)])])]),_:1}),g(C,{md:"2"}),g(C,{md:"auto",class:"ms-auto"},{default:_(()=>[...t[8]||(t[8]=[e("div",{class:"d-flex align-items-center gap-2"},null,-1)])]),_:1})]),_:1})]),_:1}),d.isListView?(a(),$(E,{key:0,class:"border border-dashed border-end-0 border-start-0"},{default:_(()=>[e("div",ke,[e("table",Ce,[e("thead",Be,[e("tr",null,[e("th",Me,n(o.$t("name")),1),e("th",Pe,n(o.$t("date")),1),e("th",Se,n(o.$t("gender")),1),e("th",Le,n(o.$t("mobile")),1),e("th",Ve,n(o.$t("email")),1),e("th",Ie,n(o.$t("status")),1),e("th",Te,n(o.$t("action")),1)])]),l.results.length>0?(a(),r("tbody",Ue,[(a(!0),r(F,null,A(l.results,(s,k)=>(a(),r("tr",{key:k},[e("td",null,n(s.name),1),e("td",null,n(s.converted_deleted_at),1),e("td",null,n(s.gender),1),e("td",null,n(s.mobile_number),1),e("td",null,n(s.email),1),o.permissions.includes("toggle-user")?(a(),r("td",De,[e("div",{class:M({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":s.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:y(u=>l.toggleActiveStatus(s.id,!s.active),["prevent"]),id:"status_"+s.id,checked:s.active},null,8,He)],2)])):b("",!0),e("td",null,[g(T,{class:"btn btn-soft-info btn-sm m-2",size:"sm",type:"button"},{default:_(()=>[e("div",Ae,[t[12]||(t[12]=e("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("span",{class:"text-muted fs-18"},[e("i",{class:"mdi mdi-dots-vertical"})])],-1)),e("div",Fe,[o.permissions.includes("view-user-profile")?(a(),r("a",{key:0,class:"dropdown-item",href:"#",onClick:y(u=>l.viewProfile(s),["prevent"])},[t[9]||(t[9]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),p(n(o.$t("view_profile")),1)],8,Ee)):b("",!0),o.permissions.includes("delete-user")?(a(),r("a",{key:1,class:"dropdown-item",href:"#",onClick:y(u=>l.deleteModal(s.id),["prevent"])},[t[10]||(t[10]=e("i",{class:"bx bxs-trash-alt align-center text-muted me-2"},null,-1)),p(n(o.$t("delete")),1)],8,Ne)):b("",!0),e("a",{class:"dropdown-item",href:"#",onClick:y(u=>l.restoreUser(s.id),["prevent"])},[t[11]||(t[11]=e("i",{class:"bx bx-undo align-center text-muted me-2"},null,-1)),p(" "+n(o.$t("restore")),1)],8,Oe)])])]),_:2},1024)])]))),128))])):(a(),r("tbody",$e,[e("tr",null,[e("td",ze,[t[13]||(t[13]=e("img",{src:q,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,n(o.$t("no_data_found")),1)])])]))])])]),_:1})):b("",!0)]),_:1})]),_:1})]),_:1}),d.isListView?b("",!0):(a(),r("div",je,[l.results.length>0?(a(!0),r(F,{key:0},A(l.results,(s,k)=>(a(),r("div",{class:"col-xxl-3 col-sm-6 project-card",key:k},[e("div",qe,[e("div",Re,[e("div",Ye,[e("div",Ge,[e("div",Je,[e("h6",null,[p(n(o.$t("refferal_code"))+" : ",1),e("span",Ke,n(s.refferal_code??"----"),1),e("button",{onClick:u=>m.copyText(s.refferal_code,k),class:"btn btn-light btn-sm ms-2"},[e("i",{class:M(d.copiedIndex===k?"bx bxs-check-circle text-success":"bx bx-copy")},null,2)],8,Qe)])]),e("div",We,[e("div",Ze,[e("div",Xe,[t[17]||(t[17]=e("button",{class:"btn btn-link text-muted p-1 mt-n2 py-0 text-decoration-none fs-15","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-more-horizontal icon-sm"},[e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"19",cy:"12",r:"1"}),e("circle",{cx:"5",cy:"12",r:"1"})])],-1)),e("div",et,[o.permissions.includes("view-user-profile")?(a(),r("a",{key:0,class:"dropdown-item",href:"#",onClick:y(u=>l.viewProfile(s),["prevent"])},[t[14]||(t[14]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),p(n(o.$t("view_profile")),1)],8,tt)):b("",!0),o.permissions.includes("delete-user")?(a(),r("a",{key:1,class:"dropdown-item",href:"#",onClick:y(u=>l.deleteModal(s.id),["prevent"])},[t[15]||(t[15]=e("i",{class:"bx bxs-trash-alt align-center text-muted me-2"},null,-1)),p(n(o.$t("delete")),1)],8,st)):b("",!0),e("a",{class:"dropdown-item",href:"#",onClick:y(u=>l.restoreUser(s.id),["prevent"])},[t[16]||(t[16]=e("i",{class:"bx bx-undo align-center text-muted me-2"},null,-1)),p(" "+n(o.$t("restore")),1)],8,ot)])])])])]),e("div",lt,[e("div",nt,[e("div",it,[e("span",at,[e("img",{class:"avatar-xs rounded-circle p-1",alt:"profile picture",src:s.profile_picture},null,8,rt)])])]),e("div",dt,[e("h5",ct,[e("a",ut,n(s.name??"----"),1)]),e("p",mt,[(a(),r(F,null,A(5,u=>e("i",{key:u,class:M([{"bx bxs-star text-warning":u<=Math.floor(s.rating),"bx bxs-star-half text-warning":u===Math.ceil(s.rating)&&s.rating%1!==0,"bx bx-star text-muted":u>s.rating},"align-center me-2"])},null,2)),64))])])]),e("div",ft,[e("table",gt,[e("tbody",null,[e("tr",null,[t[18]||(t[18]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-transgender fs-24"})],-1)),e("td",null,n(s.gender??"----"),1)]),e("tr",null,[t[19]||(t[19]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-phone fs-24"})],-1)),e("td",null,n(l.mobileFromUser(s)??"----"),1)]),e("tr",null,[t[20]||(t[20]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-envelope-open-text fs-24"})],-1)),e("td",null,n(s.email??"----"),1)]),e("tr",null,[t[21]||(t[21]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-calendar-times fs-24"})],-1)),e("td",null,n(s.converted_deleted_at),1)])])])])])]),e("div",_t,[e("div",pt,[e("div",ht,[e("th",vt,n(o.$t("status")),1)]),e("div",bt,[o.permissions.includes("toggle-user")?(a(),r("td",wt,[e("div",{class:M({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":s.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:y(u=>l.toggleActiveStatus(s.id,!s.active),["prevent"]),id:"status_"+s.id,checked:s.active},null,8,yt)],2)])):b("",!0)])])])])]))),128)):(a(),$(U,{key:1},{default:_(()=>[e("div",xt,[e("table",kt,[e("tbody",null,[e("tr",null,[e("td",Ct,[t[22]||(t[22]=e("img",{src:q,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,n(o.$t("no_data_found")),1)])])])])])]),_:1}))])),e("div",null,[l.successMessage?(a(),r("div",Bt,[e("div",Mt,[t[23]||(t[23]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[24]||(t[24]=p()),t[25]||(t[25]=e("strong",null,"Success",-1)),p(" - "+n(l.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[4]||(t[4]=(...s)=>l.dismissMessage&&l.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):b("",!0),l.alertMessage?(a(),r("div",Pt,[e("div",St,[t[26]||(t[26]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[27]||(t[27]=p()),t[28]||(t[28]=e("strong",null,"Alert",-1)),p(" - "+n(l.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[5]||(t[5]=(...s)=>l.dismissMessage&&l.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):b("",!0)]),g(N,{paginator:l.paginator,onPageChanged:l.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Nt=X(ge,[["render",Lt],["__scopeId","data-v-7da3efe9"]]);export{Nt as default};
