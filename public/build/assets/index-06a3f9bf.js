import{_ as K,Z as W,O as X,P as Z,B as Q,D as ee,r as f,T as te,S as se,g as u,U as oe,i as c,y as H,w as i,W as y,a as R,N as ae,l as n,n as e,J as l,t as g,K as j,k as m,L as q,F as Y,z as h,C,q as le,p as z,X as S}from"./vendor-54d6cb1e.js";import{L as ne}from"./main-b839be26.js";import{P as ie}from"./page-header-ff719701.js";import{P as re}from"./Pagination-b5e3d5c9.js";import{s as de}from"./searchbar-3bdb3315.js";import{l as ce}from"./footer-7e4f68d9.js";import{_ as ue}from"./search-file-ab3e1046.js";import"./app-cb082573.js";const me={components:{Layout:ne,PageHeader:ie,Head:W,Pagination:re,Multiselect:X,flatPickr:Z,Link:Q,searchbar:de},props:{successMessage:String,alertMessage:String,vehicleTypes:{type:Object,required:!0}},setup(o){const{t}=ee(),V=f(""),a=te({transport_type:null,service_type:null,status:null,limit:10}),b=f([]),x=f({}),w=f(!1),B=f(!1),p=f(null),O=f({}),_=f(o.successMessage||""),k=f(o.alertMessage||""),M=()=>{_.value="",k.value=""},F=async(r,d)=>{y.fire({title:t("are_you_sure"),text:t("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:t("yes"),cancelButtonText:t("cancel")}).then(async v=>{if(v.isConfirmed)try{await R.post(`/app_modules/update-status/${r}`,{id:r,status:d});const U=b.value.findIndex(J=>J.id===r);U!==-1&&(b.value[U].active=d),y.fire(t("changed"),t("status_updated_successfully"),"success")}catch(U){console.error(t("error_updating_status"),U),y.fire(t("error"),t("failed_to_update_status"),"error")}})},P=f(!1),N=()=>{s(),B.value=!0,P.value=!1},I=()=>{a.reset(),s(),P.value=!1},$=()=>{w.value=!1},D=async r=>{try{await R.delete(`/app_modules/delete/${r}`);const d=b.value.findIndex(v=>v.id===r);d!==-1&&b.value.splice(d,1),w.value=!1,y.fire(t("success"),t("app_modules_deleted_successfully"),"success")}catch(d){d.response&&d.response.status==403&&(k.value=d.response.data.alertMessage,setTimeout(()=>{k.value=""},5e3)),y.fire(t("error"),t("failed_to_delete_app_modules"),"error")}},A=async r=>{y.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async d=>{if(d.isConfirmed)try{await D(r)}catch(v){console.error(t("error_deleting_data"),v),y.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},L=async r=>{V.value=r,s()},s=async(r=1)=>{try{const d=a.data();d.search=V.value,d.page=r;const v=await R.get("/app_modules/list",{params:d});b.value=v.data.results,x.value=v.data.paginator,G(x.value.total),B.value=!1}catch(d){console.error(t("error_fetching_app_modules"),d)}},E=async r=>{localStorage.setItem("app_modules/list",r),s(r)},T=async r=>{ae.get(`/app_modules/edit/${r.id}`)},G=()=>{O.value=[10,25,50,100,200,500]};return{results:b,modalShow:w,deleteItemId:p,successMessage:_,alertMessage:k,filterData:N,deleteModal:A,closeModal:$,deleteData:D,dismissMessage:M,searchTerm:V,fetchSearch:L,paginator:x,modalFilter:B,clearFilter:I,fetchDatas:s,filter:a,handlePageChanged:E,toggleActiveStatus:F,editData:T,rightOffcanvas:P,paginatorOption:O,changeEntriesPerPage:()=>{s()}}},computed:{...ce,...se(["permissions"])},mounted(){this.fetchDatas();const o=localStorage.getItem("app_modules/list");o?this.handlePageChanged(Number(o)):this.handlePageChanged(1)}},fe={class:"d-flex align-items-center mt-3"},pe={class:"me-2 text-muted"},_e=["value"],ge={class:"ms-2 text-muted"},ve={class:"d-flex align-items-center gap-2"},he={class:"table-responsive"},be={class:"table align-middle position-relative table-nowrap"},ye={class:"table-active"},ke={scope:"col"},Ce={scope:"col"},we={scope:"col"},Be={scope:"col"},Me={scope:"col"},Pe={scope:"col"},Se={key:0},Ve={class:"d-flex"},xe={class:"flex-grow-1"},Oe={key:0},De={key:1},Le={key:2},Te=["src"],Ue={key:0},He=["onClick","id","checked"],Fe={class:"d-flex"},Ne={key:1},Ie={colspan:"6",class:"text-center"},$e={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Ae={class:"alert-content"},Ee={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Re={class:"alert-content"},ze={class:"offcanvas-body"},je={class:"mb-4"},qe={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ye={value:"all"},Ge={value:"taxi"},Je={value:"delivery"},Ke={class:"mb-4"},We={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Xe={class:"form-check form-check-inline"},Ze={class:"form-check-label",for:"active"},Qe={class:"form-check form-check-inline"},et={class:"form-check-label",for:"inactive"},tt={class:"mb-4"},st={for:"status-select",class:"form-label text-muted text-uppercase fw-semibold mb-3"},ot={class:"form-check form-check-inline"},at={class:"form-check-label",for:"normal"},lt={class:"form-check form-check-inline"},nt={class:"form-check-label",for:"rental"},it={class:"form-check form-check-inline"},rt={class:"form-check-label",for:"outstation"},dt={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function ct(o,t,V,a,b,x){const w=u("Head"),B=u("PageHeader"),p=u("BCol"),O=u("searchbar"),_=u("BButton"),k=u("Link"),M=u("BRow"),F=u("BCardHeader"),P=u("BCardBody"),N=u("BCard"),I=u("BFrom"),$=u("BOffcanvas"),D=u("Pagination"),A=u("Layout"),L=oe("b-tooltip");return c(),H(A,null,{default:i(()=>[n(w,{title:o.$t("app_modules")},null,8,["title"]),n(B,{title:o.$t("app_modules"),pageTitle:o.$t("app_modules")},null,8,["title","pageTitle"]),n(M,null,{default:i(()=>[n(p,{lg:"12"},{default:i(()=>[n(N,{"no-body":"",id:"tasksList"},{default:i(()=>[n(F,{class:"border-0"},{default:i(()=>[n(M,{class:"g-2"},{default:i(()=>[n(p,{md:"3"},{default:i(()=>[e("div",fe,[e("label",pe,l(o.$t("show")),1),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.filter.limit=s),onChange:t[1]||(t[1]=(...s)=>a.changeEntriesPerPage&&a.changeEntriesPerPage(...s)),class:"form-select form-select-sm w-auto"},[(c(!0),m(Y,null,q(a.paginatorOption,s=>(c(),m("option",{key:s,value:s},l(s),9,_e))),128))],544),[[j,a.filter.limit]]),e("label",ge,l(o.$t("entries")),1)])]),_:1}),n(p,{md:"3"}),n(p,{md:"auto",class:"ms-auto"},{default:i(()=>[e("div",ve,[n(O,{onSearch:a.fetchSearch},null,8,["onSearch"]),n(_,{variant:"danger",onClick:t[2]||(t[2]=s=>a.rightOffcanvas=!0)},{default:i(()=>[t[12]||(t[12]=e("i",{class:"ri-filter-2-line me-1 align-bottom"},null,-1)),h(" "+l(o.$t("filters")),1)]),_:1}),o.permissions.includes("add_app_modules")?(c(),H(k,{key:0,href:"/app_modules/create"},{default:i(()=>[n(_,{variant:"primary",class:"float-end"},{default:i(()=>[t[13]||(t[13]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),h(" "+l(o.$t("add_app_modules")),1)]),_:1})]),_:1})):C("",!0)])]),_:1})]),_:1})]),_:1}),n(P,{class:"border border-dashed border-end-0 border-start-0"},{default:i(()=>[e("div",he,[e("table",be,[e("thead",ye,[e("tr",null,[e("th",ke,l(o.$t("name")),1),e("th",Ce,l(o.$t("service_type")),1),e("th",we,l(o.$t("transport_type")),1),e("th",Be,l(o.$t("mobile_menu_icon")),1),e("th",Me,l(o.$t("status")),1),e("th",Pe,l(o.$t("action")),1)])]),a.results.length>0?(c(),m("tbody",Se,[(c(!0),m(Y,null,q(a.results,(s,E)=>(c(),m("tr",{key:E},[e("td",null,[e("div",Ve,[e("div",xe,l(s.name),1)])]),e("td",null,l(o.$t(s.service_type)),1),e("td",null,[s.transport_type==="taxi"?(c(),m("span",Oe,l(o.$t("taxi")),1)):s.transport_type==="delivery"?(c(),m("span",De,l(o.$t("delivery")),1)):(c(),m("span",Le,l(o.$t("all")),1))]),e("td",null,[e("img",{src:s.mobile_menu_icon,alt:"",class:"avatar-xs rounded-circle me-2"},null,8,Te)]),o.permissions.includes("toggle_app_modules")?(c(),m("td",Ue,[e("div",{class:le({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":s.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:z(T=>a.toggleActiveStatus(s.id,!s.active),["prevent"]),id:"status_"+s.id,checked:s.active},null,8,He)],2)])):C("",!0),e("td",null,[e("div",Fe,[o.permissions.includes("edit_app_modules")?g((c(),H(_,{key:0,onClick:z(T=>a.editData(s),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:o.$t("edit")},{default:i(()=>[...t[14]||(t[14]=[e("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])]),_:1},8,["onClick","title"])),[[L,void 0,void 0,{hover:!0}]]):C("",!0),o.permissions.includes("delete_app_modules")&&o.app_for!=="demo"?g((c(),H(_,{key:1,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",onClick:z(T=>a.deleteModal(s.id),["prevent"]),"data-bs-toggle":"tooltip",title:"Delete"},{default:i(()=>[...t[15]||(t[15]=[e("i",{class:"bx bx-trash bx-xs"},null,-1)])]),_:1},8,["onClick"])),[[L,void 0,void 0,{hover:!0}]]):C("",!0)])])]))),128))])):(c(),m("tbody",Ne,[e("tr",null,[e("td",Ie,[t[16]||(t[16]=e("img",{src:ue,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,l(o.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[a.successMessage?(c(),m("div",$e,[e("div",Ae,[t[17]||(t[17]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[18]||(t[18]=h()),t[19]||(t[19]=e("strong",null,"Success",-1)),h(" - "+l(a.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[3]||(t[3]=(...s)=>a.dismissMessage&&a.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):C("",!0),a.alertMessage?(c(),m("div",Ee,[e("div",Re,[t[20]||(t[20]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[21]||(t[21]=h()),t[22]||(t[22]=e("strong",null,"Alert",-1)),h(" - "+l(a.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[4]||(t[4]=(...s)=>a.dismissMessage&&a.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):C("",!0)]),n($,{modelValue:a.rightOffcanvas,"onUpdate:modelValue":t[11]||(t[11]=s=>a.rightOffcanvas=s),placement:"end",title:o.$t("app_modules_filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:i(()=>[n(I,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:i(()=>[e("div",ze,[e("div",je,[e("label",qe,l(o.$t("transport_type")),1),g(e("select",{class:"form-control","data-choices":"","data-choices-search-false":"",name:"choices-select-status",id:"choices-select-status","onUpdate:modelValue":t[5]||(t[5]=s=>a.filter.transport_type=s)},[e("option",Ye,l(o.$t("all")),1),e("option",Ge,l(o.$t("taxi")),1),e("option",Je,l(o.$t("delivery")),1)],512),[[j,a.filter.transport_type]])]),e("div",Ke,[e("label",We,l(o.$t("status")),1),e("div",null,[e("div",Xe,[g(e("input",{class:"form-check-input","onUpdate:modelValue":t[6]||(t[6]=s=>a.filter.status=s),type:"radio",name:"inlineRadioOptions",id:"active",value:"1"},null,512),[[S,a.filter.status]]),e("label",Ze,l(o.$t("active")),1)]),e("div",Qe,[g(e("input",{class:"form-check-input","onUpdate:modelValue":t[7]||(t[7]=s=>a.filter.status=s),type:"radio",name:"inlineRadioOptions",id:"inactive",value:"0"},null,512),[[S,a.filter.status]]),e("label",et,l(o.$t("inactive")),1)])])]),e("div",tt,[e("label",st,l(o.$t("service_type")),1),n(M,{class:"g-2"},{default:i(()=>[n(p,null,{default:i(()=>[e("div",ot,[g(e("input",{class:"form-check-input","onUpdate:modelValue":t[8]||(t[8]=s=>a.filter.service_type=s),type:"radio",id:"normal",value:"normal"},null,512),[[S,a.filter.service_type]]),e("label",at,l(o.$t("normal")),1)])]),_:1}),n(p,null,{default:i(()=>[e("div",lt,[g(e("input",{class:"form-check-input","onUpdate:modelValue":t[9]||(t[9]=s=>a.filter.rental=s),type:"radio",id:"rental",value:"rental"},null,512),[[S,a.filter.rental]]),e("label",nt,l(o.$t("rental")),1)])]),_:1}),n(p,null,{default:i(()=>[e("div",it,[g(e("input",{class:"form-check-input","onUpdate:modelValue":t[10]||(t[10]=s=>a.filter.service_type=s),type:"radio",id:"outstation",value:"outstation"},null,512),[[S,a.filter.service_type]]),e("label",rt,l(o.$t("outstation")),1)])]),_:1})]),_:1})]),t[23]||(t[23]=e("div",null,null,-1))]),e("div",dt,[n(_,{variant:"light",onClick:a.clearFilter,class:"w-100"},{default:i(()=>[h(l(o.$t("clear_filter")),1)]),_:1},8,["onClick"]),n(_,{type:"submit",onClick:a.filterData,variant:"success",class:"w-100"},{default:i(()=>[h(l(o.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),n(D,{paginator:a.paginator,onPageChanged:a.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const yt=K(me,[["render",ct]]);export{yt as default};
