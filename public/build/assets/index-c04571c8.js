import{_ as K,Z as W,O as Z,P as j,B as q,D as G,r as g,T as Q,R as X,g as u,i as r,y as H,w as _,a as F,W as S,N as ee,l as i,n as e,J as a,t as te,K as se,k as c,L as T,F as I,z as p,p as ae,C as O}from"./vendor-8caf5d52.js";import{L as oe}from"./main-cc7bd0ce.js";import{P as ne}from"./page-header-18309276.js";import{P as le}from"./Pagination-0518e4bd.js";import{s as re}from"./search-769502e2.js";import{s as ie}from"./searchbar-e42e22fa.js";import{u as de}from"./footer-502c2797.js";import{_ as ce}from"./search-file-ab3e1046.js";import"./app-974c65a1.js";const ue={data(){return{rightOffcanvas:!1}},components:{Layout:oe,PageHeader:ne,Head:W,Pagination:le,Multiselect:Z,flatPickr:j,Link:q,search:re,searchbar:ie},props:{successMessage:String,alertMessage:String,app_for:String},setup(s){const{t}=G(),L=g(""),{selectedLocation:l}=de(),b=Q({all:"",service_location_id:"all",locked:"",limit:10}),y=g([]),f=g({}),w=g(!1),m=g(!1),B=g(null),P=g({}),C=g(s.successMessage||""),M=g(s.alertMessage||""),x=()=>{C.value="",M.value=""},N=()=>{m.value=!0},D=()=>{b.reset(),v(),m.value=!1},o=()=>{w.value=!1},k=async n=>{try{await F.delete(`/service-locations/delete/${n}`);const d=y.value.findIndex(h=>h.id===n);d!==-1&&y.value.splice(d,1),w.value=!1,S.fire(t("success"),t("negative_balance_driver_deleted_successfully"),"success")}catch{S.fire(t("error"),t("failed_to_delete_negative_balance_drivers"),"error")}},$=async n=>{S.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async d=>{if(d.isConfirmed)try{await k(n)}catch(h){console.error(t("error_deleting_data"),h),S.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},V=n=>s.app_for&&s.app_for=="demo"?"***********":n.mobile_number,E=n=>s.app_for&&s.app_for=="demo"?"***********":n.email,v=async(n=1)=>{try{const d=b.data();d.search=L.value,d.page=n;const h=await F.get("/negative-balance-drivers/list",{params:d});y.value=h.data.results,f.value=h.data.paginator,z(f.value.total),m.value=!1}catch(d){console.error(t("error_fetching_negative_balance_drivers"),d)}},A=async n=>{L.value=n,v()},R=n=>(f.value.current_page-1)*f.value.per_page+n+1,U=async n=>{localStorage.setItem("negative-balance-drivers/list",n),v(n)},Y=async n=>{ee.get(`/negative-balance-drivers/view-profile/${n.id}`)},z=()=>{P.value=[10,25,50,100,200,500]},J=()=>{v()};return X(l,n=>{console.log("value",n),b.service_location_id=n,v()}),{results:y,modalShow:w,deleteItemId:B,successMessage:C,alertMessage:M,filterData:N,deleteModal:$,closeModal:o,deleteData:k,dismissMessage:x,fetchSearch:A,SerialNumber:R,paginator:f,modalFilter:m,clearFilter:D,fetchDatas:v,mobileFromUser:V,emailFromUser:E,filter:b,handlePageChanged:U,viewProfile:Y,paginatorOption:P,changeEntriesPerPage:J,selectedLocation:l}},mounted(){this.filter.service_location_id=this.selectedLocation,this.fetchDatas();const s=localStorage.getItem("negative-balance-drivers/list");s?this.handlePageChanged(Number(s)):this.handlePageChanged(1)}},_e={class:"d-flex align-items-center mt-3"},me={class:"me-2 text-muted"},ge=["value"],fe={class:"ms-2 text-muted"},pe={class:"table-responsive"},ve={class:"table align-middle position-relative table-nowrap"},he={class:"table-active"},be={scope:"col"},ye={scope:"col"},we={scope:"col"},Ce={scope:"col"},Be={scope:"col"},Pe={scope:"col"},Me={scope:"col"},ke={key:0},Se={key:0},Le={key:1},xe={key:2},Ne={class:"dropdown"},De={class:"dropdown-menu dropdown-menu-end"},He=["onClick"],$e={key:1},Fe={colspan:"7",class:"text-center"},Te={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Ie={class:"alert-content"},Oe={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ve={class:"alert-content"};function Ee(s,t,L,l,b,y){const f=u("Head"),w=u("PageHeader"),m=u("BCol"),B=u("BRow"),P=u("BCardHeader"),C=u("BBadge"),M=u("BCardBody"),x=u("BCard"),N=u("Pagination"),D=u("Layout");return r(),H(D,null,{default:_(()=>[i(f,{title:"Negative Balance Drivers"}),i(w,{title:s.$t("negative_balance_drivers"),pageTitle:s.$t("negative_balance_drivers")},null,8,["title","pageTitle"]),i(B,null,{default:_(()=>[i(m,{lg:"12"},{default:_(()=>[i(x,{"no-body":"",id:"tasksList"},{default:_(()=>[i(P,{class:"border-0"},{default:_(()=>[i(B,{class:"g-2"},{default:_(()=>[i(m,{md:"3"},{default:_(()=>[e("div",_e,[e("label",me,a(s.$t("show")),1),te(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>l.filter.limit=o),onChange:t[1]||(t[1]=(...o)=>l.changeEntriesPerPage&&l.changeEntriesPerPage(...o)),class:"form-select form-select-sm w-auto"},[(r(!0),c(I,null,T(l.paginatorOption,o=>(r(),c("option",{key:o,value:o},a(o),9,ge))),128))],544),[[se,l.filter.limit]]),e("label",fe,a(s.$t("entries")),1)])]),_:1}),i(m,{md:"3"}),i(m,{md:"auto",class:"ms-auto"})]),_:1})]),_:1}),i(M,{class:"border border-dashed border-end-0 border-start-0"},{default:_(()=>[e("div",pe,[e("table",ve,[e("thead",he,[e("tr",null,[e("th",be,a(s.$t("name")),1),e("th",ye,a(s.$t("service_location")),1),e("th",we,a(s.$t("email")),1),e("th",Ce,a(s.$t("mobile_number")),1),e("th",Be,a(s.$t("transport_type")),1),e("th",Pe,a(s.$t("approved_status")),1),e("th",Me,a(s.$t("action")),1)])]),l.results.length>0?(r(),c("tbody",ke,[(r(!0),c(I,null,T(l.results,(o,k)=>(r(),c("tr",{key:k},[e("td",null,a(o.name),1),e("td",null,a(o.service_location_name),1),e("td",null,a(o.email),1),e("td",null,a(o.mobile_number),1),e("td",null,[o.transport_type==="taxi"?(r(),c("span",Se,a(s.$t("taxi")),1)):o.transport_type==="delivery"?(r(),c("span",Le,a(s.$t("delivery")),1)):(r(),c("span",xe,a(s.$t("all")),1))]),e("td",null,[o.active==1?(r(),H(C,{key:0,variant:"success",class:"text-uppercase"},{default:_(()=>[p(a(s.$t("approved")),1)]),_:1})):(r(),H(C,{key:1,variant:"danger",class:"text-uppercase"},{default:_(()=>[p(a(s.$t("disapproved")),1)]),_:1}))]),e("td",null,[e("div",Ne,[t[5]||(t[5]=e("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("span",{class:"text-muted fs-18"},[e("i",{class:"mdi mdi-dots-vertical"})])],-1)),e("div",De,[e("a",{class:"dropdown-item",href:"#",onClick:ae($=>l.viewProfile(o),["prevent"])},[t[4]||(t[4]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),p(a(s.$t("view_profile")),1)],8,He)])])])]))),128))])):(r(),c("tbody",$e,[e("tr",null,[e("td",Fe,[t[6]||(t[6]=e("img",{src:ce,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,a(s.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[l.successMessage?(r(),c("div",Te,[e("div",Ie,[t[7]||(t[7]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[8]||(t[8]=p()),t[9]||(t[9]=e("strong",null,"Success",-1)),p(" - "+a(l.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...o)=>l.dismissMessage&&l.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):O("",!0),l.alertMessage?(r(),c("div",Oe,[e("div",Ve,[t[10]||(t[10]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[11]||(t[11]=p()),t[12]||(t[12]=e("strong",null,"Alert",-1)),p(" - "+a(l.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...o)=>l.dismissMessage&&l.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):O("",!0)]),i(N,{paginator:l.paginator,onPageChanged:l.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const je=K(ue,[["render",Ee]]);export{je as default};
