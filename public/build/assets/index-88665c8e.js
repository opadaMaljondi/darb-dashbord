import{_ as ae,Z as ne,O as le,P as ie,B as re,r as b,T as de,D as ce,R as ue,S as me,g as p,U as fe,i as l,y as C,w as d,a as j,W as B,N as L,l as u,n as e,t as w,k as r,q as z,J as n,K as pe,L as W,F as $,z as g,C as m,p as k,X as F}from"./vendor-54d6cb1e.js";import{L as ge}from"./main-b839be26.js";import{P as ve}from"./page-header-ff719701.js";import{P as _e}from"./Pagination-b5e3d5c9.js";import{s as he}from"./search-06463c60.js";import{s as be}from"./searchbar-3bdb3315.js";import{u as we,l as ke}from"./footer-7e4f68d9.js";import{_ as G}from"./search-file-ab3e1046.js";import"./app-cb082573.js";const ye={data(){return{rightOffcanvas:!1,isListView:!0}},created(){const o=localStorage.getItem("ownerViewMode");o&&(this.isListView=o==="list")},methods:{toggleView(o){this.isListView=o==="list",localStorage.setItem("ownerViewMode",o)}},components:{Layout:ge,PageHeader:ve,Head:ne,Pagination:_e,Multiselect:le,flatPickr:ie,Link:re,search:he,searchbar:be},props:{successMessage:String,alertMessage:String,app_for:String,serviceLocations:{type:Object,required:!0}},setup(o){const t=b(""),{selectedLocation:P}=we();b(o.serviceLocations||null);const a=de({owner_service_location:"all",status:null,approveStatus:null,limit:10}),v=b([]),M=b({}),D=b(!1),O=b(!1),S=b(null),{t:c}=ce(),_=b({}),I=b(o.successMessage||""),R=b(o.alertMessage||""),N=()=>{I.value="",R.value=""},V=b(!1),U=()=>{s(),O.value=!0,V.value=!1},A=()=>{a.reset(),s(),V.value=!1},E=()=>{D.value=!1},T=async i=>{try{await j.delete(`/manage-owners/delete/${i}`);const f=v.value.findIndex(x=>x.id===i);f!==-1&&v.value.splice(f,1),D.value=!1,B.fire(c("success"),c("service_location_deleted_successfully"),"success")}catch{B.fire(c("error"),c("failed_to_delete_service_location"),"error")}},y=async i=>{B.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async f=>{if(f.isConfirmed)try{await T(i)}catch(x){console.error(c("error_deleting_data"),x),B.fire(c("error"),c("failed_to_delete_the_data"),"error")}})},s=async(i=1)=>{try{const f=a.data();f.page=i,t.value.length>0&&(f.search=t.value);const x=await j.get("/manage-owners/list",{params:f});v.value=x.data.results,M.value=x.data.paginator,te(M.value.total),O.value=!1}catch(f){console.error(c("error_fetching_manage_owners"),f)}};ue(P,i=>{console.log("value",i),a.owner_service_location=i,s()});const H=async i=>{localStorage.setItem("manage-owners/list",i),s(i)},h=async i=>{t.value=i,s()},J=async i=>{L.get(`/manage-owners/document/${i.id}`)},K=async(i,f,x)=>{B.fire({title:c("are_you_sure"),text:c("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:c("yes"),cancelButtonText:c("cancel")}).then(async se=>{if(se.isConfirmed)try{if((await j.post("/manage-owners/update-status",{id:i,status:f})).data.data=="uploaddocument")L.get(`/manage-owners/document/${i}`);else{const Y=v.value.findIndex(oe=>oe.id===i);Y!==-1&&(v.value[Y].approve=f),B.fire(c("changed"),c("status_updated_successfully"),"success")}}catch(q){console.error(c("error_updating_status"),q),B.fire(c("error"),c("failed_to_update_status"),"error")}})},X=async i=>{L.get(`/manage-owners/edit/${i.id}`)},Z=async()=>{L.get("/manage-owners/create")},Q=async i=>{L.get(`/manage-owners/password/edit/${i.id}`)},ee=async i=>{L.get(`/manage-owners/view-profile/${i.id}`)},te=()=>{_.value=[10,25,50,100,200,500]};return{results:v,modalShow:D,deleteItemId:S,successMessage:I,alertMessage:R,filterData:U,deleteModal:y,closeModal:E,deleteData:T,dismissMessage:N,fetchSearch:h,searchTerm:t,paginator:M,modalFilter:O,clearFilter:A,fetchDatas:s,filter:a,addOwner:Z,handlePageChanged:H,editData:X,viewOwnerDocument:J,rightOffcanvas:V,editPassData:Q,viewProfile:ee,toggleActiveStatus:K,paginatorOption:_,changeEntriesPerPage:()=>{s()},selectedLocation:P}},computed:{...ke,...me(["permissions"])},mounted(){this.filter.owner_service_location=this.selectedLocation,this.fetchDatas();const o=localStorage.getItem("manage-owners/list");o?this.handlePageChanged(Number(o)):this.handlePageChanged(1)}},Ce={class:"d-flex align-items-center"},xe={class:"toggle-buttons mt-3 me-4"},Be=["title"],Pe=["title"],Me={class:"d-flex align-items-center mt-3"},Se={class:"me-2 text-muted"},Ve=["value"],Le={class:"ms-2 text-muted"},De={class:"d-flex align-items-center gap-2"},Oe={class:"table-responsive"},Ie={class:"table align-middle position-relative table-nowrap"},He={class:"table-owner"},Re={scope:"col"},Te={scope:"col"},ze={scope:"col"},Fe={scope:"col"},Ne={scope:"col"},Ue={scope:"col"},Ae={key:0},Ee={key:0},je=["href"],We={key:1},$e=["onClick","id","checked"],qe={key:1},Ye={colspan:"7",class:"text-center"},Ge={key:0,class:"row"},Je={class:"card card-height-100"},Ke={class:"card-body"},Xe={class:"d-flex flex-column h-100"},Ze={class:"d-flex"},Qe={class:"flex-shrink-0"},et={class:"d-flex gap-1 align-items-center"},tt={class:"dropdown"},st={class:"dropdown-menu dropdown-menu-end"},ot=["onClick"],at=["onClick"],nt=["onClick"],lt=["onClick"],it={class:"d-flex mb-2 card-footer bg-transparent border-top-dashed"},rt={class:"flex-shrink-0 me-3"},dt={key:0,class:"avatar-sm"},ct={class:"avatar-title bg-warning-subtle rounded p-2"},ut=["src"],mt={key:1,class:"avatar-sm"},ft={class:"flex-grow-1"},pt={class:"mb-1 fs-15"},gt={class:"text-body"},vt={class:"flex-grow-1",scope:"row"},_t={class:"fw-medium p-2"},ht={class:"table-responsive table-card mt-2 ms-2"},bt={class:"table table-borderless mb-0"},wt={class:"card-footer bg-transparent border-top-dashed py-2"},kt={class:"d-flex align-items-center"},yt={class:"flex-grow-1"},Ct={key:0},xt=["href"],Bt={class:"flex-end"},Pt={key:0},Mt=["onClick","id","checked"],St={class:"table-responsive table-card mt-2 ms-2"},Vt={class:"table table-borderless mb-0"},Lt={colspan:"12",class:"text-center m-auto"},Dt={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Ot={class:"alert-content"},It={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Ht={class:"alert-content"},Rt={class:"offcanvas-body"},Tt={class:"mb-4"},zt={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ft={class:"form-check form-check-inline"},Nt={class:"form-check-label",for:"inlineRadio1"},Ut={class:"form-check form-check-inline"},At={class:"form-check-label",for:"WithoutinlineRadio2"},Et={class:"mb-4"},jt={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Wt={class:"form-check form-check-inline"},$t={class:"form-check-label",for:"active"},qt={class:"form-check form-check-inline"},Yt={class:"form-check-label",for:"inactive"},Gt={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function Jt(o,t,P,a,v,M){const D=p("Head"),O=p("PageHeader"),S=p("BCol"),c=p("searchbar"),_=p("BButton"),I=p("BRow"),R=p("BCardHeader"),N=p("BCardBody"),V=p("BCard"),U=p("BFrom"),A=p("BOffcanvas"),E=p("Pagination"),T=p("Layout"),y=fe("b-tooltip");return l(),C(T,null,{default:d(()=>[u(D,{title:"Manage Owners"}),u(O,{title:o.$t("manage_owners"),pageTitle:o.$t("manage_owners")},null,8,["title","pageTitle"]),u(I,null,{default:d(()=>[u(S,{lg:"12"},{default:d(()=>[u(V,{"no-body":"",id:"tasksList"},{default:d(()=>[u(R,{class:"border-0"},{default:d(()=>[u(I,{class:"g-2"},{default:d(()=>[u(S,{md:"4"},{default:d(()=>[e("div",Ce,[e("div",xe,[w((l(),r("a",{"data-bs-toggle":"tooltip",title:o.$t("list_view"),class:z(["list-btn",{active:v.isListView}]),onClick:t[0]||(t[0]=s=>M.toggleView("list"))},[...t[12]||(t[12]=[e("i",{class:"ri-list-check"},null,-1)])],10,Be)),[[y,void 0,void 0,{hover:!0}]]),w((l(),r("a",{"data-bs-toggle":"tooltip",title:o.$t("grid_view"),class:z(["list-btn",{active:!v.isListView}]),onClick:t[1]||(t[1]=s=>M.toggleView("grid"))},[...t[13]||(t[13]=[e("i",{class:"ri-grid-fill"},null,-1)])],10,Pe)),[[y,void 0,void 0,{hover:!0}]])]),e("div",Me,[e("label",Se,n(o.$t("show")),1),w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.filter.limit=s),onChange:t[3]||(t[3]=(...s)=>a.changeEntriesPerPage&&a.changeEntriesPerPage(...s)),class:"form-select form-select-sm w-auto"},[(l(!0),r($,null,W(a.paginatorOption,s=>(l(),r("option",{key:s,value:s},n(s),9,Ve))),128))],544),[[pe,a.filter.limit]]),e("label",Le,n(o.$t("entries")),1)])])]),_:1}),u(S,{md:"2"}),u(S,{md:"auto",class:"ms-auto"},{default:d(()=>[e("div",De,[u(c,{onSearch:a.fetchSearch},null,8,["onSearch"]),u(_,{variant:"danger",onClick:t[4]||(t[4]=s=>a.rightOffcanvas=!0)},{default:d(()=>[t[14]||(t[14]=e("i",{class:"ri-filter-2-line me-1 align-bottom"},null,-1)),g(" "+n(o.$t("filters")),1)]),_:1}),o.permissions.includes("add-owner")?(l(),C(_,{key:0,variant:"primary",onClick:a.addOwner,class:"float-end"},{default:d(()=>[t[15]||(t[15]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),g(" "+n(o.$t("add_manage_owners")),1)]),_:1},8,["onClick"])):m("",!0)])]),_:1})]),_:1})]),_:1}),v.isListView?(l(),C(N,{key:0,class:"border border-dashed border-end-0 border-start-0"},{default:d(()=>[e("div",Oe,[e("table",Ie,[e("thead",He,[e("tr",null,[e("th",Re,n(o.$t("company_name")),1),e("th",Te,n(o.$t("email")),1),e("th",ze,n(o.$t("mobile_number")),1),e("th",Fe,n(o.$t("document_view")),1),e("th",Ne,n(o.$t("approval_status")),1),e("th",Ue,n(o.$t("action")),1)])]),a.results.length>0?(l(),r("tbody",Ae,[(l(!0),r($,null,W(a.results,(s,H)=>(l(),r("tr",{key:H},[e("td",null,n(s.company_name),1),e("td",null,n(s.email),1),e("td",null,n(s.mobile_number),1),o.permissions.includes("view-owner-document")?(l(),r("td",Ee,[e("a",{href:`/manage-owners/document/${s.id}`,target:"_blank"},[...t[16]||(t[16]=[e("i",{class:"bx bxs-file text-primary",style:{"font-size":"35px"}},null,-1)])],8,je)])):m("",!0),o.permissions.includes("toggle-owner")?(l(),r("td",We,[e("div",{class:z({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":s.approve})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:k(h=>a.toggleActiveStatus(s.id,!s.approve),["prevent"]),id:"status_"+s.id,checked:s.approve},null,8,$e)],2)])):m("",!0),e("td",null,[o.permissions.includes("edit-owner")?w((l(),C(_,{key:0,onClick:k(h=>a.editData(s),["prevent"]),class:"btn btn-soft-warning btn-sm m-2","data-bs-toggle":"tooltip",title:"Edit"},{default:d(()=>[...t[17]||(t[17]=[e("i",{class:"bx bxs-edit-alt bx-xs"},null,-1)])]),_:1},8,["onClick"])),[[y,void 0,void 0,{hover:!0}]]):m("",!0),o.permissions.includes("edit-owner")&&P.app_for!=="demo"?w((l(),C(_,{key:1,onClick:k(h=>a.editPassData(s),["prevent"]),class:"btn btn-soft-secondary btn-sm m-2","data-bs-toggle":"tooltip",title:o.$t("update_password")},{default:d(()=>[...t[18]||(t[18]=[e("i",{class:"ri-lock-password-line bx-xs"},null,-1)])]),_:1},8,["onClick","title"])),[[y,void 0,void 0,{hover:!0}]]):m("",!0),o.permissions.includes("delete-owner")&&P.app_for!=="demo"?w((l(),C(_,{key:2,class:"btn btn-soft-danger btn-sm m-2",size:"sm",type:"button",onClick:k(h=>a.deleteModal(s.id),["prevent"]),"data-bs-toggle":"tooltip",title:"Delete"},{default:d(()=>[...t[19]||(t[19]=[e("i",{class:"bx bx-trash bx-xs"},null,-1)])]),_:1},8,["onClick"])),[[y,void 0,void 0,{hover:!0}]]):m("",!0),o.permissions.includes("view-owner-profile")?w((l(),C(_,{key:3,class:"btn btn-soft-success btn-sm m-2",size:"sm",type:"button",onClick:k(h=>a.viewProfile(s),["prevent"]),"data-bs-toggle":"tooltip",title:"View Profile"},{default:d(()=>[...t[20]||(t[20]=[e("i",{class:"ri-account-circle-line bx-xs"},null,-1)])]),_:1},8,["onClick"])),[[y,void 0,void 0,{hover:!0}]]):m("",!0)])]))),128))])):(l(),r("tbody",qe,[e("tr",null,[e("td",Ye,[t[21]||(t[21]=e("img",{src:G,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,n(o.$t("no_data_found")),1)])])]))])])]),_:1})):m("",!0)]),_:1})]),_:1})]),_:1}),v.isListView?m("",!0):(l(),r("div",Ge,[a.results.length>0?(l(!0),r($,{key:0},W(a.results,(s,H)=>(l(),r("div",{class:"col-xxl-3 col-sm-6 project-card",key:H},[e("div",Je,[e("div",Ke,[e("div",Xe,[e("div",Ze,[t[27]||(t[27]=e("div",{class:"flex-grow-1"},null,-1)),e("div",Qe,[e("div",et,[e("div",tt,[t[26]||(t[26]=e("button",{class:"btn btn-link text-muted p-1 mt-n2 py-0 text-decoration-none fs-15","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-more-horizontal icon-sm"},[e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"19",cy:"12",r:"1"}),e("circle",{cx:"5",cy:"12",r:"1"})])],-1)),e("div",st,[o.permissions.includes("view-owner-profile")?(l(),r("a",{key:0,class:"dropdown-item",href:"#",onClick:k(h=>a.viewProfile(s),["prevent"])},[t[22]||(t[22]=e("i",{class:"bx bx-radio-circle-marked align-center text-muted me-2"},null,-1)),g(n(o.$t("view_profile")),1)],8,ot)):m("",!0),o.permissions.includes("edit-owner")?(l(),r("a",{key:1,class:"dropdown-item",href:"#",onClick:k(h=>a.editData(s),["prevent"])},[t[23]||(t[23]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),g(n(o.$t("edit")),1)],8,at)):m("",!0),o.permissions.includes("edit-owner")?(l(),r("a",{key:2,class:"dropdown-item",href:"#",onClick:k(h=>a.editPassData(s),["prevent"])},[t[24]||(t[24]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),g(n(o.$t("update_password")),1)],8,nt)):m("",!0),o.permissions.includes("delete-owner")&&P.app_for!=="demo"?(l(),r("a",{key:3,class:"dropdown-item",href:"#",onClick:k(h=>a.deleteModal(s.id),["prevent"])},[t[25]||(t[25]=e("i",{class:"bx bxs-trash-alt align-center text-muted me-2"},null,-1)),g(n(o.$t("delete")),1)],8,lt)):m("",!0)])])])])]),e("div",it,[e("div",rt,[s.profile_picture?(l(),r("div",dt,[e("span",ct,[e("img",{class:"avatar-xs rounded-circle p-1",alt:"profile picture",src:s.profile_picture},null,8,ut)])])):(l(),r("div",mt,[...t[28]||(t[28]=[e("span",{class:"avatar-title bg-warning-subtle rounded p-2"},[e("img",{class:"avatar-xs rounded-circle p-1",alt:"profile picture",src:"/assets/images/Male_default_image.png"})],-1)])]))]),e("div",ft,[e("h5",pt,[e("a",gt,n(s.name??"----"),1)]),e("tr",null,[e("td",vt,n(o.$t("company_name"))+" :",1),e("td",_t,n(s.company_name??"----"),1)])])]),e("div",ht,[e("table",bt,[e("tbody",null,[e("tr",null,[t[29]||(t[29]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-phone fs-24"})],-1)),e("td",null,n(s.mobile_number??"----"),1)]),e("tr",null,[t[30]||(t[30]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-envelope-open-text fs-24"})],-1)),e("td",null,n(s.email??"----"),1)])])])])])]),e("div",wt,[e("div",kt,[e("div",yt,[o.permissions.includes("view-owner-document")?(l(),r("td",Ct,[e("a",{href:`/manage-owners/document/${s.id}`,target:"_blank"},[...t[31]||(t[31]=[e("i",{class:"bx bxs-file text-primary",style:{"font-size":"35px"}},null,-1)])],8,xt)])):m("",!0)]),e("div",Bt,[o.permissions.includes("toggle-owner")?(l(),r("td",Pt,[e("div",{class:z({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":s.approve})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:k(h=>a.toggleActiveStatus(s.id,!s.approve),["prevent"]),id:"status_"+s.id,checked:s.approve},null,8,Mt)],2)])):m("",!0)])])])])]))),128)):(l(),C(V,{key:1},{default:d(()=>[e("div",St,[e("table",Vt,[e("tbody",null,[e("tr",null,[e("td",Lt,[t[32]||(t[32]=e("img",{src:G,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,n(o.$t("no_data_found")),1)])])])])])]),_:1}))])),e("div",null,[a.successMessage?(l(),r("div",Dt,[e("div",Ot,[t[33]||(t[33]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[34]||(t[34]=g()),t[35]||(t[35]=e("strong",null,"Success",-1)),g(" - "+n(a.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[5]||(t[5]=(...s)=>a.dismissMessage&&a.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):m("",!0),a.alertMessage?(l(),r("div",It,[e("div",Ht,[t[36]||(t[36]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[37]||(t[37]=g()),t[38]||(t[38]=e("strong",null,"Alert",-1)),g(" - "+n(a.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[6]||(t[6]=(...s)=>a.dismissMessage&&a.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):m("",!0)]),u(A,{modelValue:a.rightOffcanvas,"onUpdate:modelValue":t[11]||(t[11]=s=>a.rightOffcanvas=s),placement:"end",title:o.$t("filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:d(()=>[u(U,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:d(()=>[e("div",Rt,[e("div",Tt,[e("label",zt,n(o.$t("approval_status")),1),e("div",null,[e("div",Ft,[w(e("input",{class:"form-check-input",type:"radio",name:"approval_status",id:"inlineRadio1",value:"1","onUpdate:modelValue":t[7]||(t[7]=s=>a.filter.approveStatus=s)},null,512),[[F,a.filter.approveStatus]]),e("label",Nt,n(o.$t("approved")),1)]),e("div",Ut,[w(e("input",{class:"form-check-input",type:"radio",name:"approval_status",id:"WithoutinlineRadio2",value:"0","onUpdate:modelValue":t[8]||(t[8]=s=>a.filter.approveStatus=s)},null,512),[[F,a.filter.approveStatus]]),e("label",At,n(o.$t("disapproved")),1)])])]),e("div",Et,[e("label",jt,n(o.$t("status")),1),e("div",null,[e("div",Wt,[w(e("input",{class:"form-check-input",type:"radio",name:"status",id:"active",value:"1","onUpdate:modelValue":t[9]||(t[9]=s=>a.filter.status=s)},null,512),[[F,a.filter.status]]),e("label",$t,n(o.$t("active")),1)]),e("div",qt,[w(e("input",{class:"form-check-input",type:"radio",name:"status",id:"inactive",value:"0","onUpdate:modelValue":t[10]||(t[10]=s=>a.filter.status=s)},null,512),[[F,a.filter.status]]),e("label",Yt,n(o.$t("inactive")),1)])])]),t[39]||(t[39]=e("div",null,null,-1))]),e("div",Gt,[u(_,{onClick:a.clearFilter,variant:"light",class:"w-100"},{default:d(()=>[g(n(o.$t("clear_filter")),1)]),_:1},8,["onClick"]),u(_,{onClick:a.filterData,type:"submit",variant:"success",class:"w-100"},{default:d(()=>[g(n(o.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),u(E,{paginator:a.paginator,onPageChanged:a.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const ls=ae(ye,[["render",Jt],["__scopeId","data-v-5bb8d926"]]);export{ls as default};
