import{_ as J,Z,O as q,P as Q,B as X,r as b,D as ee,T as te,R as se,a3 as oe,a as P,S as le,g as u,U as ae,i as f,y as U,w as c,W as D,N as W,l as d,n as e,J as o,t as S,K as z,k as h,L as G,F as K,z as w,C as x,p as Y}from"./vendor-54d6cb1e.js";import{L as ne}from"./main-b839be26.js";import{P as ie}from"./page-header-ff719701.js";import{P as re}from"./Pagination-b5e3d5c9.js";import{s as de}from"./search-06463c60.js";import{s as ce}from"./searchbar-3bdb3315.js";import{l as ue}from"./footer-7e4f68d9.js";import{_ as me}from"./search-file-ab3e1046.js";import"./app-cb082573.js";const fe={data(){return{rightOffcanvas:!1}},components:{Layout:ne,PageHeader:ie,Head:Z,Pagination:re,Multiselect:q,flatPickr:Q,Link:X,search:de,searchbar:ce},props:{successMessage:String,alertMessage:String,user:Object},setup(s){const t=b(""),{t:m}=ee(),i=te({all:"",locked:"",limit:10}),p=b([]),$=b({}),B=b(!1),C=b(!1),g=b(null),R=b({}),v=b(s.successMessage||""),_=b(s.alertMessage||""),M=()=>{v.value="",_.value=""},I=()=>{C.value=!0},V=()=>{i.reset(),k(),C.value=!1},F=()=>{B.value=!1},L=async n=>{try{await P.delete(`/banner-image/delete/${n}`);const r=p.value.findIndex(a=>a.id===n);r!==-1&&p.value.splice(r,1),B.value=!1,D.fire(m("success"),m("banner_image_deleted_successfully"),"success")}catch(r){r.response&&r.response.status==403&&(_.value=r.response.data.alertMessage,setTimeout(()=>{_.value=""},5e3)),D.fire(m("error"),m("failed_to_delete_banner_image"),"error")}},T=async n=>{D.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async r=>{if(r.isConfirmed)try{await L(n)}catch(a){console.error(m("error_deleting_data"),a),D.fire(m("error"),m("failed_to_delete_the_data"),"error")}})};se(t,oe.debounce(function(n){k(t.value)},300));const k=async(n=1)=>{try{const r=i.data();r.search=t.value,r.page=n;const a=await P.get("/driver-import/list",{params:r});p.value=a.data.results,$.value=a.data.paginator,l($.value.total),C.value=!1}catch(r){console.error(m("error_fetching_banner_image"),r)}},A=async(n,r)=>{try{await P.post("/banner-image/update-status",{id:n,status:r});const a=p.value.findIndex(y=>y.id===n);a!==-1&&(p.value[a].active===1?(v.value=m("banner_image_inactive_successfully"),p.value[a].active=r):(v.value=m("banner_image_active_successfully"),p.value[a].active=r),setTimeout(()=>{v.value=""},5e3))}catch(a){a.response&&a.response.status==403&&(_.value=a.response.data.alertMessage,setTimeout(()=>{_.value=""},5e3)),console.error(m("error_updating_status"),a)}},H=async n=>{localStorage.setItem("user-import/list",n),k(n)},E=async n=>{W.get(`/banner-image/edit/${n.id}`)},O=n=>n?`${n}`:"",l=()=>{R.value=[10,25,50,100,200,500]},N=()=>{k()};return b(!1),{results:p,modalShow:B,deleteItemId:g,successMessage:v,alertMessage:_,filterData:I,deleteModal:T,closeModal:F,deleteData:L,dismissMessage:M,searchTerm:t,paginator:$,modalFilter:C,clearFilter:V,fetchDatas:k,filter:i,handlePageChanged:H,editData:E,getFullImageUrl:O,toggleActiveStatus:A,paginatorOption:R,changeEntriesPerPage:N,downloadInvalid:async n=>{const r=await P.get(`/driver-import/download-invalid-file/${n}`,{responseType:"blob"}),a=window.URL.createObjectURL(new Blob([r.data]));console.log("url",a);const y=document.createElement("a");y.href=a,y.setAttribute("download","invalid_drivers.xlsx"),document.body.appendChild(y),y.click(),y.remove(),window.URL.revokeObjectURL(a),console.log("response",r)},reuploadInvalid:async n=>{W.get(`/driver-import/reupload-invalid-file/${n}`)},sampleFileDownload:async()=>{const n=await P.get("/driver-import/sample-download",{responseType:"blob"}),r=window.URL.createObjectURL(new Blob([n.data])),a=document.createElement("a");a.href=r,a.setAttribute("download","driver_sample_upload.xlsx"),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(r),console.log("response",n)}}},computed:{...ue,...le(["permissions"])},mounted(){this.fetchDatas();const s=localStorage.getItem("banner-image/list");s?this.handlePageChanged(Number(s)):this.handlePageChanged(1)}},pe={class:"d-flex align-items-center mt-3"},ve={class:"me-2 text-muted"},be=["value"],ge={class:"ms-2 text-muted"},_e={class:"d-flex align-items-center gap-2"},he={class:"table-responsive"},ke={class:"table align-middle position-relative table-nowrap"},ye={class:"table-active"},we={scope:"col"},Ce={scope:"col"},Be={key:0},Me={class:"d-flex"},Pe={key:1},xe={colspan:"7",class:"text-center"},$e={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Re={class:"alert-content"},Le={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},Oe={class:"alert-content"},Ue={class:"offcanvas-body"},De={class:"mb-4"},Se={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ie={value:"All Tasks"},Ve={value:"Completed"},Fe={value:"Inprogress"},Te={value:"Pending"},Ae={value:"Pending"},He={class:"mb-4"},Ee={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ne={class:"form-check form-check-inline"},je={class:"form-check-label",for:"inlineRadio1"},We={class:"form-check form-check-inline"},ze={class:"form-check-label",for:"inlineRadio1"},Ge={class:"form-check form-check-inline"},Ke={class:"form-check-label",for:"inlineRadio1"},Ye={class:"mb-4"},Je={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Ze={class:"mb-4"},qe={for:"country-select",class:"form-label text-muted text-uppercase fw-semibold mb-3"},Qe={class:"mb-4"},Xe={for:"status-select",class:"form-label text-muted text-uppercase fw-semibold mb-3"},et={class:"form-check"},tt={class:"form-check-label",for:"inlineCheckbox1"},st={class:"form-check"},ot={class:"form-check-label",for:"inlineCheckbox2"},lt={class:"form-check"},at={class:"form-check-label",for:"inlineCheckbox3"},nt={class:"form-check"},it={class:"form-check-label",for:"inlineCheckbox4"},rt={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function dt(s,t,m,i,p,$){const B=u("Head"),C=u("PageHeader"),g=u("BCol"),R=u("BLink"),v=u("BButton"),_=u("Link"),M=u("BRow"),I=u("BCardHeader"),V=u("BCardBody"),F=u("BCard"),L=u("flat-pickr"),T=u("Multiselect"),k=u("BFrom"),A=u("BOffcanvas"),H=u("Pagination"),E=u("Layout"),O=ae("b-tooltip");return f(),U(E,null,{default:c(()=>[d(B,{title:"Driver Import"}),d(C,{title:s.$t("driver-import"),pageTitle:s.$t("driver-import")},null,8,["title","pageTitle"]),d(M,null,{default:c(()=>[d(g,{lg:"12"},{default:c(()=>[d(F,{"no-body":"",id:"tasksList"},{default:c(()=>[d(I,{class:"border-0"},{default:c(()=>[d(M,{class:"g-2"},{default:c(()=>[d(g,{md:"3"},{default:c(()=>[e("div",pe,[e("label",ve,o(s.$t("show")),1),S(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.filter.limit=l),onChange:t[1]||(t[1]=(...l)=>i.changeEntriesPerPage&&i.changeEntriesPerPage(...l)),class:"form-select form-select-sm w-auto"},[(f(!0),h(K,null,G(i.paginatorOption,l=>(f(),h("option",{key:l,value:l},o(l),9,be))),128))],544),[[z,i.filter.limit]]),e("label",ge,o(s.$t("entries")),1)])]),_:1}),d(g,{md:"auto",class:"ms-auto"},{default:c(()=>[e("div",_e,[d(R,null,{default:c(()=>[e("h6",{class:"text-success text-decoration-underline text-decoration-underline-success float-end heart",onClick:t[2]||(t[2]=l=>i.sampleFileDownload())},o(s.$t("sample_download")),1)]),_:1}),s.permissions.includes("driver_upload_bulk_file")?(f(),U(_,{key:0,href:"/driver-import/create"},{default:c(()=>[d(v,{variant:"primary",class:"float-end"},{default:c(()=>[t[9]||(t[9]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),w(" "+o(s.$t("add_files")),1)]),_:1})]),_:1})):x("",!0)])]),_:1})]),_:1})]),_:1}),d(V,{class:"border border-dashed border-end-0 border-start-0"},{default:c(()=>[e("div",he,[e("table",ke,[e("thead",ye,[e("tr",null,[e("th",we,o(s.$t("invalid_files")),1),e("th",Ce,o(s.$t("action")),1)])]),i.results.length>0?(f(),h("tbody",Be,[(f(!0),h(K,null,G(i.results,(l,N)=>(f(),h("tr",{key:N},[e("td",null,o(l.invalid_file_path),1),e("td",null,[e("div",Me,[s.permissions.includes("driver_download_bulk_file")&&l.invalid_file==1?S((f(),U(v,{key:0,onClick:Y(j=>i.downloadInvalid(l.id),["prevent"]),class:"btn btn-soft-secondary btn-sm m-2","data-bs-toggle":"tooltip",title:s.$t("download")},{default:c(()=>[...t[10]||(t[10]=[e("i",{class:"bx bx-download bx-xs"},null,-1)])]),_:1},8,["onClick","title"])),[[O,void 0,void 0,{hover:!0}]]):x("",!0),s.permissions.includes("driver_reupload_bulk_file")&&l.invalid_file==1?S((f(),U(v,{key:1,onClick:Y(j=>i.reuploadInvalid(l.id),["prevent"]),class:"btn btn-soft-success btn-sm m-2","data-bs-toggle":"tooltip",title:s.$t("reupload")},{default:c(()=>[...t[11]||(t[11]=[e("i",{class:"bx bx-upload bx-xs"},null,-1)])]),_:1},8,["onClick","title"])),[[O,void 0,void 0,{hover:!0}]]):x("",!0)])])]))),128))])):(f(),h("tbody",Pe,[e("tr",null,[e("td",xe,[t[12]||(t[12]=e("img",{src:me,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,o(s.$t("no_data_found")),1)])])]))])])]),_:1})]),_:1})]),_:1})]),_:1}),e("div",null,[i.successMessage?(f(),h("div",$e,[e("div",Re,[t[13]||(t[13]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[14]||(t[14]=w()),t[15]||(t[15]=e("strong",null,"Success",-1)),w(" - "+o(i.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[3]||(t[3]=(...l)=>i.dismissMessage&&i.dismissMessage(...l)),"aria-label":"Close Success Message"})])])):x("",!0),i.alertMessage?(f(),h("div",Le,[e("div",Oe,[t[16]||(t[16]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[17]||(t[17]=w()),t[18]||(t[18]=e("strong",null,"Alert",-1)),w(" - "+o(i.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[4]||(t[4]=(...l)=>i.dismissMessage&&i.dismissMessage(...l)),"aria-label":"Close Alert Message"})])])):x("",!0)]),d(A,{modelValue:p.rightOffcanvas,"onUpdate:modelValue":t[8]||(t[8]=l=>p.rightOffcanvas=l),placement:"end",title:s.$t("leads_filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:c(()=>[d(k,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:c(()=>[e("div",Ue,[e("div",De,[e("label",Se,o(s.$t("process")),1),S(e("select",{class:"form-control","data-choices":"","data-choices-search-false":"",name:"choices-select-status",id:"choices-select-status","onUpdate:modelValue":t[5]||(t[5]=l=>s.status=l)},[e("option",Ie,o(s.$t("all")),1),e("option",Ve,o(s.$t("completed")),1),e("option",Fe,o(s.$t("inprogress")),1),e("option",Te,o(s.$t("pending")),1),e("option",Ae,o(s.$t("cancelled")),1)],512),[[z,s.status]])]),e("div",He,[e("label",Ee,o(s.$t("payment")),1),e("div",null,[e("div",Ne,[t[19]||(t[19]=e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"WithoutinlineRadio1",value:"option1"},null,-1)),e("label",je,o(s.$t("online")),1)]),e("div",We,[t[20]||(t[20]=e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"WithoutinlineRadio2",value:"option2"},null,-1)),e("label",ze,o(s.$t("card")),1)]),e("div",Ge,[t[21]||(t[21]=e("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"WithoutinlineRadio3",value:"option3"},null,-1)),e("label",Ke,o(s.$t("cash")),1)])])]),e("div",Ye,[e("label",Je,o(s.$t("date")),1),d(L,{placeholder:s.$t("select_date"),modelValue:s.date,"onUpdate:modelValue":t[6]||(t[6]=l=>s.date=l),config:s.rangeDateconfig,class:"form-control flatpickr-input",id:"demo-datepicker"},null,8,["placeholder","modelValue","config"])]),e("div",Ze,[e("label",qe,o(s.$t("country")),1),d(T,{class:"form-control",modelValue:s.value,"onUpdate:modelValue":t[7]||(t[7]=l=>s.value=l),"close-on-select":!0,searchable:!0,"create-option":!0,options:[{value:"",label:s.$t("select_country")},{value:"Argentina",label:"Argentina"},{value:"Belgium",label:"Belgium"},{value:"Brazil",label:"Brazil"},{value:"Colombia",label:"Colombia"},{value:"Denmark",label:"Denmark"},{value:"France",label:"France"},{value:"Germany",label:"Germany"},{value:"Mexico",label:"Mexico"},{value:"Russia",label:"Russia"},{value:"Spain",label:"Spain"},{value:"Syria",label:"Syria"},{value:"United Kingdom",label:"United Kingdom"}]},null,8,["modelValue","options"])]),e("div",Qe,[e("label",Xe,o(s.$t("status")),1),d(M,{class:"g-2"},{default:c(()=>[d(g,{lg:"6"},{default:c(()=>[e("div",et,[t[22]||(t[22]=e("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox1",value:"option1"},null,-1)),e("label",tt,o(s.$t("active")),1)])]),_:1}),d(g,{lg:"6"},{default:c(()=>[e("div",st,[t[23]||(t[23]=e("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox2",value:"option2"},null,-1)),e("label",ot,o(s.$t("inactive")),1)])]),_:1}),d(g,{lg:"6"},{default:c(()=>[e("div",lt,[t[24]||(t[24]=e("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox3",value:"option3"},null,-1)),e("label",at,o(s.$t("cash")),1)])]),_:1}),d(g,{lg:"6"},{default:c(()=>[e("div",nt,[t[25]||(t[25]=e("input",{class:"form-check-input",type:"checkbox",id:"inlineCheckbox4",value:"option4"},null,-1)),e("label",it,o(s.$t("card")),1)])]),_:1})]),_:1})]),t[26]||(t[26]=e("div",null,null,-1))]),e("div",rt,[d(v,{variant:"light",class:"w-100"},{default:c(()=>[w(o(s.$t("clear_filter")),1)]),_:1}),d(v,{type:"submit",variant:"success",class:"w-100"},{default:c(()=>[w(o(s.$t("apply")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue","title"]),d(H,{paginator:i.paginator,onPageChanged:i.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const yt=J(fe,[["render",dt]]);export{yt as default};
