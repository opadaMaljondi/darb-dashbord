import{_ as Q,Z as X,O as $,r as m,T as O,R as ee,a3 as oe,a as H,g as f,i as d,y as se,w as y,W as P,l as u,n as s,J as n,t as b,M as D,k as c,L,F as A,K as N,I as te,z as g,C as x,q as j,p as le}from"./vendor-54d6cb1e.js";import{L as re}from"./main-b839be26.js";import{P as ae}from"./page-header-ff719701.js";import{P as ne}from"./Pagination-b5e3d5c9.js";import"./footer-7e4f68d9.js";import"./app-cb082573.js";const ie={components:{Layout:re,PageHeader:ae,Head:X,Pagination:ne,Multiselect:$},props:{successMessage:String,alertMessage:String},setup(a){const e=m(""),p=m(null),o=O({name:"",description:""}),R=O({all:"",locked:""}),_=m([]),S=m({}),M=m(!1),h=m(!1),k=m(!1),T=m(null),B=m(a.successMessage||""),E=m(a.alertMessage||""),V=m(),F=()=>{B.value="",E.value=""},q=()=>{o.reset(),p.value=null,h.value=!0},t=()=>{k.value=!0},v=r=>{p.value=r,o.name=r.name,o.description=r.description,o.clearErrors(),h.value=!0},z=()=>{o.reset(),h.value=!1,p.value=null},Y=()=>{R.reset(),U(),k.value=!1},K=()=>{const{name:r,description:l}=o,i={},C={name:{test:()=>!r,message:"Role name is required"},description:{test:()=>!l,message:"Role description is required"}};return Object.keys(C).forEach(w=>{C[w].test()&&(i[w]=C[w].message)}),i},J=async()=>{const r=K();if(Object.keys(r).length===0)try{let l;if(p.value?l=await H.put(`/roles/update/${p.value.id}`,o.data()):l=await H.post("/roles",o.data()),l.status===200||l.status===201){B.value=l.data.successMessage;const i=l.data.roles;if(p.value){const C=_.value.findIndex(w=>w.id===p.value.id);C!==-1&&(_.value[C]=i)}else _.value.push(i);h.value=!1,o.reset()}else console.error("Unexpected response status:",l.status)}catch(l){if(console.error("Error handling form submission:",l),l.response&&l.response.status===422){const i=l.response.data.errors;o.errors=i}else console.error("An unexpected error occurred:",l)}else o.errors=r},W=r=>{o.errors[r]=""},Z=()=>{M.value=!1},I=async r=>{try{await H.delete(`/roles/delete/${r}`);const l=_.value.findIndex(i=>i.id===r);l!==-1&&_.value.splice(l,1),M.value=!1,P.fire("Success","Role deleted successfully","success")}catch(l){console.error("Error deleting role:",l),P.fire("Error","Failed to delete role","error")}},G=async r=>{P.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async l=>{if(l.isConfirmed)try{await I(r)}catch(i){console.error("Error deleting role:",i),P.fire("Error","Failed to delete the role","error")}})};ee(e,oe.debounce(function(r){U(e.value)},300));const U=async(r=1)=>{try{const l=R.data();l.search=e.value,l.page=r;const i=await H.get("/roles1/list",{params:l});_.value=i.data.roles,S.value=i.data.paginator,k.value=!1}catch(l){console.error("Error fetching roles:",l)}};return{form:o,roles:_,modalShow:M,modalForm:h,deleteItemId:T,selectedRole:p,successMessage:B,alertMessage:E,createRole:q,filterRole:t,editRole:v,cancelEdit:z,handleSubmit:J,deleteModal:G,closeModal:Z,deleteRole:I,dismissMessage:F,hideError:W,searchTerm:e,paginator:S,modalFilter:k,clearFilter:Y,fetchRoles:U,filter:R,handlePageChanged:async r=>{U(r)},has_identify_number:V}},mounted(){this.fetchRoles()}},de={action:"javascript:void(0);"},ce={class:"row"},me={class:"col-sm-6"},ue={class:"mb-3"},fe={for:"name",class:"form-label"},pe=["placeholder"],ve={class:"col-sm-6"},ye={class:"mb-3"},be={for:"has_expiry_date",class:"form-label"},_e={disabled:"",value:""},ge={value:"1"},he={value:"0"},ke={class:"col-sm-6"},Ce={class:"mb-3"},Me={for:"has_identify_number",class:"form-label"},Be={disabled:"",value:""},we={value:"1"},xe={value:"0"},Re={class:"col-sm-6"},Se={class:"mb-3"},Ee={for:"identify_number_key",class:"form-label"},Ve=["required","placeholder"],Fe={key:0,class:"custom-alert alert alert-success alert-border-left fade show",role:"alert",id:"alertMsg"},Ue={class:"alert-content"},He={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",role:"alert",id:"alertMsg"},Pe={class:"alert-content"},De={class:"form-group mt-3"},Le={key:0,class:"text-danger"},Ae={class:"form-group mt-3"},Ne={key:0,class:"text-danger"},Te={type:"submit",class:"btn btn-success m-2 float-end"},qe={class:"input-group"};function Ie(a,e,p,o,R,_){const S=f("Head"),M=f("PageHeader"),h=f("BCardHeader"),k=f("BCardBody"),T=f("BCard"),B=f("BCol"),E=f("BRow"),V=f("BModal"),F=f("BButton"),q=f("Layout");return d(),se(q,null,{default:y(()=>[u(S,{title:"Owner Needed Documents"}),u(M,{title:"Update",pageTitle:"owner Needed Documents"}),u(E,null,{default:y(()=>[u(B,{lg:"12"},{default:y(()=>[u(T,{"no-body":"",id:"tasksList"},{default:y(()=>[u(h,{class:"border-0"}),u(k,{class:"border border-dashed border-end-0 border-start-0"},{default:y(()=>[s("form",de,[s("div",ce,[s("div",me,[s("div",ue,[s("label",fe,n(a.$t("name")),1),b(s("input",{type:"text",class:"form-control",placeholder:a.$t("enter_name"),id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>o.form.name=t)},null,8,pe),[[D,o.form.name]]),(d(!0),c(A,null,L(a.errors.name,(t,v)=>(d(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),s("div",ve,[s("div",ye,[s("label",be,n(a.$t("has_expiry_date")),1),b(s("select",{id:"has_expiry_date",class:"form-select","onUpdate:modelValue":e[1]||(e[1]=t=>o.form.has_expiry_date=t)},[s("option",_e,n(a.$t("select")),1),s("option",ge,n(a.$t("yes")),1),s("option",he,n(a.$t("no")),1)],512),[[N,o.form.has_expiry_date]]),(d(!0),c(A,null,L(a.errors.country,(t,v)=>(d(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),s("div",ke,[s("div",Ce,[s("label",Me,n(a.$t("has_identify_number")),1),b(s("select",{id:"has_identify_number",class:"form-select","onUpdate:modelValue":e[2]||(e[2]=t=>o.form.has_identify_number=t)},[s("option",Be,n(a.$t("select")),1),s("option",we,n(a.$t("yes")),1),s("option",xe,n(a.$t("no")),1)],512),[[N,o.form.has_identify_number]]),(d(!0),c(A,null,L(a.errors.country,(t,v)=>(d(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])]),b(s("div",Re,[s("div",Se,[s("label",Ee,n(a.$t("identify_number_key")),1),b(s("input",{type:"text",class:"form-control",required:o.form.has_identify_number==1,placeholder:a.$t("enter_identify_number_key"),id:"identify_number_key","onUpdate:modelValue":e[3]||(e[3]=t=>o.form.identify_number_locale_key=t)},null,8,Ve),[[D,o.form.identify_number_locale_key]]),(d(!0),c(A,null,L(a.errors.name,(t,v)=>(d(),c("span",{key:v,class:"text-danger"},n(t),1))),128))])],512),[[te,o.form.has_identify_number==1]]),e[17]||(e[17]=s("div",{class:"col-lg-12"},[s("div",{class:"text-end"},[s("button",{type:"submit",class:"btn btn-primary"},"Update")])],-1))])])]),_:1})]),_:1})]),_:1})]),_:1}),s("div",null,[o.successMessage?(d(),c("div",Fe,[s("div",Ue,[e[18]||(e[18]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[19]||(e[19]=g()),e[20]||(e[20]=s("strong",null,"Success",-1)),g(" - "+n(o.successMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-success",onClick:e[4]||(e[4]=(...t)=>o.dismissMessage&&o.dismissMessage(...t)),"aria-label":"Close Success Message"})])])):x("",!0),o.alertMessage?(d(),c("div",He,[s("div",Pe,[e[21]||(e[21]=s("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),e[22]||(e[22]=g()),e[23]||(e[23]=s("strong",null,"Alert",-1)),g(" - "+n(o.alertMessage)+" ",1),s("button",{type:"button",class:"btn-close btn-close-danger",onClick:e[5]||(e[5]=(...t)=>o.dismissMessage&&o.dismissMessage(...t)),"aria-label":"Close Alert Message"})])])):x("",!0)]),u(V,{modelValue:o.modalForm,"onUpdate:modelValue":e[13]||(e[13]=t=>o.modalForm=t),"hide-footer":"",title:o.selectedRole?"Update Role":"Create Role",class:"v-modal-custom"},{default:y(()=>[s("form",{onSubmit:e[11]||(e[11]=le((...t)=>o.handleSubmit&&o.handleSubmit(...t),["prevent"])),onKeydown:e[12]||(e[12]=(...t)=>o.hideError&&o.hideError(...t))},[s("div",De,[e[24]||(e[24]=s("label",{for:"name",class:"form-label"},[g("Role Name"),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{type:"text",id:"name","onUpdate:modelValue":e[6]||(e[6]=t=>o.form.name=t),class:j(["form-control",{"is-invalid":o.form.errors.name}]),onFocus:e[7]||(e[7]=t=>o.hideError("name"))},null,34),[[D,o.form.name]]),o.form.errors.name?(d(),c("div",Le,n(o.form.errors.name),1)):x("",!0)]),s("div",Ae,[e[25]||(e[25]=s("label",{for:"description",class:"form-label"},[g("description"),s("span",{class:"text-danger"},"*")],-1)),b(s("input",{type:"text",id:"description","onUpdate:modelValue":e[8]||(e[8]=t=>o.form.description=t),class:j(["form-control",{"is-invalid":o.form.errors.description}]),onFocus:e[9]||(e[9]=t=>o.hideError("description"))},null,34),[[D,o.form.description]]),o.form.errors.description?(d(),c("div",Ne,n(o.form.errors.description),1)):x("",!0)]),s("button",Te,n(o.selectedRole?"Update":"Save"),1),o.selectedRole?(d(),c("button",{key:0,type:"button",onClick:e[10]||(e[10]=(...t)=>o.cancelEdit&&o.cancelEdit(...t)),class:"btn btn-secondary m-2 float-end"},"Cancel")):x("",!0)],32)]),_:1},8,["modelValue","title"]),u(V,{modelValue:o.modalFilter,"onUpdate:modelValue":e[16]||(e[16]=t=>o.modalFilter=t),"hide-footer":"","dialog-class":"modal-dialog-right",title:"Filter",class:"v-modal-custom",size:"sm"},{default:y(()=>[s("form",null,[s("div",qe,[b(s("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[14]||(e[14]=t=>o.filter.all=t)},[...e[26]||(e[26]=[s("option",{selected:""},"Select Status",-1),s("option",{value:"1"},"Yes",-1),s("option",{value:"0"},"No",-1)])],512),[[N,o.filter.all]]),b(s("select",{class:"form-select mb-3","aria-label":"Default select example","onUpdate:modelValue":e[15]||(e[15]=t=>o.filter.locked=t)},[...e[27]||(e[27]=[s("option",{selected:""},"Select Status",-1),s("option",{value:"0"},"Inactive",-1),s("option",{value:"1"},"Active",-1)])],512),[[N,o.filter.locked]])]),u(F,{variant:"primary",class:"float-end",onClick:o.fetchRoles},{default:y(()=>[...e[28]||(e[28]=[g(" Apply",-1)])]),_:1},8,["onClick"]),u(F,{variant:"outline-primary",class:"float-end mx-2",onClick:o.clearFilter},{default:y(()=>[...e[29]||(e[29]=[g("Clear",-1)])]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])]),_:1})}const Ze=Q(ie,[["render",Ie]]);export{Ze as default};
