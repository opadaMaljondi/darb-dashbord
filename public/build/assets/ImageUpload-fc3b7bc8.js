import{_ as m,i as n,k as d,n as a,a2 as g,J as c,C as u}from"./vendor-8caf5d52.js";const f={props:{initialImageUrl:{type:String,default:""},flexStyle:{type:String,default:"0 0 calc(57% - 10px)"},aspectRatio:{type:String,default:"1 / 1"},imageType:{type:String,default:"website"}},data(){return{imageFile:null,isModalOpen:!1,showToast:!1}},methods:{triggerFileInput(){this.$refs.fileInput.click()},handleFileChange(l){const e=l.target.files[0];if(e)if(this.validateImage(e)&&this.validateImageSize(e)){const s=new FileReader;s.onload=o=>{this.imageFile={dataURL:o.target.result,name:e.name},this.$emit("image-selected",e)},s.readAsDataURL(e)}else this.showToastMessage()},validateImage(l){return/^image\//.test(l.type)},validateImageSize(l){return!0},removeImage(){this.imageFile=null,this.$refs.fileInput.value=null,this.$emit("image-removed")},removeInitialImage(){this.$refs.fileInput.value=null,this.$emit("image-removed")},openModal(){this.isModalOpen=!0},closeModal(){this.isModalOpen=!1},showToastMessage(){this.showToast=!0,setTimeout(()=>{this.showToast=!1},3e3)},getFullImageUrl(l){if(l instanceof File)return URL.createObjectURL(l);if(typeof l=="string"&&(l.startsWith("blob:")||l.startsWith("data:")))return l;switch(this.imageType){case"system-admin":return`/storage/uploads/system-admin/logo/${l}`;case"types":return`${l}`;case"user-profile":return`${l}`;case"banner":return`${l}`;case"fleet":return`${l}`;case"driver":return`${l}`;case"driver-documents":return`${l}`;case"owner-documents":return`${l}`;case"icon":return`${l}`;case"drivers-levelup":return`${l}`;case"push-notification":return`/storage/uploads/push-notification/images/${l}`;default:return`/storage/uploads/website/images/${l}`}}},watch:{initialImageUrl(l){l||(this.imageFile=null)}}},p={id:"image-container"},I={class:"d-flex flex-column align-items-center"},y=["src"],v=["src"],h={key:0,id:"fullscreen-modal"},F=["src"],C={key:1,id:"toast"};function b(l,e,s,o,r,t){return n(),d("div",null,[a("div",p,[!r.imageFile&&!s.initialImageUrl?(n(),d("div",{key:0,style:g({flex:s.flexStyle,aspectRatio:s.aspectRatio}),id:"image-slot",onClick:e[1]||(e[1]=(...i)=>t.triggerFileInput&&t.triggerFileInput(...i))},[a("div",I,[a("span",null,c(l.$t("upload_image")),1),e[11]||(e[11]=a("span",null,[a("i",{class:"ri-image-add-fill fs-24"})],-1))]),a("input",{type:"file",id:"image-upload",ref:"fileInput",onChange:e[0]||(e[0]=(...i)=>t.handleFileChange&&t.handleFileChange(...i)),style:{display:"none"}},null,544)],4)):s.initialImageUrl&&!r.imageFile?(n(),d("div",{key:1,style:g({flex:s.flexStyle,aspectRatio:s.aspectRatio}),class:"image-wrapper"},[a("img",{src:t.getFullImageUrl(s.initialImageUrl),onClick:e[2]||(e[2]=(...i)=>t.openModal&&t.openModal(...i))},null,8,y),a("div",{class:"image-options bg-light border border-danger text-danger rounded fs-5",onClick:e[3]||(e[3]=(...i)=>t.removeInitialImage&&t.removeInitialImage(...i))},"X"),a("div",{class:"image-upload-icon bg-light border border-success text-success rounded fs-5",onClick:e[4]||(e[4]=(...i)=>t.triggerFileInput&&t.triggerFileInput(...i))},e[12]||(e[12]=[a("i",{class:"ri-upload-fill"},null,-1)])),a("input",{type:"file",ref:"fileInput",onChange:e[5]||(e[5]=(...i)=>t.handleFileChange&&t.handleFileChange(...i)),style:{display:"none"}},null,544)],4)):(n(),d("div",{key:2,style:g({flex:s.flexStyle,aspectRatio:s.aspectRatio}),class:"image-wrapper"},[a("img",{src:r.imageFile.dataURL,onClick:e[6]||(e[6]=(...i)=>t.openModal&&t.openModal(...i))},null,8,v),a("div",{class:"image-options bg-light border border-danger text-danger rounded fs-5",onClick:e[7]||(e[7]=(...i)=>t.removeImage&&t.removeImage(...i))},"X"),a("div",{class:"image-upload-icon bg-light border border-success text-success rounded fs-5",onClick:e[8]||(e[8]=(...i)=>t.triggerFileInput&&t.triggerFileInput(...i))},e[13]||(e[13]=[a("i",{class:"ri-upload-fill"},null,-1)])),a("input",{type:"file",ref:"fileInput",onChange:e[9]||(e[9]=(...i)=>t.handleFileChange&&t.handleFileChange(...i)),style:{display:"none"}},null,544)],4))]),r.isModalOpen?(n(),d("div",h,[a("img",{src:r.imageFile?r.imageFile.dataURL:t.getFullImageUrl(s.initialImageUrl),alt:"",id:"fullscreen-image"},null,8,F),a("button",{id:"close-modal",onClick:e[10]||(e[10]=(...i)=>t.closeModal&&t.closeModal(...i))},"X")])):u("",!0),r.showToast?(n(),d("div",C," Delete ")):u("",!0)])}const x=m(f,[["render",b],["__scopeId","data-v-8501651a"]]);export{x as I};
