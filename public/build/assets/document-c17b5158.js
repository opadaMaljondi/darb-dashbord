import{_ as E,Z as P,B as H,D as z,r as c,T,S as x,g as v,U as j,i as n,y as I,w as b,a as U,N as p,l as h,n as e,J as l,k as i,C as d,L as $,q as R,t as F,F as L,z as C,M as q,p as G}from"./vendor-54d6cb1e.js";import{L as J}from"./main-b839be26.js";import{P as O}from"./page-header-ff719701.js";import{P as Z}from"./Pagination-b5e3d5c9.js";import{l as K}from"./footer-7e4f68d9.js";import"./app-cb082573.js";const Q={data(){return{rightOffcanvas:!1}},components:{Layout:J,PageHeader:O,Head:P,Pagination:Z,Link:H},props:{successMessage:String,alertMessage:String,driverId:Number,documents:Array},setup(a){const{t}=z(),u=c(a.successMessage||""),o=c(a.alertMessage||""),y=c(!1),k=c(null),g=c(null),w=c(!1),_=c(null),D=c({}),N=()=>{u.value="",o.value=""},B=async r=>{(await U.post(`/fleet-drivers/document-toggle/${r}/${a.driverId}/1`)).data.allDocumentsApproved==!0?(u.value=t("document_approved"),p.get("/fleet-drivers")):p.get(`/fleet-drivers/document/${a.driverId}`)},S=async r=>{w.value=!0,_.value=r},f=T({reason:""}),s=async()=>{try{(await U.post(`/fleet-drivers/document-toggle/${_.value}/${a.driverId}/5`,{reason:f.reason})).data.allDocumentsDisapproved==!0?(u.value=t("document_declined"),p.get("/fleet-drivers/pending")):p.get(`/fleet-drivers/document/${a.driverId}`)}catch(r){console.error("Error declining document:",r),o.value=t("decline_failed")}},M=async()=>{await U.get(`/fleet-drivers/update/${a.driverId}`),p.get("/fleet-drivers")},m=c(null),V=c(null);return{successMessage:u,alertMessage:o,dismissMessage:N,approveDocument:B,declineDocument:S,updateDocuments:M,viewDocument:r=>{k.value=r.image,g.value=r.back_image,y.value=!0,m.value=r.document_name_front??t("document"),V.value=r.document_name_back??t("document")},closeModal:()=>{y.value=!1,k.value=null,g.value=null},showModal:y,imageUrl:k,backImageUrl:g,documentNameFront:m,documentNameBack:V,disapproveModelShow:w,document_id:_,form:f,errors:D,handleSubmit:s}},computed:{...K,...x(["permissions"])}},W={class:"row"},X={class:"col-lg-12"},Y={class:"card",id:"tasksList"},ee={class:"card-body border border-dashed border-end-0 border-start-0"},se={class:"table-responsive"},te={class:"table align-middle position-relative table-nowrap"},oe={class:"table-active"},ae={scope:"col"},le={scope:"col"},ne={scope:"col"},ie={scope:"col"},de={scope:"col"},re={scope:"col"},ce={key:0,scope:"col"},ue={key:0},me=["onClick"],ve=["onClick"],_e=["onClick"],be=["onClick"],ge={key:0,class:"modal fade show",tabindex:"-1",role:"dialog",style:{display:"block"}},fe={class:"modal-dialog",role:"document"},pe={class:"modal-content"},he={class:"modal-header d-flex align-items-center justify-content-between"},ye={class:"modal-title"},ke={class:"modal-body"},we={id:"carouselExampleFade",class:"carousel slide carousel-fade py-5","data-ride":"carousel"},Me={class:"carousel-inner"},Ce={class:"carousel-item active"},De={key:0,class:"car-img"},Ne=["src","alt"],Be={class:"text-center"},Se={key:1,class:"d-grid"},Ie={class:"text-center m-auto"},Ue={class:"carousel-item"},Fe={key:0,class:"car-img"},Le=["src","alt"],Ve={class:"text-center"},$e={key:1,class:"d-grid"},Ae={class:"text-center m-auto"},Ee={class:"modal-footer"},Pe=["href"],He=["href"],ze={key:1,class:"custom-alert alert alert-success alert-border-left fade show"},Te={class:"alert-content"},xe={key:2,class:"custom-alert alert alert-danger alert-border-left fade show"},je={class:"alert-content"},Re={class:"row"},qe={class:"col-sm-12"},Ge={class:"mb-3"},Je={for:"declined_reason",class:"form-label"},Oe=["placeholder"],Ze={class:"modal-footer v-modal-footer"};function Ke(a,t,u,o,y,k){const g=v("Head"),w=v("PageHeader"),_=v("BButton"),D=v("BLink"),N=v("FormValidation"),B=v("BModal"),S=v("Layout"),f=j("b-tooltip");return n(),I(S,null,{default:b(()=>[h(g,{title:"Documents"}),h(w,{title:a.$t("documents"),pageTitle:a.$t("documents"),pageLink:"/fleet-drivers"},null,8,["title","pageTitle"]),e("div",W,[e("div",X,[e("div",Y,[t[10]||(t[10]=e("div",{class:"card-header border-0"},null,-1)),e("div",ee,[e("div",se,[e("table",te,[e("thead",oe,[e("tr",null,[e("th",ae,l(a.$t("document_name")),1),e("th",le,l(a.$t("identify_number")),1),e("th",ne,l(a.$t("expiry_date")),1),e("th",ie,l(a.$t("status")),1),e("th",de,l(a.$t("comment")),1),e("th",re,l(a.$t("document")),1),a.permissions.includes("drivers-management")?(n(),i("th",ce,l(a.$t("action")),1)):d("",!0)])]),e("tbody",null,[(n(!0),i(L,null,$(u.documents,(s,M)=>(n(),i("tr",{key:s.id},[e("td",null,l(s.name),1),e("td",null,l(s.identify_number||"N/A"),1),e("td",null,l(s.expiry_date||"N/A"),1),e("td",null,[e("span",{class:R({badge:!0,"bg-success":s.document_status===1,"bg-secondary":s.document_status===2||s.document_status==null,"bg-warning":s.document_status===3||s.document_status===4,"bg-danger":s.document_status===5||s.document_status===0,"bg-dark":s.document_status===6})},l(s.document_status===1?a.$t("approved"):s.document_status===2||s.document_status==null?a.$t("not_uploaded"):s.document_status===3||s.document_status===4?a.$t("waiting_for_approval"):s.document_status===0||s.document_status===5?a.$t("declined"):s.document_status===6?a.$t("expired"):""),3)]),e("td",null,l(s.comment||"N/A"),1),e("td",null,[F((n(),I(_,{class:"btn btn-soft-info btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"view",onClick:m=>o.viewDocument(s)},{default:b(()=>[...t[8]||(t[8]=[e("i",{class:"bx bx-show-alt align-center"},null,-1)])]),_:1},8,["onClick"])),[[f,void 0,void 0,{hover:!0}]]),F((n(),I(_,{class:"btn btn-soft-success btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"upload",href:`/fleet-drivers/document-upload/${s.id}/${u.driverId}`},{default:b(()=>[...t[9]||(t[9]=[e("i",{class:"bx bx-upload align-center"},null,-1)])]),_:1},8,["href"])),[[f,void 0,void 0,{hover:!0}]])]),a.permissions.includes("drivers-management")?(n(),i("td",ue,[s.document_status===1?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:m=>o.declineDocument(s.id)},l(a.$t("decline")),9,me)):d("",!0),s.document_status===5?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:m=>o.approveDocument(s.id)},l(a.$t("approve")),9,ve)):d("",!0),s.document_status===2||s.document_status==null?d("",!0):(n(),i(L,{key:2},[s.document_status===3||s.document_status===4||s.document_status===6?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:m=>o.approveDocument(s.id)},l(a.$t("approve")),9,_e)):d("",!0),s.document_status===3||s.document_status===4||s.document_status===6?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:m=>o.declineDocument(s.id)},l(a.$t("decline")),9,be)):d("",!0)],64))])):d("",!0)]))),128))])])])])])])]),o.showModal?(n(),i("div",ge,[e("div",fe,[e("div",pe,[e("div",he,[e("h5",ye,l(a.$t("view_document")),1),e("a",{href:"#",class:"close fs-18",onClick:t[0]||(t[0]=(...s)=>o.closeModal&&o.closeModal(...s)),"aria-label":"Close"},[...t[11]||(t[11]=[e("span",{class:"fs-22","aria-hidden":"true"},"Ã—",-1)])])]),e("div",ke,[e("div",we,[t[14]||(t[14]=e("div",{class:"carousel-indicators"},[e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"0",class:"active","aria-current":"true","aria-label":"Slide 1"}),e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"1","aria-label":"Slide 2"})],-1)),e("div",Me,[e("div",Ce,[o.imageUrl?(n(),i("div",De,[e("img",{src:o.imageUrl,alt:o.documentNameFront,class:"img-fluid mb-2"},null,8,Ne),e("h5",Be,l(o.documentNameFront),1)])):(n(),i("div",Se,[t[12]||(t[12]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",Ie,l(a.$t("no_front_image_available")),1)]))]),e("div",Ue,[o.backImageUrl?(n(),i("div",Fe,[e("img",{src:o.backImageUrl,alt:o.documentNameBack,class:"img-fluid mb-2"},null,8,Le),e("h5",Ve,l(o.documentNameBack),1)])):(n(),i("div",$e,[t[13]||(t[13]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",Ae,l(a.$t("no_back_image_available")),1)]))])]),t[15]||(t[15]=e("a",{class:"carousel-control-prev bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"prev"},[e("span",{class:"carousel-control-prev-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Previous")],-1)),t[16]||(t[16]=e("a",{class:"carousel-control-next bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"next"},[e("span",{class:"carousel-control-next-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Next")],-1))])]),e("div",Ee,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...s)=>o.closeModal&&o.closeModal(...s))},l(a.$t("close")),1),o.imageUrl?(n(),i("a",{key:0,href:o.imageUrl,download:"",class:"btn btn-primary"},l(a.$t("download_front_image")),9,Pe)):d("",!0),o.backImageUrl?(n(),i("a",{key:1,href:o.backImageUrl,download:"",class:"btn btn-primary"},l(a.$t("download_back_image")),9,He)):d("",!0)])])])])):d("",!0),o.successMessage?(n(),i("div",ze,[e("div",Te,[t[17]||(t[17]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[18]||(t[18]=e("strong",null,"Success",-1)),C(" - "+l(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):d("",!0),o.alertMessage?(n(),i("div",xe,[e("div",je,[t[19]||(t[19]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[20]||(t[20]=e("strong",null,"Alert",-1)),C(" - "+l(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):d("",!0),h(B,{modelValue:o.disapproveModelShow,"onUpdate:modelValue":t[7]||(t[7]=s=>o.disapproveModelShow=s),"hide-footer":"",title:a.$t("declined_reason"),class:"v-modal-custom",size:"md"},{default:b(()=>[e("form",null,[h(N,{form:o.form,rules:a.validationRules,ref:"validationRef"},{default:b(()=>[e("div",Re,[e("div",qe,[e("div",Ge,[e("label",Je,[C(l(a.$t("declined_reason")),1),t[21]||(t[21]=e("span",{class:"text-danger"},"*",-1))]),F(e("input",{type:"text",class:"form-control",placeholder:a.$t("enter_declined_reason"),id:"declined_reason","onUpdate:modelValue":t[4]||(t[4]=s=>o.form.reason=s)},null,8,Oe),[[q,o.form.reason]]),(n(!0),i(L,null,$(o.errors.reason,(s,M)=>(n(),i("span",{key:M,class:"text-danger"},l(s),1))),128))])])]),e("div",Ze,[h(D,{href:"javascript:void(0);",class:"btn btn-link link-warning fw-medium",onClick:t[5]||(t[5]=s=>o.disapproveModelShow=!1)},{default:b(()=>[t[22]||(t[22]=e("i",{class:"ri-close-line me-1 align-middle"},null,-1)),C(" "+l(a.$t("close")),1)]),_:1}),e("button",{type:"button",class:"btn btn-soft-info waves-effect waves-light",onClick:t[6]||(t[6]=G((...s)=>o.handleSubmit&&o.handleSubmit(...s),["prevent"]))},l(a.$t("submit")),1)])]),_:1},8,["form","rules"])])]),_:1},8,["modelValue","title"])]),_:1})}const ls=E(Q,[["render",Ke],["__scopeId","data-v-7f5be912"]]);export{ls as default};
