import{_ as Q,Z as ee,O as te,P as se,B as oe,D as le,r as b,T as ie,S as ae,g as f,U as ne,i as a,y as F,w as c,W as M,a as q,N as Y,l as d,n as e,t as D,k as n,q as P,J as i,K as re,L as N,F as U,z as u,C as g,p as w,X as G}from"./vendor-8caf5d52.js";import{L as de}from"./main-cc7bd0ce.js";import{P as ce}from"./page-header-18309276.js";import{P as ue}from"./Pagination-0518e4bd.js";import{s as me}from"./searchbar-e42e22fa.js";import{l as fe}from"./footer-502c2797.js";import{W as ge}from"./warning-4b308dfa.js";import{_ as J}from"./search-file-ab3e1046.js";import"./app-974c65a1.js";const _e={data(){return{rightOffcanvas:!1,isListView:!0,copiedIndex:null}},created(){const s=localStorage.getItem("userViewMode");s&&(this.isListView=s==="list")},methods:{toggleView(s){this.isListView=s==="list",localStorage.setItem("userViewMode",s)},getStarIcons(s){let t=[],v=Math.floor(s),l=s%1>=.5,_=5-v-(l?1:0);for(let h=0;h<v;h++)t.push("ri-star-s-fill text-warning fs-16");l&&t.push("ri-star-half-s-fill text-warning fs-16");for(let h=0;h<_;h++)t.push("ri-star-line text-muted");return t},copyText(s,t){navigator.clipboard.writeText(s).then(()=>{this.copiedIndex=t,setTimeout(()=>{this.copiedIndex=null},2e3)})}},components:{Layout:de,PageHeader:ce,Head:ee,Pagination:ue,Multiselect:te,flatPickr:se,Link:oe,searchbar:me,Warning:ge},props:{successMessage:String,alertMessage:String,app_for:String,vehicleTypes:{type:Object,required:!0},results:{type:Array,required:!0}},setup(s){const{t}=le(),v=b(""),l=ie({transport_type:null,dispatch_type:null,status:null,limit:10}),_=b([]),h=b({}),S=b(!1),V=b(!1),E=b(null),C=b({}),I=b(s.successMessage||""),k=b(s.alertMessage||""),R=()=>{I.value="",k.value=""},O=async(r,p)=>{M.fire({title:t("are_you_sure"),text:t("you_are_about_to_change_status"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:t("yes"),cancelButtonText:t("cancel")}).then(async x=>{if(x.isConfirmed)try{await q.post("/users/update-status",{id:r,status:p});const A=_.value.findIndex(Z=>Z.id===r);A!==-1&&(_.value[A].active=p),M.fire(t("changed"),t("status_updated_successfully"),"success")}catch(A){console.error(t("error_updating_status"),A),M.fire(t("error"),t("failed_to_update_status"),"error")}})},L=b(!1),W=()=>{y(),V.value=!0,L.value=!1},T=()=>{l.reset(),y(),L.value=!1},$=()=>{S.value=!1},H=async r=>{try{await q.delete(`/users/delete/${r}`);const p=_.value.findIndex(x=>x.id===r);p!==-1&&_.value.splice(p,1),S.value=!1,M.fire(t("success"),t("users_deleted_successfully"),"success")}catch{M.fire("error",t("failed_to_delete_users"),"error")}},j=async r=>{M.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then(async p=>{if(p.isConfirmed)try{await H(r)}catch(x){console.error(t("error_deleting_data"),x),M.fire(t("error"),t("failed_to_delete_the_data"),"error")}})},z=async r=>{v.value=r,y()},y=async(r=1)=>{try{const p=l.data();p.search=v.value,p.page=r;const x=await q.get("/users/list",{params:p});_.value=x.data.results,h.value=x.data.paginator,X(h.value.total),V.value=!1}catch(p){console.error(t("error_fetching_users"),p)}},o=async r=>{localStorage.setItem("users/list",r),y(r)},B=async r=>{Y.get(`/users/edit/${r.id}`)},m=async r=>{Y.get(`/users/password/edit/${r.id}`)},K=async r=>{Y.get(`/users/view-profile/${r.id}`)},X=()=>{C.value=[10,25,50,100,200,500]};return{results:_,modalShow:S,deleteItemId:E,successMessage:I,alertMessage:k,filterData:W,deleteModal:j,closeModal:$,deleteData:H,dismissMessage:R,searchTerm:v,fetchSearch:z,paginator:h,modalFilter:V,clearFilter:T,fetchDatas:y,filter:l,handlePageChanged:o,toggleActiveStatus:O,editData:B,viewProfile:K,rightOffcanvas:L,editPassData:m,paginatorOption:C,changeEntriesPerPage:()=>{y()}}},computed:{...fe,...ae(["permissions"])},mounted(){this.fetchDatas();const s=localStorage.getItem("users/list");s?this.handlePageChanged(Number(s)):this.handlePageChanged(1)}},pe={class:"d-flex align-items-center"},he={class:"toggle-buttons mt-3 me-4"},ve=["title"],be=["title"],we={class:"d-flex align-items-center mt-3"},ye={class:"me-2 text-muted"},ke=["value"],xe={class:"ms-2 text-muted"},Ce={class:"d-flex align-items-center gap-2"},Be={class:"table-responsive"},Me={class:"table align-middle position-relative table-nowrap"},Pe={class:"table-active"},Se={scope:"col"},Ve={scope:"col"},Le={scope:"col"},De={scope:"col"},Ie={scope:"col"},Oe={scope:"col"},Te={key:0},He={key:0},Ae=["onClick","id","checked"],Fe={class:"dropdown"},Ne={class:"dropdown-menu dropdown-menu-end"},Ue=["onClick"],Ee=["onClick"],Re=["onClick"],We=["onClick"],$e={key:1},je={colspan:"12",class:"text-center"},ze={key:0,class:"row"},qe={class:"card card-height-100"},Ye={class:"card-body"},Ge={class:"d-flex flex-column h-100"},Je={class:"d-flex"},Ke={class:"flex-grow-1"},Xe={class:"text-muted mb-4"},Ze=["onClick"],Qe={class:"text-muted mb-4"},et={class:"flex-shrink-0"},tt={class:"d-flex gap-1 align-items-center"},st={class:"dropdown"},ot={class:"dropdown-menu dropdown-menu-end"},lt=["onClick"],it=["onClick"],at=["onClick"],nt=["onClick"],rt={class:"d-flex mb-2 card-footer bg-transparent border-top-dashed"},dt={class:"flex-shrink-0 me-3"},ct={class:"avatar-sm"},ut={class:"avatar-title bg-warning-subtle rounded p-2"},mt=["src"],ft={class:"flex-grow-1"},gt={class:"mb-1 fs-15"},_t={class:"text-body"},pt={class:"mb-0"},ht={class:"table-responsive table-card mt-2 ms-2"},vt={class:"table table-borderless mb-0"},bt={class:"card-footer bg-transparent border-top-dashed py-2"},wt={class:"d-flex align-items-center"},yt={class:"flex-grow-1"},kt={scope:"col"},xt={class:"flex-end"},Ct={key:0},Bt=["onClick","id","checked"],Mt={class:"table-responsive table-card mt-2 ms-2"},Pt={class:"table table-borderless mb-0"},St={colspan:"12",class:"text-center m-auto"},Vt={key:0,class:"custom-alert alert alert-success alert-border-left fade show",data:"alert",id:"alertMsg"},Lt={class:"alert-content"},Dt={key:1,class:"custom-alert alert alert-danger alert-border-left fade show",data:"alert",id:"alertMsg"},It={class:"alert-content"},Ot={class:"offcanvas-body"},Tt={class:"mb-4"},Ht={for:"datepicker-range",class:"form-label text-muted text-uppercase fw-semibold mb-3"},At={class:"form-check form-check-inline"},Ft={class:"form-check-label",for:"active"},Nt={class:"form-check form-check-inline"},Ut={class:"form-check-label",for:"inactive"},Et={class:"offcanvas-footer border-top p-3 text-center hstack gap-2"};function Rt(s,t,v,l,_,h){const S=f("Warning"),V=f("Head"),E=f("PageHeader"),C=f("BCol"),I=f("searchbar"),k=f("BButton"),R=f("Link"),O=f("BRow"),L=f("BCardHeader"),W=f("BCardBody"),T=f("BCard"),$=f("BFrom"),H=f("BOffcanvas"),j=f("Pagination"),z=f("Layout"),y=ne("b-tooltip");return a(),F(z,null,{default:c(()=>[d(S),d(V,{title:"Users"}),d(E,{title:s.$t("users"),pageTitle:s.$t("users")},null,8,["title","pageTitle"]),d(O,null,{default:c(()=>[d(C,{lg:"12"},{default:c(()=>[d(T,{"no-body":"",id:"tasksList"},{default:c(()=>[d(L,{class:"border-0"},{default:c(()=>[d(O,{class:"g-2"},{default:c(()=>[d(C,{md:"4"},{default:c(()=>[e("div",pe,[e("div",he,[D((a(),n("a",{"data-bs-toggle":"tooltip",title:s.$t("list_view"),class:P(["list-btn",{active:_.isListView}]),onClick:t[0]||(t[0]=o=>h.toggleView("list"))},t[10]||(t[10]=[e("i",{class:"ri-list-check"},null,-1)]),10,ve)),[[y,void 0,void 0,{hover:!0}]]),D((a(),n("a",{"data-bs-toggle":"tooltip",title:s.$t("grid_view"),class:P(["list-btn",{active:!_.isListView}]),onClick:t[1]||(t[1]=o=>h.toggleView("grid"))},t[11]||(t[11]=[e("i",{class:"ri-grid-fill"},null,-1)]),10,be)),[[y,void 0,void 0,{hover:!0}]])]),e("div",we,[e("label",ye,i(s.$t("show")),1),D(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>l.filter.limit=o),onChange:t[3]||(t[3]=(...o)=>l.changeEntriesPerPage&&l.changeEntriesPerPage(...o)),class:"form-select form-select-sm w-auto"},[(a(!0),n(U,null,N(l.paginatorOption,o=>(a(),n("option",{key:o,value:o},i(o),9,ke))),128))],544),[[re,l.filter.limit]]),e("label",xe,i(s.$t("entries")),1)])])]),_:1}),d(C,{md:"2"}),d(C,{md:"auto",class:"ms-auto"},{default:c(()=>[e("div",Ce,[d(I,{onSearch:l.fetchSearch},null,8,["onSearch"]),d(k,{variant:"danger",onClick:t[4]||(t[4]=o=>l.rightOffcanvas=!0)},{default:c(()=>[t[12]||(t[12]=e("i",{class:"ri-filter-2-line me-1 align-bottom"},null,-1)),u(" "+i(s.$t("filters")),1)]),_:1,__:[12]}),s.permissions.includes("add-user")?(a(),F(R,{key:0,href:"/users/create"},{default:c(()=>[d(k,{variant:"primary",class:"float-end"},{default:c(()=>[t[13]||(t[13]=e("i",{class:"ri-add-line align-bottom me-1"},null,-1)),u(i(s.$t("add_user")),1)]),_:1,__:[13]})]),_:1})):g("",!0)])]),_:1})]),_:1})]),_:1}),_.isListView?(a(),F(W,{key:0,class:"border border-dashed border-end-0 border-start-0"},{default:c(()=>[e("div",Be,[e("table",Me,[e("thead",Pe,[e("tr",null,[e("th",Se,i(s.$t("name")),1),e("th",Ve,i(s.$t("gender")),1),e("th",Le,i(s.$t("mobile")),1),e("th",De,i(s.$t("email")),1),e("th",Ie,i(s.$t("status")),1),e("th",Oe,i(s.$t("action")),1)])]),l.results.length>0?(a(),n("tbody",Te,[(a(!0),n(U,null,N(l.results,(o,B)=>(a(),n("tr",{key:B},[e("td",null,i(o.name),1),e("td",null,i(o.gender),1),e("td",null,i(o.mobile_number),1),e("td",null,i(o.email),1),s.permissions.includes("toggle-user")?(a(),n("td",He,[e("div",{class:P({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":o.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:w(m=>l.toggleActiveStatus(o.id,!o.active),["prevent"]),id:"status_"+o.id,checked:o.active},null,8,Ae)],2)])):g("",!0),e("td",null,[d(k,{class:"btn btn-soft-info btn-sm m-2",size:"sm",type:"button"},{default:c(()=>[e("div",Fe,[t[18]||(t[18]=e("a",{class:"text-reset",href:"#","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("span",{class:"text-muted fs-18"},[e("i",{class:"mdi mdi-dots-vertical"})])],-1)),e("div",Ne,[s.permissions.includes("view-user-profile")?(a(),n("a",{key:0,class:"dropdown-item",href:"#",onClick:w(m=>l.viewProfile(o),["prevent"])},[t[14]||(t[14]=e("i",{class:"bx bx-radio-circle-marked align-center text-muted me-2"},null,-1)),u(i(s.$t("view_profile")),1)],8,Ue)):g("",!0),s.permissions.includes("edit-user")?(a(),n("a",{key:1,class:"dropdown-item",href:"#",onClick:w(m=>l.editData(o),["prevent"])},[t[15]||(t[15]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),u(i(s.$t("edit")),1)],8,Ee)):g("",!0),s.permissions.includes("edit-user")&&v.app_for!=="demo"?(a(),n("a",{key:2,class:"dropdown-item",href:"#",onClick:w(m=>l.editPassData(o),["prevent"])},[t[16]||(t[16]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),u(i(s.$t("update_password")),1)],8,Re)):g("",!0),s.permissions.includes("delete-user")&&v.app_for!=="demo"?(a(),n("a",{key:3,class:"dropdown-item",href:"#",onClick:w(m=>l.deleteModal(o.id),["prevent"])},[t[17]||(t[17]=e("i",{class:"bx bxs-trash-alt align-center text-muted me-2"},null,-1)),u(i(s.$t("delete")),1)],8,We)):g("",!0)])])]),_:2},1024)])]))),128))])):(a(),n("tbody",$e,[e("tr",null,[e("td",je,[t[19]||(t[19]=e("img",{src:J,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,i(s.$t("no_data_found")),1)])])]))])])]),_:1})):g("",!0)]),_:1})]),_:1})]),_:1}),_.isListView?g("",!0):(a(),n("div",ze,[l.results.length>0?(a(!0),n(U,{key:0},N(l.results,(o,B)=>(a(),n("div",{class:"col-xxl-3 col-sm-6 project-card",key:B},[e("div",qe,[e("div",Ye,[e("div",Ge,[e("div",Je,[e("div",Ke,[e("h6",null,[u(i(s.$t("referral_code"))+" : ",1),e("span",Xe,i(o.refferal_code??"----"),1),e("button",{onClick:m=>h.copyText(o.refferal_code,B),class:"btn btn-light btn-sm ms-2"},[e("i",{class:P(_.copiedIndex===B?"bx bxs-check-circle text-success":"bx bx-copy")},null,2)],8,Ze)]),e("h6",null,[u(i(s.$t("referred_by"))+" : ",1),e("span",Qe,i(o.referred_by_name??"----"),1)])]),e("div",et,[e("div",tt,[e("div",st,[t[24]||(t[24]=e("button",{class:"btn btn-link text-muted p-1 mt-n2 py-0 text-decoration-none fs-15","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-more-horizontal icon-sm"},[e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"19",cy:"12",r:"1"}),e("circle",{cx:"5",cy:"12",r:"1"})])],-1)),e("div",ot,[s.permissions.includes("view-user-profile")?(a(),n("a",{key:0,class:"dropdown-item",href:"#",onClick:w(m=>l.viewProfile(o),["prevent"])},[t[20]||(t[20]=e("i",{class:"bx bx-radio-circle-marked align-center text-muted me-2"},null,-1)),u(i(s.$t("view_profile")),1)],8,lt)):g("",!0),s.permissions.includes("edit-user")?(a(),n("a",{key:1,class:"dropdown-item",href:"#",onClick:w(m=>l.editData(o),["prevent"])},[t[21]||(t[21]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),u(i(s.$t("edit")),1)],8,it)):g("",!0),s.permissions.includes("edit-user")?(a(),n("a",{key:2,class:"dropdown-item",href:"#",onClick:w(m=>l.editPassData(o),["prevent"])},[t[22]||(t[22]=e("i",{class:"bx bxs-edit-alt align-center text-muted me-2"},null,-1)),u(i(s.$t("update_password")),1)],8,at)):g("",!0),s.permissions.includes("delete-user")&&v.app_for!=="demo"?(a(),n("a",{key:3,class:"dropdown-item",href:"#",onClick:w(m=>l.deleteModal(o.id),["prevent"])},[t[23]||(t[23]=e("i",{class:"bx bxs-trash-alt align-center text-muted me-2"},null,-1)),u(i(s.$t("delete")),1)],8,nt)):g("",!0)])])])])]),e("div",rt,[e("div",dt,[e("div",ct,[e("span",ut,[e("img",{class:"avatar-xs rounded-circle p-1",alt:"profile picture",src:o.profile_picture},null,8,mt)])])]),e("div",ft,[e("h5",gt,[e("a",_t,i(o.name??"----"),1)]),e("p",pt,[(a(),n(U,null,N(5,m=>e("i",{key:m,class:P([{"bx bxs-star text-warning":m<=Math.floor(o.rating),"bx bxs-star-half text-warning":m===Math.ceil(o.rating)&&o.rating%1!==0,"bx bx-star text-muted":m>o.rating},"align-center me-2"])},null,2)),64))])])]),e("div",ht,[e("table",vt,[e("tbody",null,[e("tr",null,[t[25]||(t[25]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-transgender fs-24"})],-1)),e("td",null,i(o.gender??"----"),1)]),e("tr",null,[t[26]||(t[26]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-phone fs-24"})],-1)),e("td",null,i(o.mobile_number??"----"),1)]),e("tr",null,[t[27]||(t[27]=e("td",{class:"fw-medium",scope:"row"},[e("i",{class:"las la-envelope-open-text fs-24"})],-1)),e("td",null,i(o.email??"----"),1)])])])])])]),e("div",bt,[e("div",wt,[e("div",yt,[e("th",kt,i(s.$t("status")),1)]),e("div",xt,[s.permissions.includes("toggle-user")?(a(),n("td",Ct,[e("div",{class:P({"form-check":!0,"form-switch":!0,"form-switch-lg":!0,"form-switch-success":o.active})},[e("input",{class:"form-check-input",type:"checkbox",role:"switch",onClick:w(m=>l.toggleActiveStatus(o.id,!o.active),["prevent"]),id:"status_"+o.id,checked:o.active},null,8,Bt)],2)])):g("",!0)])])])])]))),128)):(a(),F(T,{key:1},{default:c(()=>[e("div",Mt,[e("table",Pt,[e("tbody",null,[e("tr",null,[e("td",St,[t[28]||(t[28]=e("img",{src:J,alt:"Loading...",style:{width:"100px"}},null,-1)),e("h5",null,i(s.$t("no_data_found")),1)])])])])])]),_:1}))])),e("div",null,[l.successMessage?(a(),n("div",Vt,[e("div",Lt,[t[29]||(t[29]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[30]||(t[30]=u()),t[31]||(t[31]=e("strong",null,"Success",-1)),u(" - "+i(l.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[5]||(t[5]=(...o)=>l.dismissMessage&&l.dismissMessage(...o)),"aria-label":"Close Success Message"})])])):g("",!0),l.alertMessage?(a(),n("div",Dt,[e("div",It,[t[32]||(t[32]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[33]||(t[33]=u()),t[34]||(t[34]=e("strong",null,"Alert",-1)),u(" - "+i(l.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[6]||(t[6]=(...o)=>l.dismissMessage&&l.dismissMessage(...o)),"aria-label":"Close Alert Message"})])])):g("",!0)]),d(H,{modelValue:l.rightOffcanvas,"onUpdate:modelValue":t[9]||(t[9]=o=>l.rightOffcanvas=o),placement:"end",title:s.$t("users_filters"),"header-class":"bg-light","body-class":"p-0 overflow-hidden","footer-class":"border-top p-3 text-center"},{default:c(()=>[d($,{action:"",class:"d-flex flex-column justify-content-end h-100"},{default:c(()=>[e("div",Ot,[e("div",Tt,[e("label",Ht,i(s.$t("status")),1),e("div",null,[e("div",At,[D(e("input",{class:"form-check-input","onUpdate:modelValue":t[7]||(t[7]=o=>l.filter.status=o),type:"radio",name:"inlineRadioOptions",id:"active",value:"1"},null,512),[[G,l.filter.status]]),e("label",Ft,i(s.$t("active")),1)]),e("div",Nt,[D(e("input",{class:"form-check-input","onUpdate:modelValue":t[8]||(t[8]=o=>l.filter.status=o),type:"radio",name:"inlineRadioOptions",id:"inactive",value:"0"},null,512),[[G,l.filter.status]]),e("label",Ut,i(s.$t("inactive")),1)])])])]),e("div",Et,[d(k,{variant:"light",onClick:l.clearFilter,class:"w-100"},{default:c(()=>[u(i(s.$t("clear_filter")),1)]),_:1},8,["onClick"]),d(k,{type:"submit",onClick:l.filterData,variant:"success",class:"w-100"},{default:c(()=>[u(i(s.$t("apply")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["modelValue","title"]),d(j,{paginator:l.paginator,onPageChanged:l.handlePageChanged},null,8,["paginator","onPageChanged"])]),_:1})}const Zt=Q(_e,[["render",Rt],["__scopeId","data-v-432e21f4"]]);export{Zt as default};
