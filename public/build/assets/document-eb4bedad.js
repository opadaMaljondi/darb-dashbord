import{_ as $,Z as A,B as E,D as P,r as c,T as H,g as _,U as x,i as n,y as S,w as g,a as U,N as p,l as h,n as e,J as l,k as i,L as z,q as T,t as F,C as r,F as L,z as C,M as j,p as R}from"./vendor-8caf5d52.js";import{L as q}from"./main-cc7bd0ce.js";import{P as J}from"./page-header-18309276.js";import{P as O}from"./Pagination-0518e4bd.js";import"./footer-502c2797.js";import"./app-974c65a1.js";const Z={data(){return{rightOffcanvas:!1}},components:{Layout:q,PageHeader:J,Head:A,Pagination:O,Link:E},props:{successMessage:String,alertMessage:String,ownerId:Number,documents:Array},setup(a){const{t}=P(),u=c(a.successMessage||""),o=c(a.alertMessage||""),w=c(!1),k=c(null),v=c(null),f=c(!1),b=c(null),D=()=>{u.value="",o.value=""},N=async d=>{(await U.post(`/manage-owners/document-toggle/${d}/${a.ownerId}/1`)).data.allDocumentsApproved==!0?(u.value=t("document_approved"),p.get("/manage-owners")):p.get(`/manage-owners/document/${a.ownerId}`)},B=async d=>{f.value=!0,b.value=d},y=H({reason:""}),M=async()=>{try{(await U.post(`/manage-owners/document-toggle/${b.value}/${a.ownerId}/5`,{reason:y.reason})).data.allDocumentsDisapproved==!0?(u.value=t("document_declined"),p.get("/manage-owners")):p.get(`/manage-owners/document/${a.ownerId}`),f.value=!1}catch(d){console.error("Error declining document:",d),o.value=t("decline_failed")}},s=async()=>{await U.get(`/manage-owners/update/${a.ownerId}`),p.get("/manage-owners")},I=c(null),m=c(null);return{successMessage:u,alertMessage:o,dismissMessage:D,approveDocument:N,declineDocument:B,updateDocuments:s,viewDocument:d=>{k.value=d.image,v.value=d.back_image,w.value=!0,I.value=d.document_name_front??t("document"),m.value=d.document_name_back??t("document")},closeModal:()=>{w.value=!1,k.value=null,v.value=null},showModal:w,imageUrl:k,backImageUrl:v,documentNameFront:I,documentNameBack:m,disapproveModelShow:f,document_id:b,form:y,handleSubmit:M}}},G={class:"row"},K={class:"col-lg-12"},Q={class:"card",id:"tasksList"},W={class:"card-body border border-dashed border-end-0 border-start-0"},X={class:"table-responsive"},Y={class:"table align-middle position-relative table-nowrap"},ee={class:"table-active"},se={scope:"col"},te={scope:"col"},oe={scope:"col"},ae={scope:"col"},le={scope:"col"},ne={scope:"col"},ie={scope:"col"},de=["onClick"],re=["onClick"],ce=["onClick"],ue=["onClick"],me={key:0,class:"modal fade show",tabindex:"-1",role:"dialog",style:{display:"block"}},_e={class:"modal-dialog",role:"document"},be={class:"modal-content"},ge={class:"modal-header d-flex align-items-center justify-content-between"},ve={class:"modal-title"},fe={class:"modal-body"},pe={id:"carouselExampleFade",class:"carousel slide carousel-fade py-5","data-ride":"carousel"},he={class:"carousel-inner"},we={class:"carousel-item active"},ke={key:0,class:"car-img"},ye=["src","alt"],Me={class:"text-center"},Ce={key:1,class:"d-grid"},De={class:"text-center m-auto"},Ne={class:"carousel-item"},Be={key:0,class:"car-img"},Ie=["src","alt"],Se={class:"text-center"},Ue={key:1,class:"d-grid"},Fe={class:"text-center m-auto"},Le={class:"modal-footer"},Ve=["href"],$e=["href"],Ae={key:1,class:"custom-alert alert alert-success alert-border-left fade show"},Ee={class:"alert-content"},Pe={key:2,class:"custom-alert alert alert-danger alert-border-left fade show"},He={class:"alert-content"},xe={class:"row"},ze={class:"col-sm-12"},Te={class:"mb-3"},je={for:"declined_reason",class:"form-label"},Re=["placeholder"],qe={class:"modal-footer v-modal-footer"};function Je(a,t,u,o,w,k){const v=_("Head"),f=_("PageHeader"),b=_("BButton"),D=_("BLink"),N=_("FormValidation"),B=_("BModal"),y=_("Layout"),M=x("b-tooltip");return n(),S(y,null,{default:g(()=>[h(v,{title:"Documents"}),h(f,{title:a.$t("documents"),pageTitle:a.$t("documents"),pageLink:"/manage-owners"},null,8,["title","pageTitle"]),e("div",G,[e("div",K,[e("div",Q,[t[10]||(t[10]=e("div",{class:"card-header border-0"},null,-1)),e("div",W,[e("div",X,[e("table",Y,[e("thead",ee,[e("tr",null,[e("th",se,l(a.$t("document_name")),1),e("th",te,l(a.$t("identify_number")),1),e("th",oe,l(a.$t("expiry_date")),1),e("th",ae,l(a.$t("status")),1),e("th",le,l(a.$t("comment")),1),e("th",ne,l(a.$t("document")),1),e("th",ie,l(a.$t("action")),1)])]),e("tbody",null,[(n(!0),i(L,null,z(u.documents,(s,I)=>(n(),i("tr",{key:s.id},[e("td",null,l(s.name),1),e("td",null,l(s.identify_number||"N/A"),1),e("td",null,l(s.expiry_date||"N/A"),1),e("td",null,[e("span",{class:T({badge:!0,"bg-success":s.document_status===1,"bg-secondary":s.document_status===2||s.document_status==null,"bg-warning":s.document_status===3||s.document_status===4,"bg-danger":s.document_status===5||s.document_status===0,"bg-dark":s.document_status===6})},l(s.document_status===1?a.$t("approved"):s.document_status===2||s.document_status==null?a.$t("not_uploaded"):s.document_status===3||s.document_status===4?a.$t("waiting_for_approval"):s.document_status===0||s.document_status===5?a.$t("declined"):s.document_status===6?a.$t("expired"):""),3)]),e("td",null,l(s.comment||"N/A"),1),e("td",null,[F((n(),S(b,{class:"btn btn-soft-info btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"view",onClick:m=>o.viewDocument(s)},{default:g(()=>t[8]||(t[8]=[e("i",{class:"bx bx-show-alt align-center"},null,-1)])),_:2,__:[8]},1032,["onClick"])),[[M,void 0,void 0,{hover:!0}]]),F((n(),S(b,{class:"btn btn-soft-success btn-sm m-2",size:"sm","data-bs-toggle":"tooltip",title:"upload",href:`/manage-owners/document-upload/${s.id}/${u.ownerId}`},{default:g(()=>t[9]||(t[9]=[e("i",{class:"bx bx-upload align-center"},null,-1)])),_:2,__:[9]},1032,["href"])),[[M,void 0,void 0,{hover:!0}]])]),e("td",null,[s.document_status===1?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:m=>o.declineDocument(s.id)},l(a.$t("decline")),9,de)):r("",!0),s.document_status===5?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:m=>o.approveDocument(s.id)},l(a.$t("approve")),9,re)):r("",!0),s.document_status===2||s.document_status==null?r("",!0):(n(),i(L,{key:2},[s.document_status===3||s.document_status===4||s.document_status===6?(n(),i("button",{key:0,type:"button",class:"btn btn-outline-success waves-effect waves-light btn-sm me-1",onClick:m=>o.approveDocument(s.id)},l(a.$t("approve")),9,ce)):r("",!0),s.document_status===3||s.document_status===4||s.document_status===6?(n(),i("button",{key:1,type:"button",class:"btn btn-outline-danger waves-effect waves-light btn-sm",onClick:m=>o.declineDocument(s.id)},l(a.$t("decline")),9,ue)):r("",!0)],64))])]))),128))])])])])])])]),o.showModal?(n(),i("div",me,[e("div",_e,[e("div",be,[e("div",ge,[e("h5",ve,l(a.$t("view_document")),1),e("a",{href:"#",class:"close fs-18",onClick:t[0]||(t[0]=(...s)=>o.closeModal&&o.closeModal(...s)),"aria-label":"Close"},t[11]||(t[11]=[e("span",{class:"fs-22","aria-hidden":"true"},"Ã—",-1)]))]),e("div",fe,[e("div",pe,[t[14]||(t[14]=e("div",{class:"carousel-indicators"},[e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"0",class:"active","aria-current":"true","aria-label":"Slide 1"}),e("button",{type:"button","data-bs-target":"#carouselExampleFade","data-bs-slide-to":"1","aria-label":"Slide 2"})],-1)),e("div",he,[e("div",we,[o.imageUrl?(n(),i("div",ke,[e("img",{src:o.imageUrl,alt:o.documentNameFront,class:"img-fluid mb-2"},null,8,ye),e("h5",Me,l(o.documentNameFront),1)])):(n(),i("div",Ce,[t[12]||(t[12]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",De,l(a.$t("no_front_image_available")),1)]))]),e("div",Ne,[o.backImageUrl?(n(),i("div",Be,[e("img",{src:o.backImageUrl,alt:o.documentNameBack,class:"img-fluid mb-2"},null,8,Ie),e("h5",Se,l(o.documentNameBack),1)])):(n(),i("div",Ue,[t[13]||(t[13]=e("i",{class:"ri-image-fill m-auto fs-22"},null,-1)),e("h6",Fe,l(a.$t("no_back_image_available")),1)]))])]),t[15]||(t[15]=e("a",{class:"carousel-control-prev bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"prev"},[e("span",{class:"carousel-control-prev-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Previous")],-1)),t[16]||(t[16]=e("a",{class:"carousel-control-next bg-dark",style:{height:"30px"},href:"#carouselExampleFade",role:"button","data-bs-slide":"next"},[e("span",{class:"carousel-control-next-icon","aria-hidden":"true"}),e("span",{class:"sr-only"},"Next")],-1))])]),e("div",Le,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[1]||(t[1]=(...s)=>o.closeModal&&o.closeModal(...s))},l(a.$t("close")),1),o.imageUrl?(n(),i("a",{key:0,href:o.imageUrl,download:"",class:"btn btn-primary"},l(a.$t("download_front_image")),9,Ve)):r("",!0),o.backImageUrl?(n(),i("a",{key:1,href:o.backImageUrl,download:"",class:"btn btn-primary"},l(a.$t("download_back_image")),9,$e)):r("",!0)])])])])):r("",!0),o.successMessage?(n(),i("div",Ae,[e("div",Ee,[t[17]||(t[17]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[18]||(t[18]=e("strong",null,"Success",-1)),C(" - "+l(o.successMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-success",onClick:t[2]||(t[2]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Success Message"})])])):r("",!0),o.alertMessage?(n(),i("div",Pe,[e("div",He,[t[19]||(t[19]=e("i",{class:"ri-notification-off-line me-3 align-middle"},null,-1)),t[20]||(t[20]=e("strong",null,"Alert",-1)),C(" - "+l(o.alertMessage)+" ",1),e("button",{type:"button",class:"btn-close btn-close-danger",onClick:t[3]||(t[3]=(...s)=>o.dismissMessage&&o.dismissMessage(...s)),"aria-label":"Close Alert Message"})])])):r("",!0),h(B,{modelValue:o.disapproveModelShow,"onUpdate:modelValue":t[7]||(t[7]=s=>o.disapproveModelShow=s),"hide-footer":"",title:a.$t("declined_reason"),class:"v-modal-custom",size:"md"},{default:g(()=>[e("form",null,[h(N,{form:o.form,rules:a.validationRules,ref:"validationRef"},{default:g(()=>[e("div",xe,[e("div",ze,[e("div",Te,[e("label",je,[C(l(a.$t("declined_reason")),1),t[21]||(t[21]=e("span",{class:"text-danger"},"*",-1))]),F(e("input",{type:"text",class:"form-control",placeholder:a.$t("enter_declined_reason"),id:"declined_reason","onUpdate:modelValue":t[4]||(t[4]=s=>o.form.reason=s)},null,8,Re),[[j,o.form.reason]])])])]),e("div",qe,[h(D,{href:"javascript:void(0);",class:"btn btn-link link-warning fw-medium",onClick:t[5]||(t[5]=s=>o.disapproveModelShow=!1)},{default:g(()=>[t[22]||(t[22]=e("i",{class:"ri-close-line me-1 align-middle"},null,-1)),C(" "+l(a.$t("close")),1)]),_:1,__:[22]}),e("button",{type:"button",class:"btn btn-soft-info waves-effect waves-light",onClick:t[6]||(t[6]=R((...s)=>o.handleSubmit&&o.handleSubmit(...s),["prevent"]))},l(a.$t("submit")),1)])]),_:1},8,["form","rules"])])]),_:1},8,["modelValue","title"])]),_:1})}const ss=$(Z,[["render",Je],["__scopeId","data-v-328bb61d"]]);export{ss as default};
